{"version":3,"sources":["Services/Totales.js","Services/API.js","Services/Preferences.js","App.state.js","Components/ProductDetails.js","Components/TakeOrder.js","Services/HorarioCalcs.js","Components/ConfirmOrder/Schedule.js","Components/ConfirmOrder/index.js","Services/ValidarIdentificacion.js","Services/ValidateInput.js","Components/InvoiceData.js","Services/Geo.js","Components/ContactData.js","Components/Location.js","Components/Payment.js","Components/Done.js","HOCs/WithValidate.js","Services/StepValidations.js","Components/Layouts/NavigationButtons.js","App.js","index.js","Home.js"],"names":["Totales","detalle","PORCENTAJE_IVA","mutable","base0","baseIva","subtotal","iva","servicio","descuentoTotal","total","i","length","d","cantidad","neto","pvp","pagaIva","round","total_con_decimales","total_redondeado","console","info","isNaN","propina","URL","store","data","window","location","pathname","split","indexOf","replace","Fetch","URI","options","fetch","method","cache","mode","then","response","ok","json","clone","catch","text","x","message","status","statusText","obj","Object","objectSpread","ex","API","GetProducts","GetProduct","ID","SaveOrder","state","contactData","direccion","invoiceData","items","envio_programado","delivery","taking_order_time","Date","valueOf","start_timestamp","all_items","toConsumableArray","valor","push","id","totals","porcentajeIVA","ORDER","nota","forma_pago","numeroTransaccion","lat","position","lng","referencia","valor_delivery","mts_delivery","metros","segs_delivery","segundos","info_id","documento_factura","documento","identificacion_factura","identificacion","razonsocial_factura","razonSocial","direccion_factura","telefono_factura","telefono","email_factura","email","body","JSON","stringify","headers","Content-Type","Access-Control-Allow-Origin","GetStoreData","CheckCoverage","concat","RedirectTo","new_store","step1","new_url","href","btoa","Set","key","item","localStorage","setItem","log","Get","result","getItem","parse","warn","undefined","activeStep","productList","nombre","orderNumber","ProductDetails","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","descripcion","pvp_final","imgSrc","loading","handleInput","bind","assertThisInitialized","handleDone","handleCantidad","handleExit","match","params","choosenItems","find","_this2","setState","alert","event","name","currentTarget","prev","newState","target","defineProperty","value","onDone","_this$props","history","new_path","path","substr","_this$props2","classes","fullScreen","DialogProps","scroll","sm","open","TransitionComponent","Transition","paper","dialogPaper","toFixed","react_default","a","createElement","Fragment","index_es","loadingPaper","style","marginTop","marginBottom","textAlign","size","variant","smUp","color","flexGrow","textTransform","onClick","icons_index_es","padding","xsDown","float","right","top","className","image","title","width","display","flexDirection","margin","flex","verticalAlign","QuantityButton","marginLeft","marginRight","disabled","inputProps","maxLength","onChange","placeholder","label","multiline","rows","fullWidth","type","React","Component","withStyles","theme","maxWidth","maxHeight","withRouter","withMobileDialog","height","border","children","assign","direction","styles","root","flexWrap","justifyContent","overflow","gridList","transform","_default","onMounted","stepIndex","handleClick","onItemChange","products","reduce","current","exists","group","grupo","idGrupo","orden","grupo_orden","overflowX","overflowY","sort","b","map","p","index","Carousel","react_router","Components_ProductDetails","PureComponent","tile_no_disponible","&::before","background","left","content","zIndex","paddingTop","fontSize","fontWeight","fontFamily","cols","found","TileBar","actionPosition","subtitle","actionIcon","Tile","cursor","paused","tile","src","alt","generateCarouselItem","DayString","day","ParseHorarios","horarios","results","dias","h","dias_ordenados","dias_consecutivos","filter","periodo","PeriodoString","join","tz","desde","hasta","t","PLUS","UTC","getFullYear","getMonth","getDate","parseInt","getDay","toLocaleTimeString","HorariosToDias","dias_a_generar","CURRENT_TZ","getTimezoneOffset","H","min_desde","min_hasta","forEach","horas","hoy","dias_calenario_desde_hoy","sgte_dia","getHours","getMinutes","dia_en_horario","Schedule","dia","hora","handleDia","handleHora","handleClose","handleSubmit","hasOwnProperty","horas_del_dia","HorasDelDia","preventDefault","_this$state","dia_opciones","onClose","onSubmit","select","SelectProps","native","toDateString","selectedDia","HORAS_DEC","HORA","MIN","Day_ADS","toString","ConfirmOrder","handleEnvio","programarEnvio","url","onDataChange","deliveryCost","deliveryStatus","paddingLeft","paddingRight","dense","generateRowItem","valor_envio","items_to_calc","minWidth","generateTotals","onInputChange","estado","Schedule_Schedule","button","Boolean","ValidarIdentificacion","numero","vacioEstaBien","exito","error","mensaje","esValido","parseFloat","isNumber","p1","p2","p3","p4","p5","p6","p7","p8","p9","residuo","pri","pub","nat","modulo","d1","d2","d3","d4","d5","d6","d7","d8","d9","d10","isDigit","d11","d12","d13","digitoVerificador","validadorCedulaRuc","char","ValidateInput","tel","trim","twoParts","textField","paddingBottom","InvoiceData","stored_data","prefs","handleChange","_event$target","msg","c","e","validateMsg","cedula_err","cedula_props","helperText","rs_err","tel_props","tel_err","email_props","email_err","hay_errores","GeoCoder","textFiel","telefono_error","email_error","onInvoiceDataChange","_Object$assign","telefono_props","requireContactCedula","autoFocus","render","r_props","Components_InvoiceData","Promise","resolve","reject","navigator","geolocation","PositionByIP","getCurrentPosition","geoLocation","coords","latitude","longitude","bounds","google","maps","Geocoder","geocode","QUITO_BOUNDS","first","inputText","place","route","street_number","address_components","component","ii","types","short_name","long_name","formatted_address","AddressText","address","west","north","east","south","QUITO","zoom","initial_position","initial_gps_enabled","placeChanged","handleLocationClick","handleMapMounted","handleDragEnd","handleDragStart","handleCenterChanged","positionChanged","valueChanged","prop","gps_enabled","Geo","CanUseGPS","currentPosition","center","_","autocomplete","unbindAll","avoid_update_zoom","mapRef","getZoom","_event$currentTarget","getCenter","toJSON","_this3","getPlace","geometry","CoordsFromPlace","autocompleteRef","_this4","PlaceFromCoords","virtualMarker","classList","add","_this5","remove","document","getDiv","appendChild","mountAutocomplete","_this6","places","Autocomplete","bindTo","addListener","setOptions","strictBounds","_this7","inputRef","ref","InputProps","endAdornment","Location_Map","googleMapURL","G_M_K","containerElement","loadingElement","mapElement","handleMapClick","onZoomChanged","onMapMounted","onCenterChanged","onDragStart","onDragEnd","marker","Map","withScriptjs","withGoogleMap","mapProps","objectWithoutProperties","lib","disableDefaultUI","zoomControl","clickableIcons","MarkerWithLabel","labelAnchor","Point","icon","elevation","Payment","_React$createElement","all","MapFormasPago","formasPago","datosTransferencia","handleReturnToOrder","other_props","Wait","ErrrMsg","IsCompleted","code","ws","ws_phone","ws_msg","final_msg","encodeURIComponent","CreateWSMessage","ev","WithValidate","step","_React$Component","_class2","onMount","inherits","createClass","VerifyStep","requestAnimationFrame","getElementById","focus","NavigationButtons","minHeight","onBackClick","onNextClick","Location","D","TakeOrder","A","B","ContactData","C","E","Done","F","STEPS","resumido","PlaceOutlined","currentIcon","Place","AddShoppingCartOutlined","ShoppingCart","ReceiptOutlined","Receipt","PersonOutlined","Person","MonetizationOnOutlined","MonetizationOn","App","State","handleItemChange","handleInputChange","handleInvoiceDataChange","handleMount","handleNext","handleBack","handleDataChange","prevstep","goToStep","VerificarUbicacion","LoadProducts","PROMISE_GUARDAR","errGuardar","order","prev_position","new_position","loadingMessage","dir","isCovered","deliveryPriceStatus","deliveryPrice","distance","duration","nearestStore","setTimeout","action","btnMessage","levels","pop","reference","PrevItem","PrevIndex","splice","deniedReason","storable_data","_this$state2","alternativeLabel","generateStep","reload","App_ConfirmOrder","App_Payment","saved","exact","from","to","PRE_LOADED_DIRECCION","src_App","react_router_dom","logoSrc","slogan","titulo","horarios_de_atencion","infoHeader","_error","launch","search","URLSearchParams","get","atob","LaunchApp","ReactDOM","LaunchHome","Home_default"],"mappings":"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","file":"static/js/main.1643ed05.chunk.js","sourcesContent":["export default function (detalle, PORCENTAJE_IVA) {\r\n    const mutable = {\r\n        detalle: detalle,\r\n        base0: 0,\r\n        baseIva: 0,\r\n        subtotal: 0,\r\n        iva: 0,\r\n        servicio: 0,\r\n        // propina: 0, // propina es ingresado\r\n        descuentoTotal: 0,\r\n        total: 0\r\n    };\r\n\r\n    for (var i = 0; i < detalle.length; i++) {\r\n        const d = detalle[i];\r\n        if (d.cantidad > 0) {\r\n            let neto = d.cantidad * d.pvp;\r\n            if (d.pagaIva) {\r\n                mutable.baseIva = mutable.baseIva + neto;\r\n            } else {\r\n                mutable.base0 = mutable.base0 + neto;\r\n            }\r\n        }\r\n    }\r\n    mutable.base0 = mutable.base0.round(2);\r\n\r\n    let iva = 0;\r\n    let baseIva = 0;\r\n\r\n    if (PORCENTAJE_IVA && mutable.baseIva) {\r\n        iva = mutable.baseIva * PORCENTAJE_IVA / 100;\r\n        baseIva = mutable.baseIva;\r\n        mutable.iva = iva.round(2);\r\n    }\r\n    mutable.baseIva = mutable.baseIva.round(2);\r\n\r\n    let total_con_decimales = (iva + baseIva).round(2);\r\n    let total_redondeado = mutable.baseIva + mutable.iva;\r\n    if ((total_redondeado - total_con_decimales).round(2) === 0.01) {\r\n        // manualmente le quito ese 1 centavo que esta demas!\r\n        console.info(\"Le quito un centavo por diferencia\", total_con_decimales, total_redondeado)\r\n        mutable.baseIva = mutable.baseIva - 0.01;\r\n    }\r\n\r\n    mutable.servicio = mutable.servicio.round(2);\r\n    mutable.subtotal = (mutable.base0 + mutable.baseIva).round(2);\r\n    // aqui tengo que borrar la columna de propina\r\n    mutable.total = mutable.subtotal + mutable.servicio + mutable.iva + (isNaN(mutable.propina) ? 0 : mutable.propina);\r\n    // a veces, en la suma aparecen demasiados decimales\r\n    // por lo tanto lo redondeo (que tambien hace .toFixed)\r\n    mutable.total = mutable.total.round(2);\r\n    return mutable;\r\n}","import Totales from \"./Totales\";\r\n\r\n/*const URL = (window.location.href.indexOf(\"http://localhost\") === 0)\r\n    ? \"http://localhost:10000/data/\"\r\n    : (window.location.protocol === \"https:\"\r\n        ? \"https://orders-runfoodapp.rj.r.appspot.com/data/\"\r\n        : \"http://runfoodapp.ddns.net:10000/data/\");*/\r\nconst URL = \"https://orders.runfoodapp.com/data/\";\r\n//const URL = \"http://localhost:10000/data/\";\r\nfunction store() {\r\n    const data = window.location.pathname.split(\"/\");\r\n    for (let i = 0; i < data.length; i++) {\r\n        if (data[i].indexOf(\"@\") === 0) {\r\n            return data[i].replace(/#/g, \"\").replace(\"@\", \"\");\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\nconst API = {\r\n    GetProducts() {\r\n        return Fetch(URL + store() + \"/product\");\r\n    },\r\n    GetProduct(ID) {\r\n        return Fetch(URL + store() + \"/product/\" + ID);\r\n    },\r\n    SaveOrder(state) {\r\n        let { contactData, direccion, invoiceData, items, envio_programado, delivery } = state;\r\n\r\n        if (!contactData) contactData = {};\r\n        if (!direccion) direccion = {};\r\n        if (!invoiceData) invoiceData = {};\r\n\r\n        let taking_order_time = new Date().valueOf() - state.start_timestamp;\r\n\r\n        var all_items = [...items];\r\n        if (delivery && delivery.valor) all_items.push({ id: \"domicilio\", pvp: delivery.valor, pagaIva: 0 });\r\n        const totals = Totales(all_items, state.store.porcentajeIVA);\r\n        totals.detalle = items;\r\n\r\n        const ORDER = {\r\n            ...contactData,\r\n            nota: state.nota,\r\n            forma_pago: state.forma_pago,\r\n            numeroTransaccion: state.numeroTransaccion,\r\n\r\n            lat: direccion && direccion.position && direccion.position.lat,\r\n            lng: direccion && direccion.position && direccion.position.lng,\r\n            direccion: direccion.direccion,\r\n            referencia: direccion.referencia,\r\n\r\n            envio_programado,\r\n\r\n            valor_delivery: delivery && delivery.valor,\r\n            mts_delivery: delivery && delivery.metros,\r\n            segs_delivery: delivery && delivery.segundos,\r\n            info_id: delivery && delivery.info_id,\r\n\r\n            documento_factura: invoiceData.documento,\r\n            identificacion_factura: invoiceData.identificacion,\r\n            razonsocial_factura: invoiceData.razonSocial,\r\n            direccion_factura: invoiceData.direccion,\r\n            telefono_factura: invoiceData.telefono,\r\n            email_factura: invoiceData.email,\r\n\r\n            ...totals,\r\n\r\n            taking_order_time\r\n        }\r\n        return Fetch(URL + store() + \"/order\", {\r\n            body: JSON.stringify(ORDER),\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*'\r\n            }\r\n        });\r\n    },\r\n    GetStoreData() {\r\n        return Fetch(URL + store() + \"?withgooglemapskey=1\");\r\n    },\r\n\r\n    CheckCoverage(position) {\r\n        return Fetch(URL + store() + `/check-coverage?lat=${position.lat}&lng=${position.lng}`);\r\n    },\r\n    RedirectTo(new_store, step1) {\r\n        var url = window.location.href;\r\n        var new_url = url.split(\"/@\" + store())[0] + (\"/@\" + new_store);\r\n        if (step1) new_url += \"?step1=\" + btoa(JSON.stringify(step1)) + \"#/1\";\r\n        window.location.replace(new_url);\r\n    }\r\n}\r\nfunction Fetch(URI, options) {\r\n    const DEFAULTS = {\r\n        method: \"GET\",\r\n        cache: \"reload\",\r\n        mode: \"cors\"\r\n    };\r\n    return fetch(URI, options || DEFAULTS).then(response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        } else {\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }\r\n    }).catch(ex => {\r\n        if (ex.message === \"Failed to fetch\") {\r\n            throw {\r\n                message: \"Este servicio no se encuentra disponible por el momento. Intentelo más tarde.\",\r\n                status: 0\r\n            }\r\n        }\r\n        if (!ex.message) ex.message = ex.statusText;\r\n        throw ex;\r\n    });\r\n}\r\nexport default API;","export function Set(key, item) {\r\n    window.localStorage.setItem(key, item);\r\n    console.log(\"Preferences.\" + key + \" stored\");\r\n}\r\nexport function Get(item) {\r\n    let result = window.localStorage.getItem(item);\r\n    try {\r\n        result = JSON.parse(result);\r\n    } catch (ex) {\r\n        console.warn(\"Preferences.\" + item, ex);\r\n    }\r\n    if (result === \"true\" || result === \"false\") return result === \"true\";\r\n    console.log(\"Preferences.\" + item + \" sent\", result);\r\n    if (result === null || result === undefined) return null;\r\n    return result;\r\n}","export default class {\r\n    activeStep = 0;\r\n    items = [];\r\n    productList = [];\r\n    forma_pago = 1;\r\n    numeroTransaccion = null;\r\n\r\n    nota = \"\";\r\n    // con esta funcion se si la direccion fue aprobada o no!\r\n    delivery = null;\r\n    contactData = {\r\n        telefono: \"\",\r\n        nombre: \"\",\r\n        email: \"\",\r\n        documento: 2,\r\n        identificacion: \"\"\r\n    };\r\n    invoiceData = null;\r\n    direccion = {\r\n        direccion: \"\",\r\n        referencia: \"\",\r\n        position: null\r\n    };\r\n    envio_programado = null;\r\n    start_timestamp = new Date().valueOf();\r\n    orderNumber = null;\r\n}","import React from \"react\";\r\nimport {\r\n    Dialog, DialogContent, Typography, IconButton, TextField,\r\n    Button, DialogActions, Fab, CircularProgress, CardMedia,\r\n    withStyles,\r\n    withMobileDialog,\r\n    AppBar, Toolbar, Hidden, Slide\r\n} from \"@material-ui/core\";\r\nimport { Add, Remove, Close } from \"@material-ui/icons\";\r\nimport { withRouter } from \"react-router-dom\";\r\nconst styles = theme => ({\r\n    dialogPaper: {\r\n        maxWidth: 450,\r\n        width: \"100%\",\r\n        maxHeight: \"calc(100% - 20px)\",\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    },\r\n    loadingPaper: {\r\n        marginLeft: 10,\r\n        marginRight: 10,\r\n        width: \"calc(100% - 20px)\",\r\n        maxWidth: 450\r\n    }\r\n});\r\n\r\nclass ProductDetails extends React.Component {\r\n    state = {\r\n        nombre: \"\",\r\n        descripcion: \"\",\r\n        pvp_final: 0,\r\n        cantidad: 1,\r\n        imgSrc: \"\",\r\n        nota: \"\",\r\n        loading: true\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n        this.handleCantidad = this.handleCantidad.bind(this);\r\n        this.handleExit = this.handleExit.bind(this);\r\n        this.ID = props.match.params.id;\r\n        if (props.choosenItems && props.choosenItems.length) {\r\n            let item = props.choosenItems.find(x => x.id === (+this.ID));\r\n            if (item) this.state = { ...item, loading: false };\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        if (!this.state.loading) return;\r\n        const { productList } = this.props;\r\n        if (productList && productList.length) {\r\n            const data = productList.find(x => x.id === (+this.ID));\r\n            if (data)\r\n                return this.setState({ loading: false, ...data });\r\n        }\r\n        alert(\"No se encontró el producto en la lista. Recargue la pantalla.\");\r\n    }\r\n    handleCantidad(event) {\r\n        const name = event.currentTarget.name;\r\n        this.setState(prev => {\r\n            const newState = { ...prev };\r\n            let cantidad = newState.cantidad;\r\n            if (name === \"add\") cantidad = (cantidad || 0) + 1;\r\n            if (name === \"remove\") cantidad = cantidad <= 0 ? 0 : (cantidad - 1);\r\n            newState.cantidad = cantidad;\r\n            console.log(\"Product Details new cantidad \", cantidad);\r\n            return newState;\r\n        });\r\n    }\r\n    handleInput(event) {\r\n        const { target } = event;\r\n        this.setState({ [target.name]: target.value });\r\n    }\r\n    handleDone() {\r\n        this.props.onDone({ ...this.state });\r\n        this.handleExit();\r\n    }\r\n    handleExit() {\r\n        const { match, history } = this.props;\r\n        const new_path = match.path.substr(0, match.path.indexOf(\"/view-product/:id\"))\r\n        history.push(new_path);\r\n    }\r\n    render() {\r\n        const { state } = this;\r\n        const { classes, fullScreen } = this.props;\r\n        const DialogProps = {\r\n            fullScreen,\r\n            scroll: \"paper\",\r\n            sm: true,\r\n            open: !state.loading\r\n        };\r\n        if (fullScreen) {\r\n            DialogProps.TransitionComponent = Transition;\r\n        } else {\r\n            DialogProps.classes = { paper: classes.dialogPaper };\r\n        }\r\n\r\n        const pvp = ((state.pvp_final && state.cantidad)\r\n            ? (state.pvp_final * state.cantidad)\r\n            : state.pvp_final).toFixed(2);\r\n\r\n        return (<React.Fragment>\r\n            {state.loading && <Dialog open={true} classes={{ paper: classes.loadingPaper }}>\r\n                <div style={{ marginTop: 100, marginBottom: 100, textAlign: \"center\" }}>\r\n                    <CircularProgress size={30} />\r\n                    <Typography variant=\"h5\">Cargando...</Typography>\r\n                </div>\r\n            </Dialog>}\r\n            <Dialog  {...DialogProps}>\r\n                <Hidden smUp>\r\n                    <AppBar position=\"static\">\r\n                        <Toolbar>\r\n                            <Typography color=\"inherit\" style={{ flexGrow: 1, textTransform: \"uppercase\" }} variant=\"h6\">{state.nombre}</Typography>\r\n                            <IconButton color=\"inherit\" onClick={this.handleExit}>\r\n                                <Close />\r\n                            </IconButton>\r\n                        </Toolbar>\r\n                    </AppBar>\r\n                </Hidden>\r\n\r\n                <DialogContent style={{ padding: 0 }}>\r\n                    <Hidden xsDown>\r\n                        <Fab onClick={this.handleExit} color=\"secondary\" style={{ float: \"right\", right: 10, top: 10, position: \"absolute\" }}>\r\n                            <Close />\r\n                        </Fab>\r\n                    </Hidden>\r\n                    <CardMedia className=\"product-details-img\" image={state.imgSrc || \"https://diegopq95.github.io/img/default.png\"} title={state.nombre} />\r\n\r\n                    <Hidden xsDown>\r\n                        <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\" }}>\r\n                            <Typography style={{ margin: 10, flex: 1, textTransform: \"uppercase\" }} variant=\"title\">{state.nombre}</Typography>\r\n                            <Typography style={{ margin: 10 }} variant=\"title\">$ {pvp}</Typography>\r\n                        </div>\r\n                    </Hidden>\r\n\r\n                    <Typography style={{ margin: 10 }} variant=\"body2\">\r\n                        {state.descripcion}\r\n                    </Typography>\r\n\r\n                    <div style={{ width: \"100%\", textAlign: \"center\", marginTop: 20, marginBottom: 20, display: \"table\" }}>\r\n                        <Hidden smUp>\r\n                            <Typography style={{ verticalAlign: \"middle\", display: \"table-cell\" }} variant=\"h6\">$ {pvp}</Typography>\r\n                        </Hidden>\r\n\r\n                        <div style={{ display: \"table-cell\", verticalAlign: \"middle\" }} >\r\n                            <QuantityButton onClick={this.handleCantidad} name=\"add\">\r\n                                <Add />\r\n                            </QuantityButton>\r\n                            <Typography style={{ display: \"inline-block\", marginLeft: 20, marginRight: 20 }} variant=\"h6\">\r\n                                {state.cantidad || 0}\r\n                            </Typography>\r\n                            <QuantityButton disabled={state.cantidad <= 0} onClick={this.handleCantidad} name=\"remove\">\r\n                                <Remove />\r\n                            </QuantityButton>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ width: \"95%\", margin: \"auto\" }}>\r\n                        <TextField value={state.nota}\r\n                            inputProps={{ maxLength: 200 }}\r\n                            onChange={this.handleInput}\r\n                            name=\"nota\"\r\n                            color=\"default\"\r\n                            placeholder=\"Ej. Sin Salsa, verduras aparte, etc.\"\r\n                            label=\"Agrega una nota:\"\r\n                            variant=\"outlined\"\r\n                            multiline rows=\"3\" fullWidth />\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"button\" onClick={this.handleDone} color=\"primary\" variant=\"outlined\">AGREGAR</Button>\r\n                </DialogActions>\r\n            </Dialog >\r\n        </React.Fragment >);\r\n    }\r\n}\r\nexport default withStyles(styles)(withRouter(withMobileDialog()(ProductDetails)));\r\n\r\nfunction QuantityButton(props) {\r\n    const style = { height: 50, width: 50, border: \"1px solid gray\" };\r\n    if (props.disabled) delete style.border;\r\n    return (<IconButton\r\n        disabled={props.disabled}\r\n        onClick={props.onClick}\r\n        name={props.name} style={style}\r\n    >\r\n        {props.children}\r\n    </IconButton>)\r\n}\r\n\r\nfunction Transition(props) {\r\n    return <Slide direction=\"up\" {...props} />;\r\n}","import React from \"react\";\r\nimport { Typography, GridList, GridListTile, GridListTileBar, withStyles } from \"@material-ui/core\";\r\nimport ProductDetails from \"./ProductDetails\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nconst styles = {\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-around',\r\n        overflow: 'hidden'\r\n    },\r\n    gridList: {\r\n        flexWrap: 'nowrap',\r\n        // Promote the list into his own layer on Chrome. This cost memory but helps keeping high FPS.\r\n        transform: 'translateZ(0)',\r\n    }\r\n};\r\n\r\nexport default class extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepIndex);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleClick(event) {\r\n        this.props.history.push(this.props.match.path + \"/view-product/\" + event.currentTarget.id);\r\n    }\r\n    render() {\r\n        console.log(\"TakeOrder rendered\");\r\n        const { productList, style, choosenItems, match, onItemChange } = this.props;\r\n        const products = productList.reduce((prev, current) => {\r\n            let exists = prev.find(x => x.group === current.grupo);\r\n            if (!exists) {\r\n                exists = {\r\n                    group: current.grupo,\r\n                    id: current.idGrupo,\r\n                    orden: current.grupo_orden,\r\n                    items: []\r\n                }\r\n                prev.push(exists);\r\n            }\r\n            exists.items.push(current);\r\n            return prev;\r\n        }, []);\r\n\r\n        if (!(products && products.length)) {\r\n            return (<div style={{ ...style, textAlign: \"center\" }}>\r\n                <Typography variant=\"h6\">Esta tienda no tiene productos disponibles. Intenta nuevamente después.</Typography>\r\n            </div>)\r\n        }\r\n        return (<div style={{ ...style, textAlign: \"left\", overflowX: \"hidden\", overflowY: \"auto\" }}>\r\n            {products.sort((a, b) => a.orden - b.orden).map((p, index) =>\r\n                (<Carousel key={p.id || index}\r\n                    onClick={this.handleClick}\r\n                    style={{ marginTop: 10, marginBottom: 10 }}\r\n                    title={p.group}\r\n                    items={p.items}\r\n                    choosenItems={choosenItems}\r\n                />))}\r\n            <Route path={match.path + \"/view-product/:id\"}>\r\n                <ProductDetails\r\n                    choosenItems={choosenItems || []}\r\n                    onDone={onItemChange}\r\n                    productList={productList}\r\n                />\r\n            </Route>\r\n        </div>);\r\n    }\r\n}\r\nconst Carousel = withStyles({\r\n    tile_no_disponible: {\r\n        \"&::before\": {\r\n            background: \"#b3b1b1d4\",\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n            content: '\"NO DISPONIBLE\"',\r\n            zIndex: 100,\r\n            color: \"white\",\r\n            paddingTop: 60,\r\n            fontSize: \"calc(1em + 1vw)\",\r\n            fontWeight: \"bolder\",\r\n            fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n            textAlign: \"center\"\r\n        }\r\n    }\r\n})(function (props) {\r\n    return (<div style={{ ...props.style }}>\r\n        <Typography variant=\"h6\" style={{ marginLeft: 10 }}>{props.title}</Typography>\r\n        <GridList cols={2.5} style={styles.gridList}>\r\n            {props.items.sort((a, b) => a.orden - b.orden).map((item) => {\r\n                const found = (props.choosenItems || []).find(x => x.id === item.id);\r\n                return generateCarouselItem(item, found && found.cantidad, props.onClick, props.classes);\r\n            })}\r\n        </GridList>\r\n    </div>)\r\n});\r\nfunction generateCarouselItem(item, cantidad, onClick, classes) {\r\n    const TileBar = {\r\n        title: item.nombre,\r\n        actionPosition: \"right\",\r\n        subtitle: \"$ \" + item.pvp_final.toFixed(2)\r\n    }\r\n    if (cantidad) {\r\n        TileBar.actionIcon = <Typography variant=\"body2\" style={{ color: \"#fff\", marginRight: 5 }} >x{cantidad}</Typography>;\r\n    }\r\n    const Tile = {\r\n        cursor: \"pointer\"\r\n    };\r\n    if (cantidad) {\r\n        Tile.border = \"3px dashed #f50057\";\r\n    }\r\n    if (item.paused) {\r\n        console.info(\"Item paused\", classes);\r\n    }\r\n    return (<GridListTile\r\n        classes={{ tile: item.paused ? classes.tile_no_disponible : null }}\r\n        style={Tile}\r\n        key={item.id}\r\n        onClick={(event) => item.paused ? alert(\"Este item no está disponible\") : onClick(event)}\r\n        id={item.id}\r\n        color=\"inherit\"\r\n        disabled={!item.paused} >\r\n        <img src={item.imgSrc} alt={item.nombre} />\r\n        <GridListTileBar {...TileBar} />\r\n    </GridListTile >);\r\n};","function DayString(day) {\r\n    if (day === 0) return \"Dom\";\r\n    if (day === 1) return \"Lun\";\r\n    if (day === 2) return \"Mar\";\r\n    if (day === 3) return \"Mie\";\r\n    if (day === 4) return \"Jue\";\r\n    if (day === 5) return \"Vie\";\r\n    if (day === 6) return \"Sab\";\r\n    if (day === 7) return \"Dom\";\r\n}\r\nexport function ParseHorarios(horarios) {\r\n    var results = [];\r\n    if (horarios && horarios.length) {\r\n        for (let i = 0; i < horarios.length; i++) {\r\n            const h = horarios[i];\r\n            var dias_ordenados = h.dias\r\n                .map(x => x === 0 ? 7 : x)\r\n                .sort((a, b) => a - b);\r\n\r\n            var dias_consecutivos = dias_ordenados.length > 1 && dias_ordenados\r\n                .filter((value, index) => {\r\n                    if (index === 0) return true;\r\n                    return dias_ordenados[index - 1] === (value - 1);\r\n                }).length === dias_ordenados.length;\r\n            var periodo = PeriodoString(h);\r\n            var dias;\r\n            if (dias_consecutivos) {\r\n                dias = DayString(dias_ordenados[0]) + \" - \" + DayString(dias_ordenados[dias_ordenados.length - 1]);\r\n            } else {\r\n                dias = dias_ordenados.map(x => DayString(x)).join(\", \");\r\n            }\r\n            results.push({ periodo, dias });\r\n        }\r\n    }\r\n    return results;\r\n}\r\n\r\nfunction PeriodoString(h) {\r\n    var { tz, desde, hasta } = h;\r\n    var t = new Date();\r\n    var desde = new Date(Date.UTC(t.getFullYear(), t.getMonth(), t.getDate(), desde[0], parseInt(desde[1]) + parseInt(tz), 59));\r\n    var hasta = new Date(Date.UTC(t.getFullYear(), t.getMonth(), t.getDate(), hasta[0], parseInt(hasta[1]) + parseInt(tz), 59));\r\n    var PLUS = \"\";\r\n    if (desde.getDay() < hasta.getDay()) {\r\n        PLUS = \"+\" + (hasta.getDay() - desde.getDay());\r\n    }\r\n    return desde.toLocaleTimeString().replace(/:59/g, \"\") + \" - \" + hasta.toLocaleTimeString().replace(/:59/g, \"\") + PLUS\r\n}\r\n\r\n/** \r\n * Utiliza una lista de horarios y los genera en DIAS del año\r\n * Si no hay horarios, genera un numeros de dias del año y listo\r\n */\r\nexport function HorariosToDias(horarios, dias_a_generar) {\r\n    var dias = [];\r\n    // en este formato\r\n    // const dia = { day: 1, horas: [9, 10, 11, 12, 24, 56] };\r\n    var CURRENT_TZ = new Date().getTimezoneOffset();\r\n    if (horarios && horarios.length) {\r\n        for (let i = 0; i < horarios.length; i++) {\r\n            const H = horarios[i];\r\n            var dias_ordenados = H.dias.sort((a, b) => a - b);\r\n            // se quee los minutos pasan de 15 en 15\r\n            var min_desde = (H.desde[0] * 60) + H.desde[1] + H.tz - CURRENT_TZ;\r\n            var min_hasta = (H.hasta[0] * 60) + H.hasta[1] + H.tz - CURRENT_TZ;\r\n\r\n            dias_ordenados.forEach(d => {\r\n                var exists = dias.find(x => x.day === d);\r\n                if (!exists) {\r\n                    exists = { day: d, horas: [] };\r\n                    dias.push(exists);\r\n                }\r\n                // verifico si las horas ya existen\r\n                for (let index = min_desde; index <= min_hasta; index += 15) {\r\n                    if (exists.horas.indexOf(index) < 0) {\r\n                        exists.horas.push(index);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    var result = [];\r\n    if (!dias_a_generar) dias_a_generar = 7;\r\n    var hoy = new Date();\r\n    var dias_calenario_desde_hoy = 0;\r\n    while (dias_a_generar) {\r\n        dias_calenario_desde_hoy++;\r\n        var sgte_dia = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate() + dias_calenario_desde_hoy, hoy.getHours(), hoy.getMinutes());\r\n        var dia_en_horario = dias.find(item => item.day === sgte_dia.getDay());\r\n\r\n        var day = [sgte_dia.getFullYear(), sgte_dia.getMonth(), sgte_dia.getDate(), sgte_dia.getTimezoneOffset()].join(\"-\");\r\n        if (dias.length) {\r\n            if (dia_en_horario) {\r\n                result.push({ ...dia_en_horario, Date: sgte_dia, day });\r\n                dias_a_generar--;\r\n            }\r\n        } else {\r\n            result.push({ day, Date: sgte_dia });\r\n            dias_a_generar--;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nwindow.HorariosToDias = HorariosToDias;","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, TextField, DialogActions, Button } from \"@material-ui/core\";\r\nimport { HorariosToDias } from \"../../Services/HorarioCalcs\";\r\n\r\nexport default class Schedule extends React.PureComponent {\r\n    state = {\r\n        dia: \"\",\r\n        hora: \"\",\r\n        dias: []\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleDia = this.handleDia.bind(this);\r\n        this.handleHora = this.handleHora.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        if (props.value) {\r\n            for (const key in this.state) {\r\n                if (props.value.hasOwnProperty(key)) {\r\n                    this.state[key] = props.value[key];\r\n                }\r\n            }\r\n        }\r\n        this.state.dias = HorariosToDias(props.store && props.store.horarios, 7);\r\n    }\r\n    handleDia(event) {\r\n        const { value } = event.currentTarget;\r\n        this.setState({ dia: value });\r\n        var horas_del_dia = HorasDelDia(value, this.state.dias);\r\n        if (!(horas_del_dia &&\r\n            horas_del_dia.length &&\r\n            horas_del_dia.indexOf(+this.state.hora) >= 0)\r\n        ) this.setState({ hora: null });\r\n    }\r\n    handleHora(event) {\r\n        const { value } = event.currentTarget;\r\n        this.setState({ hora: value });\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        // si no le quiere poner hora, esta bien!\r\n        //var horas_del_dia = HorasDelDia(this.state.dia, this.state.dias);x\r\n        this.props.onDone && this.props.onDone({\r\n            dia: this.state.dia,\r\n            hora: this.state.hora\r\n        });\r\n    }\r\n    handleClose() {\r\n        this.props.onDone && this.props.onDone(this.props.value);\r\n    }\r\n\r\n    render() {\r\n        const { dia, hora } = this.state;\r\n        var dias = (this.state.dias && this.state.dias.length && this.state.dias) || [];\r\n        var horas = [{ value: \"\", label: \"Cualquier hora\" }, ...HorasDelDia(dia, dias)];\r\n        var dia_opciones = [{ day: \"\", label: \"Elige un día\" }, ...dias];\r\n\r\n        return (<Dialog open={true} onClose={this.handleClose}>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <DialogContent>\r\n                    <Typography variant=\"h6\">Elige el horario para tu entrega:</Typography>\r\n\r\n                    <TextField\r\n                        select\r\n                        value={dia || \"\"}\r\n                        onChange={this.handleDia}\r\n                        variant=\"outlined\"\r\n                        style={{ width: \"95%\", margin: \"auto\", marginBottom: 10, marginTop: 10 }}\r\n                        SelectProps={{ native: true }}\r\n                    >\r\n                        {dia_opciones.map(d => <option value={d.day} >{d.label || d.Date.toDateString()}</option>)}\r\n                    </TextField>\r\n\r\n                    {horas && horas.length && <TextField\r\n                        select\r\n                        value={hora || \"\"}\r\n                        onChange={this.handleHora}\r\n                        variant=\"outlined\"\r\n                        style={{ width: \"95%\", margin: \"auto\", marginBottom: 10, marginTop: 10 }}\r\n                        SelectProps={{ native: true }}\r\n                    >\r\n                        {horas.map(h => <option value={h.value} >{h.label}</option>)}\r\n                    </TextField>}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"submit\">GUARDAR</Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n}\r\n\r\n\r\nfunction HorasDelDia(dia, dias) {\r\n    var selectedDia = dia && dias.find(item => item.day === dia);\r\n    if (selectedDia) {\r\n        return (selectedDia.horas && selectedDia.horas.map(x => {\r\n            var HORAS_DEC = x / 60;\r\n            var HORA = parseInt(HORAS_DEC);\r\n            var MIN = HORAS_DEC > HORA ? (HORAS_DEC - HORA) * 60 : 0;\r\n            var Day_ADS = 0;\r\n            if (HORA > 23) {\r\n                Day_ADS++;\r\n                HORA = HORA - 24;\r\n            }\r\n            return {\r\n                value: x,\r\n                label: `${HORA.toString().length === 1 ? \"0\" : \"\"}${HORA}` + \":\" + `${MIN.toString().length === 1 ? \"0\" : \"\"}${MIN} ${Day_ADS ? (\"+\" + Day_ADS) : \"\"}`\r\n            }\r\n        })) || [];\r\n    }\r\n    return [];\r\n}","import React from \"react\";\r\nimport { Typography, TextField, List, ListItem, Button } from \"@material-ui/core\";\r\nimport { Route } from \"react-router-dom\";\r\nimport ProductDetails from \"../ProductDetails\";\r\nimport Totales from \"../../Services/Totales\";\r\nimport Schedule from \"./Schedule\";\r\n\r\nexport default class ConfirmOrder extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepIndex);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleEnvio = this.handleEnvio.bind(this);\r\n        this.programarEnvio = this.programarEnvio.bind(this);\r\n    }\r\n    handleClick(event) {\r\n        const id = event.currentTarget.id;\r\n        this.props.history.push(this.props.match.url + \"/view-product/\" + id);\r\n    }\r\n    programarEnvio(value) {\r\n        this.props.onDataChange && this.props.onDataChange(\"envio_programado\", value);\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handleEnvio(event) {\r\n        const programar_envio = event.currentTarget.value;\r\n        if (programar_envio) {\r\n            this.props.history.push(this.props.match.path + \"/schedule\");\r\n        } else {\r\n            this.programarEnvio();\r\n        }\r\n    }\r\n    render() {\r\n        console.log(\"ConfirmOrder rendered\");\r\n        const { props } = this;\r\n        const deliveryCost = (props.delivery || {}).valor;\r\n        const deliveryStatus = (props.delivery || {}).status;\r\n\r\n        return (<div style={{ paddingLeft: 10, paddingRight: 10, overflow: \"auto\", flex: 1 }}>\r\n            <List style={{ marginBottom: 10 }} dense={true}>\r\n                {(props.items).map(x => generateRowItem(x, this.handleClick))}\r\n\r\n                {(deliveryStatus === \"ACTIVO\" && !isNaN(+deliveryCost))\r\n                    ? generateRowItem({\r\n                        id: \"DOMICILIO\",\r\n                        nombre: \"ENVIO A DOMICILIO\"/* + (props.delivery.metros\r\n                            ? (\" (\" + (props.delivery.metros / 1000).round(1) + \" km)\")\r\n                            : \"\")*/,\r\n                        pvp_final: deliveryCost,\r\n                        cantidad: 1\r\n                    }) : null}\r\n\r\n                {generateTotals(props.items, deliveryCost, props.store.porcentajeIVA)}\r\n            </List>\r\n            {deliveryStatus !== \"ACTIVO\"\r\n                ? (<Typography variant=\"subtitle1\" color=\"secondary\">\r\n                    El costo del Envío a Domicilio no está disponible.\r\n                    Debes consultar este valor con la tienda.\r\n                </Typography>)\r\n                : null}\r\n\r\n            <div style={{ width: \"100%\", textAlign: \"center\" }}>\r\n                <TextField\r\n                    label=\"Agrega una nota a tu pedido\"\r\n                    placeholder=\"Ej. Sin cubiertos, sin salas extra, etc.\"\r\n                    multiline\r\n                    name=\"nota\"\r\n                    inputProps={{ maxLength: 200 }}\r\n                    value={props.nota}\r\n                    onChange={props.onInputChange}\r\n                    rows={2}\r\n                    style={{ width: \"95%\", margin: \"auto\", marginBottom: 10, marginTop: 10 }}\r\n                />\r\n                <div style={{ width: \"95%\", display: \"flex\", flexDirection: \"row\", marginTop: 10 }}>\r\n                    {props.store.estado === \"ACTIVO\" &&\r\n                        (<Button color={props.envio_programado ? \"default\" : \"primary\"} style={{ flex: 1, marginRight: 5 }} variant={props.envio_programado ? \"outlined\" : \"contained\"} onClick={this.handleEnvio} value=\"\" >\r\n                            Entrega inmediata\r\n                        </Button>)}\r\n                    <Button color={props.envio_programado ? \"primary\" : \"default\"} style={{ flex: 1, marginLeft: 5 }} variant={props.envio_programado ? \"contained\" : \"outlined\"} onClick={this.handleEnvio} value=\"1\">\r\n                        {props.envio_programado ? \"Entrega programada\" : \"Programa la Entrega\"}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n            <Route path={props.match.path + \"/view-product/:id\"} >\r\n                <ProductDetails productList={props.productList} choosenItems={props.items || []} onDone={props.onItemChange} />\r\n            </Route>\r\n            <Route path={props.match.path + \"/schedule\"} >\r\n                <Schedule store={props.store} value={props.envio_programado} onDone={this.programarEnvio} />\r\n            </Route>\r\n        </div>)\r\n    }\r\n}\r\n\r\nfunction generateRowItem(data, onClick) {\r\n    const color = data.id === \"DOMICILIO\" ? \"primary\" : \"default\";\r\n    return (\r\n        <ListItem\r\n            key={data.id} button={Boolean(onClick)} onClick={onClick} id={data.id}>\r\n            <div style={{ display: \"table\", width: \"100%\" }}>\r\n                <div style={{ display: \"table-cell\", paddingRight: 5 }}>\r\n                    <Typography color={color} variant=\"subtitle1\">{data.nombre}</Typography>\r\n                    {data.nota && <Typography color={color} variant=\"body1\">{data.nota}</Typography>}\r\n                </div>\r\n                <div style={{ display: \"table-cell\", width: \"15%\", maxWidth: 100, textAlign: \"right\" }}>\r\n                    <Typography color={color} variant=\"h6\" style={{ margin: 0, padding: 0 }}>x{data.cantidad}</Typography>\r\n                </div>\r\n                <div style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, minWidth: 75, textAlign: \"right\" }}>\r\n                    <Typography color={color} variant=\"h6\" style={{ margin: 0, padding: 0 }}>$ {(data.pvp_final * data.cantidad).round(2).toFixed(2)}</Typography>\r\n                </div>\r\n            </div>\r\n        </ListItem>)\r\n}\r\nfunction generateTotals(items, valor_envio, porcentajeIVA) {\r\n    var items_to_calc = [...items];\r\n    if (valor_envio) items_to_calc.push({\r\n        id: \"DOMICILIO\", cantidad: 1, pvp: valor_envio, pagaIva: false\r\n    });\r\n    const totals = Totales(items_to_calc, porcentajeIVA);\r\n    return (<ListItem>\r\n\r\n        <div style={{ display: \"table\", width: \"100%\" }}>\r\n            <div style={{ display: \"table-cell\", paddingRight: 5 }}>\r\n                <Typography variant=\"h6\">TOTAL</Typography>\r\n            </div>\r\n            <div style={{ display: \"table-cell\", width: \"15%\", maxWidth: 100, textAlign: \"right\" }}></div>\r\n            <div style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, minWidth: 75, textAlign: \"right\" }}>\r\n                <Typography style={{ margin: 0, padding: 0 }} variant=\"h6\">\r\n                    $ {totals.total.round(2).toFixed(2)}\r\n                </Typography>\r\n            </div>\r\n        </div>\r\n\r\n    </ListItem>);\r\n}\r\n/*\r\n\r\n        <ListItemText primary={<Typography variant=\"h5\" style={{ margin: 0, padding: 0 }}>\r\n            Total\r\n            </Typography>}\r\n        />\r\n        <ListItemSecondaryAction>\r\n            <Typography style={{ margin: 0, padding: 0 }} variant=\"h5\">\r\n                {items.length}\r\n            </Typography>\r\n            <Typography style={{ margin: 0, padding: 0 }} variant=\"h5\">\r\n                $ {(totals.total + (valor_envio || 0)).round(2).toFixed(2)}\r\n            </Typography>\r\n        </ListItemSecondaryAction>\r\n*/","export default function (value, documento) {\r\n    if (!value) value = \"\";\r\n    documento = +documento;\r\n    if (documento === 3) { return; }\r\n    if (documento === 1) {\r\n        if (value.length !== 13) return \"Número de RUC debe tener 13 digitos\";\r\n        if (value.length === 13 && value === \"9999999999999\") return;\r\n    }\r\n    if (documento === 2) {\r\n        if (value.length !== 10) return \"Número de Cedula debe tener 10 digitos\";\r\n    }\r\n    return validadorCedulaRuc(value, false);\r\n}\r\nfunction validadorCedulaRuc(numero, vacioEstaBien, exito, error) {\r\n    var mensaje = '';\r\n    var esValido = false;\r\n    if (vacioEstaBien && isEmptyOrNull(numero)) {\r\n        mensaje = '';\r\n        esValido = true;\r\n    } else {\r\n        if (isNumber(numero)) {\r\n\r\n            if (numero.length < 10) {\r\n                mensaje = \"El numero de Cedula debe tener 10 dígitos\";\r\n            } else if (numero.length > 10 && numero.length < 13) {\r\n                mensaje = \"El numero de RUC debe tener 13 dígitos\";\r\n            } else if (numero.length > 13) {\r\n                mensaje = \"El numero tiene más de 13 dígitos\";\r\n            }\r\n\r\n\r\n            var suma = 0;\r\n            var residuo = 0;\r\n            var pri = false;\r\n            var pub = false;\r\n            var nat = false;\r\n            var numeroProvincias = 22;\r\n            var modulo = 11;\r\n\r\n            /* Verifico que el campo no contenga letras */\r\n            var ok = 1;\r\n            /*for (i=0; i numeroProvincias){\r\n            mensaje = 'El código de la provincia (dos primeros dígitos) es inválido'); esValido = fals;\r\n        } */\r\n\r\n            /* Aqui almacenamos los digitos de la cedula en variables. */\r\n            const d1 = numero.substr(0, 1);\r\n            const d2 = numero.substr(1, 1);\r\n            const d3 = numero.substr(2, 1);\r\n            const d4 = numero.substr(3, 1);\r\n            const d5 = numero.substr(4, 1);\r\n            const d6 = numero.substr(5, 1);\r\n            const d7 = numero.substr(6, 1);\r\n            const d8 = numero.substr(7, 1);\r\n            const d9 = numero.substr(8, 1);\r\n            const d10 = numero.substr(9, 1);\r\n            if (!isDigit(d1)) mensaje = \"El digito 1 no es un número\";\r\n            if (!isDigit(d2)) mensaje = \"El digito 2 no es un número\";\r\n            if (!isDigit(d3)) mensaje = \"El digito 3 no es un número\";\r\n            if (!isDigit(d4)) mensaje = \"El digito 4 no es un número\";\r\n            if (!isDigit(d5)) mensaje = \"El digito 5 no es un número\";\r\n            if (!isDigit(d6)) mensaje = \"El digito 6 no es un número\";\r\n            if (!isDigit(d7)) mensaje = \"El digito 7 no es un número\";\r\n            if (!isDigit(d8)) mensaje = \"El digito 8 no es un número\";\r\n            if (!isDigit(d9)) mensaje = \"El digito 9 no es un número\";\r\n            if (!isDigit(d10)) mensaje = \"El digito 10 no es un número\";\r\n\r\n            if (numero.length > 10) {\r\n                const d11 = numero.substr(10, 1);\r\n                const d12 = numero.substr(10, 1);\r\n                const d13 = numero.substr(10, 1);\r\n                if (d11 && !isDigit(d11)) mensaje = \"El digito 11 no es un número\";\r\n                if (d12 && !isDigit(d12)) mensaje = \"El digito 12 no es un número\";\r\n                if (d13 && !isDigit(d13)) mensaje = \"El digito 13 no es un número\";\r\n            }\r\n\r\n            /* El tercer digito es: */\r\n            /* 9 para sociedades privadas y extranjeros */\r\n            /* 6 para sociedades publicas */\r\n            /* menor que 6 (0,1,2,3,4,5) para personas naturales */\r\n\r\n            let p1;\r\n            let p2;\r\n            let p3;\r\n            let p4;\r\n            let p5;\r\n            let p6;\r\n            let p7;\r\n            let p8;\r\n            let p9;\r\n\r\n            if (d3 == 7 || d3 == 8) {\r\n                mensaje = 'El tercer dígito ingresado es inválido';\r\n                esValido = false;\r\n            }\r\n\r\n            /* Solo para personas naturales (modulo 10) */\r\n            if (d3 < 6) {\r\n                nat = true;\r\n                p1 = d1 * 2; if (p1 >= 10) p1 -= 9;\r\n                p2 = d2 * 1; if (p2 >= 10) p2 -= 9;\r\n                p3 = d3 * 2; if (p3 >= 10) p3 -= 9;\r\n                p4 = d4 * 1; if (p4 >= 10) p4 -= 9;\r\n                p5 = d5 * 2; if (p5 >= 10) p5 -= 9;\r\n                p6 = d6 * 1; if (p6 >= 10) p6 -= 9;\r\n                p7 = d7 * 2; if (p7 >= 10) p7 -= 9;\r\n                p8 = d8 * 1; if (p8 >= 10) p8 -= 9;\r\n                p9 = d9 * 2; if (p9 >= 10) p9 -= 9;\r\n                modulo = 10;\r\n            }\r\n\r\n            /* Solo para sociedades publicas (modulo 11) */\r\n            /* Aqui el digito verficador esta en la posicion 9, en las otras 2 en la pos. 10 */\r\n            else if (d3 == 6) {\r\n                pub = true;\r\n                p1 = d1 * 3;\r\n                p2 = d2 * 2;\r\n                p3 = d3 * 7;\r\n                p4 = d4 * 6;\r\n                p5 = d5 * 5;\r\n                p6 = d6 * 4;\r\n                p7 = d7 * 3;\r\n                p8 = d8 * 2;\r\n                p9 = 0;\r\n            }\r\n\r\n            /* Solo para entidades privadas (modulo 11) */\r\n            else if (d3 == 9) {\r\n                pri = true;\r\n                p1 = d1 * 4;\r\n                p2 = d2 * 3;\r\n                p3 = d3 * 2;\r\n                p4 = d4 * 7;\r\n                p5 = d5 * 6;\r\n                p6 = d6 * 5;\r\n                p7 = d7 * 4;\r\n                p8 = d8 * 3;\r\n                p9 = d9 * 2;\r\n            }\r\n\r\n            suma = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;\r\n            residuo = suma % modulo;\r\n\r\n            /* Si residuo=0, dig.ver.=0, caso contrario 10 - residuo*/\r\n            const digitoVerificador = residuo == 0 ? 0 : modulo - residuo;\r\n\r\n            /* ahora comparamos el elemento de la posicion 10 con el dig. ver.*/\r\n            if (pub == true) {\r\n                if (digitoVerificador != d9) {\r\n                    mensaje = 'El ruc de la empresa del sector público es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                /* El ruc de las empresas del sector publico terminan con 0001*/\r\n                if (numero.substr(9, 4) != '0001') {\r\n                    mensaje = 'El ruc de la empresa del sector público debe terminar con 0001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n            else if (pri == true) {\r\n                if (digitoVerificador != d10) {\r\n                    mensaje = 'El ruc de la empresa del sector privado es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                if (numero.substr(10, 3) != '001') {\r\n                    mensaje = 'El ruc de la empresa del sector privado debe terminar con 001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n\r\n            else if (nat == true) {\r\n                if (digitoVerificador != d10) {\r\n                    mensaje = 'El número de cédula de la persona natural es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                if (numero.length > 10 && numero.substr(10, 3) != '001') {\r\n                    mensaje = 'El ruc de la persona natural debe terminar con 001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n            esValido = true;\r\n\r\n        } else {\r\n            mensaje = 'Este campo solo admite numeros';\r\n        }\r\n    }\r\n\r\n    if (esValido && mensaje == '') {\r\n        if (exito) { exito(); }\r\n        return \"\";\r\n    } else {\r\n        if (mensaje == '') {\r\n            mensaje = 'La cantidad de digitos no corresponde a Cedula o RUC'\r\n        }\r\n        if (error) { error(mensaje); }\r\n        return mensaje;\r\n    }\r\n}\r\nexport function isDigit(char) { return char >= \"0\" && char <= \"9\"; }\r\nfunction isNumber(obj) { return !isNaN(parseFloat(obj)) }\r\nfunction isEmptyOrNull(obj) {\r\n    if (obj === '' || obj == undefined || obj == null || obj == 'undefined') {\r\n        return true\r\n    } else {\r\n        return false;\r\n    }\r\n}","import { isDigit } from \"./ValidarIdentificacion\";\r\n\r\nconst ValidateInput = {\r\n    tel(value) {\r\n        if (!value) return;\r\n        if (value.length < 7) return \"El número de telefono debe tener al menos 7 digitos\";\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (!(value[i] === \"+\" || isDigit(value[i]) || value[i].trim() === \"\")) {\r\n                return \"El número debe tener uno de estos formatos: '09123456789' o '+5931234567890'\";\r\n            }\r\n        }\r\n    },\r\n    email(value) {\r\n        if (!value) return;\r\n        if (value.length < 5) return \"El email no está escrito correctamente\";\r\n        let twoParts = value.split(\"@\");\r\n        if (twoParts.length !== 2) return \"El email no está escrito correctamente\";\r\n        if (!(twoParts[1].indexOf(\".\") >= 0)) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\" \") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\t\") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\r\") >= 0) return \"El email no está escrito correctamente\";\r\n    }\r\n}\r\nexport default ValidateInput;","import React from \"react\";\r\nimport { Dialog, DialogContent, TextField, Button, DialogActions, withStyles } from \"@material-ui/core\";\r\nimport ValidarIdentificacion from \"../Services/ValidarIdentificacion\";\r\nimport ValidateInput from \"../Services/ValidateInput\";\r\nimport * as prefs from \"../Services/Preferences\";\r\n\r\nconst style = {\r\n    textField: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    },\r\n    content: {\r\n        paddingTop: 10,\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        paddingBottom: 0\r\n    }\r\n};\r\n\r\nclass InvoiceData extends React.PureComponent {\r\n    state = {\r\n        documento: 1,\r\n        identificacion: \"\",\r\n        razonSocial: \"\",\r\n        telefono: \"\",\r\n        direccion: \"\",\r\n        email: \"\"\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.data) {\r\n            for (const key in props.data) {\r\n                if (props.data.hasOwnProperty(key)) {\r\n                    this.state[key] = props.data[key];\r\n                }\r\n            }\r\n        } else {\r\n            var stored_data = prefs.Get(\"invoiceData\");\r\n            if (stored_data) {\r\n                for (const key in stored_data) {\r\n                    if (stored_data.hasOwnProperty(key)) {\r\n                        this.state[key] = stored_data[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleExit = this.handleExit.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.target;\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n    handleExit() {\r\n        const { match, history } = this.props;\r\n        const new_path = match.path.substr(0, match.path.indexOf(\"/invoice-data\"));\r\n        history.push(new_path);\r\n    }\r\n    handleDone(event) {\r\n        event.preventDefault();\r\n        const msg = validateMsg(this.state);\r\n        if (msg) {\r\n            alert(msg);\r\n        } else {\r\n            if (this.props.onDone)\r\n                this.props.onDone(this.state);\r\n            this.handleExit();\r\n            prefs.Set(\"invoiceData\", this.state);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const cedula_err = this.state.identificacion\r\n            ? ValidarIdentificacion(this.state.identificacion, this.state.documento)\r\n            : \"\";\r\n        const cedula_props = {};\r\n        if (cedula_err) {\r\n            cedula_props.error = true;\r\n            cedula_props.helperText = cedula_err;\r\n        }\r\n        const rs_err = (this.state.identificacion && !(this.state.razonSocial || \"\").trim())\r\n            ? \"Esta campo no puede estar vacío\"\r\n            : \"\";\r\n        const tel_props = {};\r\n        const tel_err = ValidateInput.tel(this.state.telefono)\r\n        if (tel_err) {\r\n            tel_props.error = true;\r\n            tel_props.helperText = tel_err;\r\n        }\r\n        const email_props = {};\r\n        const email_err = ValidateInput.email(this.state.email)\r\n        if (email_err) {\r\n            email_props.error = true;\r\n            email_props.helperText = email_err;\r\n        }\r\n\r\n        const hay_errores = cedula_err || rs_err || tel_err || email_err;\r\n\r\n        return (<Dialog open={true} >\r\n            <form onSubmit={this.handleDone}>\r\n                <DialogContent style={style.content}>\r\n                    <TextField value={this.state.documento}\r\n                        name=\"documento\"\r\n                        onChange={this.handleChange}\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        fullWidth\r\n                        label=\"Documento\"\r\n                        style={style.textField}\r\n                    >\r\n                        <option value={1}>RUC</option>\r\n                        <option value={2}>Cedula</option>\r\n                        <option value={3}>Pasaporte</option>\r\n                    </TextField>\r\n\r\n                    <TextField name=\"identificacion\"\r\n                        inputProps={{ maxLength: 20 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"# de Identificacion\"\r\n                        value={this.state.identificacion || \"\"}\r\n                        style={style.textField}\r\n                        fullWidth\r\n\r\n                        {...cedula_props}\r\n                    />\r\n\r\n                    <TextField name=\"razonSocial\"\r\n                        inputProps={{ maxLength: 200 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Razon Social\"\r\n                        value={this.state.razonSocial || \"\"}\r\n                        style={style.textField}\r\n                        fullWidth\r\n                    />\r\n\r\n                    <TextField name=\"telefono\"\r\n                        inputProps={{ maxLength: 50 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono\"\r\n                        value={this.state.telefono || \"\"}\r\n                        style={style.textField}\r\n                        fullWidth\r\n                        {...tel_props}\r\n                    />\r\n\r\n                    <TextField name=\"direccion\"\r\n                        inputProps={{ maxLength: 300 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Direccion\"\r\n                        value={this.state.direccion || \"\"}\r\n                        multiline\r\n                        rows={2}\r\n                        style={style.textField}\r\n                        fullWidth\r\n                    />\r\n\r\n                    <TextField name=\"email\"\r\n                        inputProps={{ maxLength: 150 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Email\"\r\n                        value={this.state.email || \"\"}\r\n                        style={style.textField}\r\n                        fullWidth\r\n                        {...email_props}\r\n                    />\r\n\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"button\" onClick={this.handleExit} color=\"secondary\" variant=\"outlined\">\r\n                        SALIR\r\n                </Button>\r\n                    <Button disabled={hay_errores} type=\"submit\" color=\"primary\" variant=\"outlined\">\r\n                        AGREGAR\r\n                </Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n}\r\n\r\nfunction validateMsg(state) {\r\n    const { documento, identificacion, razonSocial, telefono, direccion, email } = state;\r\n    let a = identificacion || \"\";\r\n    let b = razonSocial || \"\";\r\n    let c = telefono || \"\";\r\n    let d = direccion || \"\";\r\n    let e = email || \"\";\r\n    let msg = \"\";\r\n    if (a.length || b.length || c.length || d.length || e.length) {\r\n        if (!a.length) return \"Agregue el numero de identificacion\";\r\n        if (!b.length) return \"Agregue la Razon Social\";\r\n        msg = ValidarIdentificacion(identificacion, documento);\r\n        if (msg) return msg;\r\n        msg = c && ValidateInput.tel(c);\r\n        if (msg) return msg;\r\n        msg = e && ValidateInput.email(e);\r\n        if (msg) return msg;\r\n    }\r\n}\r\n\r\nexport default withStyles(theme => ({\r\n    paper: {\r\n        maxHeight: \"calc(100% - 30px)\",\r\n        marginTop: 15,\r\n        marginBottom: 15\r\n    }\r\n}))(InvoiceData);","var GeoCoder;\r\n\r\nexport default class {\r\n    static currentPosition() {\r\n        return new Promise((resolve, reject) => {\r\n            console.info(\"obteniendo posicion actual con navigator.geolocation.getCurrentPosition\");\r\n            if (!navigator.geolocation) {\r\n                console.info(\"navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()\");\r\n                return PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            navigator.geolocation.getCurrentPosition(geoLocation => {\r\n                console.info(\"navigator.geolocation.getCurrentPosition ha obtenido la posicion\");\r\n                resolve({\r\n                    lat: geoLocation.coords.latitude,\r\n                    lng: geoLocation.coords.longitude\r\n                }, true);\r\n            }, () => {\r\n                console.info(\"navigator.geolocation.getCurrentPosition falló, intentando con PositionByIP()\");\r\n                PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            );\r\n        });\r\n    }\r\n    static CanUseGPS() {\r\n        return new Promise((resolve, reject) => {\r\n            if (!navigator.geolocation) return reject();\r\n            navigator.geolocation.getCurrentPosition(resolve, reject);\r\n        });\r\n    }\r\n    static PlaceFromCoords(location, bounds) {\r\n        if (!GeoCoder) GeoCoder = new window.google.maps.Geocoder();\r\n        return new Promise((resolve, reject) => {\r\n            GeoCoder.geocode({ location, bounds: bounds || this.QUITO_BOUNDS }, (results, status) => {\r\n                if (status === \"ZERO_RESULTS\") {\r\n                    return reject({ status, message: \"No se encontraron resultados\" });\r\n                }\r\n                const first = results.length && results[0];\r\n                if (!first) return reject({ message: \"No se encontraron resultados\" });\r\n                first.inputText = AddressText(first);\r\n                resolve(first);\r\n            });\r\n        })\r\n    }\r\n    static CoordsFromPlace(address, bounds) {\r\n        if (!GeoCoder) GeoCoder = new window.google.maps.Geocoder();\r\n        return new Promise((resolve, reject) => {\r\n            GeoCoder.geocode({ address, bounds: bounds || this.QUITO_BOUNDS }, (results, status) => {\r\n                if (status === \"ZERO_RESULTS\") {\r\n                    return reject({ status, message: \"No se encontraron resultados\" });\r\n                }\r\n                const first = results.length && results[0];\r\n                if (!first) return reject({ message: \"No se encontraron resultados\" });\r\n                resolve(first);\r\n            });\r\n        })\r\n    }\r\n    static QUITO_BOUNDS = {\r\n        west: -78.85300,\r\n        north: -0.04875,\r\n        east: -78.17184,\r\n        south: -0.39207\r\n    }\r\n    static QUITO = {\r\n        lat: -0.189515,\r\n        lng: -78.488167\r\n    }\r\n}\r\n\r\nfunction AddressText(place) {\r\n    var route;\r\n    var street_number;\r\n    for (let i = 0; i < place.address_components.length; i++) {\r\n        const component = place.address_components[i];\r\n        for (let ii = 0; ii < component.types.length; ii++) {\r\n            const type = component.types[ii];\r\n            if (type === \"street_address\") return component.short_name || component.long_name;\r\n            if (component.types.find(x => x === \"street_number\") && component.types.find(x => x === \"route\"))\r\n                return component.short_name || component.long_name;\r\n\r\n            if (type === \"route\" && !route) route = component.short_name || component.long_name;\r\n            if (type === \"street_number\" && !street_number) street_number = component.short_name || component.long_name;\r\n        }\r\n    }\r\n    if (route && street_number) return route + \" \" + street_number;\r\n    return place.formatted_address;\r\n}\r\nfunction PositionByIP() {\r\n    return fetch(\"https://ipapi.co/json/\").then(x => x.json())\r\n        .then(info => ({ lat: info.latitude, lng: info.longitude }));\r\n}","import React from \"react\";\r\nimport { TextField, Typography, Button } from \"@material-ui/core\";\r\nimport { Route } from \"react-router-dom\";\r\nimport InvoiceData from \"./InvoiceData\";\r\nimport ValidateInput from \"../Services/ValidateInput\";\r\nimport ValidarIdentificacion from \"../Services/ValidarIdentificacion\";\r\n\r\nconst style = {\r\n    root: { padding: \"20px 10px\", flex: 1 },\r\n    textFiel: { marginTop: 10, marginBottom: 10 }\r\n}\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        telefono_error: \"\",\r\n        email_error: \"\"\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepIndex);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleClick(event) {\r\n        const { value } = event.currentTarget;\r\n        if (value) {\r\n            this.props.history.push(this.props.match.path + \"/invoice-data\");\r\n        } else {\r\n            this.props.onInvoiceDataChange(null);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { props } = this;\r\n\r\n        const telefono_error = ValidateInput.tel(props.data.telefono);\r\n        let telefono_props = {};\r\n        if (telefono_error) {\r\n            telefono_props.error = true;\r\n            telefono_props.helperText = telefono_error;\r\n        }\r\n        const email_error = ValidateInput.email(props.data.email);\r\n        let email_props = {};\r\n        if (email_error) {\r\n            email_props.error = true;\r\n            email_props.helperText = email_error;\r\n        }\r\n        const cedula_err = props.data.identificacion\r\n            ? ValidarIdentificacion(props.data.identificacion, props.data.documento)\r\n            : \"\";\r\n        const cedula_props = {};\r\n        if (cedula_err) {\r\n            cedula_props.error = true;\r\n            cedula_props.helperText = cedula_err;\r\n        }\r\n\r\n        return (<div style={style.root}>\r\n            {props.requireContactCedula &&\r\n                (<React.Fragment>\r\n                    <TextField\r\n                        autoFocus={true}\r\n                        label=\"Documento\"\r\n                        fullWidth\r\n                        style={style.textField}\r\n                        name=\"contactData.documento\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        value={props.data.documento || 1}\r\n                        onChange={props.onInputChange}\r\n                    >\r\n                        <option value={1}>RUC</option>\r\n                        <option value={2}>Cedula</option>\r\n                        <option value={3}>Pasaporte</option>\r\n                    </TextField>\r\n                    <TextField\r\n                        inputProps={{ maxLength: 20 }}\r\n                        label=\"# Identificación*\"\r\n                        fullWidth\r\n                        inputProps={{ maxLength: 300 }}\r\n                        style={style.textField}\r\n                        name=\"contactData.identificacion\"\r\n                        value={props.data.identificacion || \"\"}\r\n                        onChange={props.onInputChange}\r\n                        {...cedula_props}\r\n                    />\r\n                </React.Fragment>)}\r\n            <TextField\r\n                autoFocus={props.requireContactCedula ? false : true}\r\n                label=\"Nombre (Nombres y Apellidos)*\"\r\n                fullWidth\r\n                inputProps={{ maxLength: 300 }}\r\n                style={style.textField}\r\n                name=\"contactData.nombre\"\r\n                value={props.data.nombre}\r\n                onChange={props.onInputChange}\r\n            />\r\n            <TextField\r\n                label=\"Telefono*\"\r\n                fullWidth\r\n                inputProps={{ maxLength: 50, type: \"phone\" }}\r\n                style={style.textField}\r\n                name=\"contactData.telefono\"\r\n                value={props.data.telefono}\r\n                onChange={props.onInputChange}\r\n                {...telefono_props}\r\n            />\r\n            <TextField\r\n                label=\"Email\"\r\n                fullWidth\r\n                inputProps={{ maxLength: 150, type: \"email\" }}\r\n                style={style.textField}\r\n                name=\"contactData.email\"\r\n                value={props.data.email}\r\n                onChange={props.onInputChange}\r\n                {...email_props}\r\n            />\r\n\r\n            <Typography variant=\"h6\" style={{ marginTop: 10, marginBottom: 10 }} >Datos de Facturación</Typography>\r\n            <div style={{ width: \"95%\", marginBottom: 10, textAlign: \"center\", display: \"flex\", flexDirection: \"row\" }}>\r\n                <Button variant={props.invoiceData ? \"outlined\" : \"contained\"} color={props.invoiceData ? \"default\" : \"primary\"}\r\n                    onClick={this.handleClick} value=\"\" style={{ flex: 1, marginRight: 10 }} >\r\n                    CONSUMIDOR FINAL\r\n                </Button>\r\n                <Button variant={props.invoiceData ? \"contained\" : \"outlined\"} color={props.invoiceData ? \"primary\" : \"default\"}\r\n                    size=\"small\" value=\"1\" style={{ flex: 1, marginLeft: 10 }} onClick={this.handleClick}>\r\n                    {(props.invoiceData && props.invoiceData.razonSocial) || \"Agregar Datos\"}\r\n                </Button>\r\n            </div>\r\n            <Route path={`${props.match.path}/invoice-data`}\r\n                render={r_props => <InvoiceData {...r_props} data={props.invoiceData} onDone={props.onInvoiceDataChange} />}\r\n            />\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport { TextField, InputAdornment, IconButton, Card, CardContent, Typography } from \"@material-ui/core\";\r\nimport { withGoogleMap, GoogleMap, withScriptjs } from \"react-google-maps\";\r\nimport { MarkerWithLabel } from \"react-google-maps/lib/components/addons/MarkerWithLabel\";\r\nimport { GpsFixed, GpsOff } from \"@material-ui/icons\";\r\nimport Geo from \"../Services/Geo\";\r\nimport * as prefs from \"../Services/Preferences\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        zoom: 15,\r\n        initial_position: undefined,\r\n        initial_gps_enabled: undefined\r\n    }\r\n    /** objeto Autocomplete | referencia del textbox */\r\n    autocompleteRef;\r\n    /** objeto Google Maps | referencia del Mapa */\r\n    mapRef;\r\n    /** div que representa el Marker estatico */\r\n    virtualMarker;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.placeChanged = this.placeChanged.bind(this);\r\n        this.handleLocationClick = this.handleLocationClick.bind(this);\r\n        this.handleInput = this.handleInput.bind(this);\r\n\r\n        this.handleMapMounted = this.handleMapMounted.bind(this);\r\n        this.handleDragEnd = this.handleDragEnd.bind(this);\r\n        this.handleDragStart = this.handleDragStart.bind(this);\r\n        this.handleCenterChanged = this.handleCenterChanged.bind(this);\r\n\r\n        this.positionChanged = this.positionChanged.bind(this);\r\n        this.valueChanged = this.valueChanged.bind(this);\r\n\r\n        console.info(\"Location comienza con direccion\", props.data);\r\n        var direccion = prefs.Get(\"direccion\");\r\n        if (direccion && !props.data.position) {\r\n            console.info(\"Se reemplaza por la direccion en PREFS\");\r\n            props.onDataChange(props.prop, direccion);\r\n            this.state.zoom = 17;\r\n            this.state.initial_position = direccion;\r\n        }\r\n        if (props.data.position) {\r\n            this.state.zoom = 17;\r\n            this.state.initial_position = props.data.position;\r\n        }\r\n        this.state.initial_gps_enabled = props.data && props.data.gps_enabled;\r\n    }\r\n    componentDidMount() {\r\n        if (this.state.initial_position) {\r\n            if (this.state.initial_gps_enabled === undefined ||\r\n                this.state.initial_gps_enabled === null) {\r\n                console.info(\"Se verifica si el GPS se puede usar\");\r\n                Geo.CanUseGPS()\r\n                    .then(() => this.valueChanged(\"gps_enabled\", true))\r\n                    .catch(() => this.valueChanged(\"gps_enabled\", false));\r\n            }\r\n        } else {\r\n            // pongo la posicion actual POR DEFAULT\r\n            console.info(\"No se encuentra la posicion, asi que se busca por GPS/HTTP\");\r\n            Geo.currentPosition()\r\n                .then((center) => {\r\n                    console.info(\"Posicion por GPS/HTTP encontrada\");\r\n                    this.positionChanged(center, false);\r\n                    this.valueChanged(\"gps_enabled\", true);\r\n                    this.setState({ zoom: 17 });\r\n                }).catch(_ => {\r\n                    console.info(\"Posicion por GPS/HTTP no encontrada\");\r\n                    this.setState({ loading: false });\r\n                    this.valueChanged(\"gps_enabled\", false);\r\n                });\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        if (this.autocomplete)\r\n            this.autocomplete.unbindAll();\r\n    }\r\n    valueChanged(key, value) {\r\n        const data = { ...this.props.data };\r\n        data[key] = value;\r\n        this.props.onDataChange(this.props.prop, data);\r\n    }\r\n\r\n    positionChanged(position, avoid_update_zoom) {\r\n        if (!avoid_update_zoom && this.mapRef && this.mapRef.getZoom() < 17) {\r\n            this.setState({ zoom: 17 });\r\n        }\r\n        this.valueChanged(\"position\", position);\r\n    }\r\n    handleInput(event) {\r\n        const { value, name } = event.currentTarget;\r\n        this.valueChanged(name, value);\r\n    }\r\n\r\n    handleCenterChanged() {\r\n        this.positionChanged(this.mapRef && this.mapRef.getCenter().toJSON());\r\n    }\r\n    // cuando encuentra una direccion, o aplasta ENTER\r\n    placeChanged() {\r\n        const place = this.autocomplete.getPlace();\r\n        // un texto y ya. Busco lo mas cercano\r\n        if (!place.geometry)\r\n            return Geo.CoordsFromPlace(place.name)\r\n                .then(place => this.positionChanged(place.geometry.location));\r\n\r\n        this.positionChanged(place.geometry.location);\r\n        this.valueChanged(\"direccion\", this.autocompleteRef.value);\r\n    }\r\n    handleLocationClick() {\r\n        Geo.currentPosition()\r\n            .then(location => {\r\n                this.positionChanged(location);\r\n                Geo.PlaceFromCoords(this.props.data.position)\r\n                    .then(place => this.valueChanged(\"direccion\", place.inputText));\r\n            }).catch(ex => {\r\n                alert(\"No pudimos obtener tu ubicacion\");\r\n                console.warn(\"handleLocationClick\", ex);\r\n            });\r\n    }\r\n\r\n    handleDragStart() {\r\n        this.virtualMarker.classList.add(\"on-move\");\r\n    }\r\n    handleDragEnd() {\r\n        this.positionChanged(this.mapRef.getCenter().toJSON(), true);\r\n        Geo.PlaceFromCoords(this.mapRef.getCenter())\r\n            .then(d => this.valueChanged(\"direccion\", d.inputText))\r\n            .catch(ex => console.warn(\"PlaceFromCoords ERROR\", ex));\r\n        this.virtualMarker.classList.remove(\"on-move\");\r\n    }\r\n\r\n    handleMapMounted(map) {\r\n        this.mapRef = map;\r\n        if (!this.mapRef) return;\r\n        this.virtualMarker = document.createElement(\"div\");\r\n        this.virtualMarker.className = \"centerMarker\";\r\n        map.getDiv().appendChild(this.virtualMarker);\r\n        this.mountAutocomplete();\r\n    }\r\n    mountAutocomplete() {\r\n        if (!(this.mapRef && this.autocompleteRef)) return;\r\n        if (this.autocomplete) return;\r\n        // cuando se ubica la ubicacion geoLocation pero no se ha actualizado\r\n        // la direccion en el CUADRO DE TEXTO\r\n        if (this.props.data.position && !this.props.data.direccion) {\r\n            Geo.PlaceFromCoords(this.props.data.position)\r\n                .then(place => this.valueChanged(\"direccion\", place.inputText));\r\n        }\r\n        this.autocomplete = new window.google.maps.places.Autocomplete(this.autocompleteRef);\r\n        this.autocomplete.bindTo('bounds', this.mapRef);\r\n        this.autocomplete.addListener(\"place_changed\", this.placeChanged);\r\n        this.autocomplete.setOptions({ strictBounds: true });\r\n    }\r\n\r\n    render() {\r\n        const { data, store } = this.props;\r\n        const { zoom } = this.state;\r\n        return (<div style={{ overflow: \"auto\", paddingLeft: 10, paddingRight: 10, flex: 1 }}>\r\n            <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                    inputRef={ref => this.autocompleteRef = ref}\r\n                    name=\"direccion\"\r\n                    inputProps={{ maxLength: 200 }}\r\n                    onChange={this.handleInput}\r\n                    value={data.direccion || \"\"}\r\n                    placeholder=\"Ej. Calle 1 y Calle 2\"\r\n                    label=\"Direccion de Entrega*\"\r\n                    fullWidth\r\n                    style={{ marginBottom: 10, marginTop: 5, flex: 1 }}\r\n                    InputProps={{\r\n                        endAdornment: (<InputAdornment position=\"end\" >\r\n                            <IconButton onClick={this.handleLocationClick} disabled={!data.gps_enabled}>\r\n                                {data.gps_enabled ? <GpsFixed /> : <GpsOff />}\r\n                            </IconButton>\r\n                        </InputAdornment>)\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <Map\r\n                googleMapURL={`https://maps.googleapis.com/maps/api/js?key=${store.G_M_K || \"\"}&v=3.exp&libraries=geometry,places,geocode`}\r\n                //googleMapURL=\"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places\"\r\n                containerElement={<div id=\"map-container\" />}\r\n                loadingElement={<div style={{ height: `100%` }} />}\r\n                mapElement={<div style={{ height: `100%` }} />}\r\n                onClick={this.handleMapClick}\r\n                zoom={zoom}\r\n                onZoomChanged={() => this.setState({ zoom: this.mapRef.getZoom() })}\r\n                onMapMounted={this.handleMapMounted}\r\n                center={data.position || store.position}\r\n                onCenterChanged={this.handleCenterChanged}\r\n                onDragStart={this.handleDragStart}\r\n                onDragEnd={this.handleDragEnd}\r\n                marker={{\r\n                    label: \"Tienda\",\r\n                    position: store.position\r\n                }}\r\n            //onBoundsChanged={this.handleBoundsChanged}\r\n            />\r\n\r\n            <TextField\r\n                name=\"referencia\"\r\n                value={data.referencia || \"\"}\r\n                onChange={this.handleInput}\r\n                inputProps={{ maxLength: 200, id: \"referencia\" }}\r\n                label=\"Referencia*\"\r\n                placeholder=\"Ej. Al lado de la panaderia 'El Pan de Cada Dia'\"\r\n                fullWidth\r\n            />\r\n\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst Map = withScriptjs(withGoogleMap(function Map(props) {\r\n    const google = window.google;\r\n    const { marker, onMapMounted, ...mapProps } = props;\r\n    return (<GoogleMap\r\n        {...mapProps}\r\n        ref={onMapMounted}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n    >\r\n        {marker && <MarkerWithLabel\r\n            labelAnchor={new google.maps.Point(0, 0)}\r\n            position={marker.position}\r\n            icon=\"./store.png\"\r\n        >\r\n            <Card elevation={1} color=\"secondary\" style={{ margin: 2 }}>\r\n                <CardContent style={{ maxWidth: 200, padding: 5 }}>\r\n                    <Typography variant=\"button\">{marker.label}</Typography>\r\n                </CardContent>\r\n            </Card>\r\n        </MarkerWithLabel>}\r\n    </GoogleMap>)\r\n}));","import React from \"react\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\n\r\nexport default class Payment extends React.PureComponent {\r\n    render() {\r\n        const { props } = this;\r\n        return (\r\n            <div style={{ flex: 1, textAlign: \"center\" }}>\r\n                <TextField\r\n                    label=\"Selecciona tu método de pago\"\r\n                    select\r\n                    value={props.forma_pago || \"\"}\r\n                    name=\"forma_pago\"\r\n                    onChange={props.onInputChange}\r\n                    variant=\"outlined\"\r\n                    style={{ width: \"95%\", margin: \"auto\", marginBottom: 10, marginTop: 10 }}\r\n                    SelectProps={{ native: true }}\r\n                >\r\n                    {MapFormasPago(props.store.formasPago).map(x => (<option key={x.value} value={x.value} >{x.label}</option>))}\r\n                </TextField>\r\n                {(+props.forma_pago) === 3 ? (<div>\r\n                    {props.store.datosTransferencia && <Typography style={{ textAlign: \"left\", margin: \"10px 20px\" }} variant=\"subtitle1\">{props.store.datosTransferencia}</Typography>}\r\n                    <Typography variant=\"body2\">Realiza tu transferencia y luego ingresa el Numero de Comprobante aqui:</Typography>\r\n                    <TextField\r\n                        label=\"Comprobante de Transacción\"\r\n                        variant=\"outlined\"\r\n                        value={props.numeroTransaccion || \"\"}\r\n                        placeholder=\"Agrega tu # de Comprobante\"\r\n                        name=\"numeroTransaccion\"\r\n                        onChange={props.onInputChange}\r\n                        type=\"phone\"\r\n                        variant=\"outlined\"\r\n                        style={{ width: \"95%\", margin: \"auto\", marginBottom: 10, marginTop: 10 }}\r\n                    />\r\n                </div>) : null}\r\n            </div>)\r\n    }\r\n}\r\n\r\n\r\nfunction MapFormasPago(info) {\r\n    var all = [];\r\n    if (!info) return all;\r\n    if (info.indexOf(1) >= 0) all.push({ label: \"Efectivo\", value: 1 });\r\n    if (info.indexOf(2) >= 0) all.push({ label: \"Tarjeta de Credito/Debito\", value: 2 });\r\n    if (info.indexOf(3) >= 0) all.push({ label: \"Transferencia Bancaria\", value: 3 });\r\n    return all;\r\n}","import React from \"react\";\r\nimport { CheckCircleOutline, Edit } from \"@material-ui/icons\";\r\nimport { Typography, Button, CircularProgress } from \"@material-ui/core\";\r\n\r\n\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        loading: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        // en este caso, al comenzar se guardar inmediatamente.\r\n        if (props.onMounted) props.onMounted(props.stepIndex);\r\n        this.handleReturnToOrder = this.handleReturnToOrder.bind(this);\r\n    }\r\n    handleReturnToOrder() {\r\n        this.props.history.push(\"/1\");\r\n    }\r\n    render() {\r\n        const { loading, error, ...other_props } = this.props;\r\n\r\n        return (<div style={{ textAlign: \"center\", overflow: \"auto\", padding: 10 }}>\r\n            {loading\r\n                ? <Wait />\r\n                : (error\r\n                    ? <ErrrMsg {...error} onClick={this.handleReturnToOrder} />\r\n                    : <IsCompleted {...other_props} />)}\r\n        </div>)\r\n    }\r\n}\r\n\r\nfunction Wait(props) {\r\n    return (<React.Fragment>\r\n        <CircularProgress size={50} />\r\n        <Typography variant=\"h6\">Guardando...</Typography>\r\n    </React.Fragment>);\r\n}\r\nfunction ErrrMsg(props) {\r\n    return (<React.Fragment>\r\n        <Typography variant=\"h6\" color=\"secondary\" >Ocurrió un problema al guardar tu orden. Regresa al pedido, verifica tu información e intentalo nuevamente.</Typography>\r\n\r\n        <Typography variant=\"body1\" color=\"secondary\" >{props.message}</Typography>\r\n        <Typography variant=\"caption\" color=\"secondary\" >{props.code}{props.status && (\" | \" + props.status)}</Typography>\r\n        {props.statusText && <Typography variant=\"body1\" color=\"secondary\" >{props.statusText}</Typography>}\r\n\r\n        <Button onClick={props.onClick} variant=\"outlined\" color=\"primary\" fullWidth style={{ marginTop: 20 }} >\r\n            REGRESAR AL PEDIDO <Edit />\r\n        </Button>\r\n    </React.Fragment>);\r\n}\r\nfunction IsCompleted(props) {\r\n    const ws = CreateWSMessage(props);\r\n    return (<React.Fragment>\r\n        <CheckCircleOutline fontSize=\"large\" style={{ margin: 20 }} />\r\n        <Typography variant=\"h5\">Tu pedido ha sido recibido!</Typography>\r\n        <Typography variant=\"body2\" style={{ maxWidth: 300, margin: \"auto\", textAlign: \"center\" }}>\r\n            Nos comunicaremos contigo para coordinar la entrega de tu pedido.Mantente pendiente a tu telefono.\r\n     </Typography>\r\n        <Button onClick={ev => window.location.replace(window.location.pathname)} style={{ margin: 10 }} variant=\"contained\" color=\"primary\">NUEVO PEDIDO</Button>\r\n        {ws && (<Button target=\"_blank\" style={{ margin: 10 }} variant=\"outlined\" color=\"secondary\" component=\"a\" href={ws}>\r\n            CHATEA CON NOSOTROS\r\n            <img alt=\"Whatsapp\" src=\"./ws.png\" style={{ height: 20, width: 20, marginLeft: 5 }}></img>\r\n        </Button>)}\r\n    </React.Fragment>);\r\n}\r\n\r\nfunction CreateWSMessage(info) {\r\n    const { ws_phone, ws_msg, contactData, orderNumber } = info;\r\n    if (!ws_phone || !ws_msg) return \"\";\r\n    const final_msg = ws_msg\r\n        .replace(/__NAME__/g, (contactData || {}).nombre).\r\n        replace(/__ORDER_NUMBER__/g, orderNumber || \"\");\r\n    return \"whatsapp://send?\" +\r\n        (`phone=${ws_phone}&`) +\r\n        `text=${encodeURIComponent(final_msg)}`;\r\n\r\n}","import React from \"react\";\r\n\r\nexport default function (Component, step) {\r\n    return class extends React.Component {\r\n        state = {\r\n            render: true\r\n        }\r\n        constructor(props) {\r\n            super(props);\r\n            props.onMount(step);\r\n        }\r\n        render() {\r\n            if (!this.state.render) return null;\r\n            return <Component stepIndex={step} {...this.props} />\r\n        }\r\n    }\r\n}\r\n","import ValidateInput from './ValidateInput';\r\nimport ValidarIdentificacion from './ValidarIdentificacion';\r\n\r\nexport function VerifyStep(step, state) {\r\n    // ubicacion\r\n    if (step === 0) {\r\n        const x = state.direccion;\r\n        if (!x.position) return \"Confirme su ubicación en el mapa.\";\r\n        if (!x.direccion) return \"Digite su dirección.\";\r\n        if (!x.referencia) {\r\n            Focus(\"referencia\");\r\n            return \"Agregue la referencia de la dirección de entrega.\";\r\n        };\r\n    }\r\n\r\n    // elegir productos\r\n    if (step === 1 || step === 2) {\r\n        if (!state.items.length)\r\n            return \"Para continuar seleccione al menos un producto\";\r\n    }\r\n\r\n    if (step === 2 && state.store.estado !== \"ACTIVO\" && !state.envio_programado)\r\n        return \"Debido a que la tienda no esta disponible en este momento, necesitas programar una fecha de entrega\";\r\n\r\n\r\n    if (step === 3 && state.contactData) {\r\n        const x = state.contactData;\r\n        if (!x.nombre) return \"Agregue un nombre de contacto\";\r\n        if (!x.telefono) return \"Agregue un telefono de contacto\";\r\n        if (state.store.requireContactCedula) {\r\n            if (!x.identificacion) return \"Agregue el número de identificación de contacto\";\r\n            msg = ValidarIdentificacion(x.identificacion, x.documento);\r\n            if (msg) return msg;\r\n        }\r\n        let msg = ValidateInput.tel(x.telefono);\r\n        if (msg) return msg;\r\n        msg = ValidateInput.email(x.email);\r\n        if (msg) return msg;\r\n    }\r\n\r\n    if (step === 4) {\r\n        if (!state.forma_pago) {\r\n            return \"Seleccione su método de pago\";\r\n        }\r\n        if ((+state.forma_pago) === 3 && !state.numeroTransaccion) {\r\n            return \"Agregue el número de Comprobante\";\r\n        }\r\n    }\r\n\r\n    return;\r\n}\r\nfunction Focus(ID) {\r\n    window.requestAnimationFrame(() => {\r\n        try {\r\n            document.getElementById(\"referencia\").focus();\r\n        } catch (ex) { }\r\n    })\r\n}","import React from 'react';\r\nimport { Button } from '@material-ui/core';\r\nimport { ArrowBack } from '@material-ui/icons';\r\n\r\nexport default function (props) {\r\n    return (<div style={{ width: \"calc(100% - 20px)\", display: \"flex\", flexDirection: \"row\", textAlign: \"center\", margin: 10, minHeight: 40 }}>\r\n        {props.activeStep === 0\r\n            ? null\r\n            : <Button\r\n                onClick={props.onBackClick}\r\n                title=\"Regresar\"\r\n                color=\"secondary\"\r\n                variant=\"outlined\"\r\n            >\r\n                <ArrowBack />\r\n            </Button>}\r\n        <Button\r\n            onClick={props.onNextClick}\r\n            disabled={props.disabled}\r\n            color=\"primary\"\r\n            type=\"button\"\r\n            variant=\"outlined\"\r\n            style={{ flex: 1 }}\r\n            size=\"large\">\r\n            CONTINUAR\r\n  </Button>\r\n    </div>)\r\n}","import React from 'react';\nimport { Paper, Stepper, Step, StepLabel, Button, CircularProgress, Typography } from '@material-ui/core';\nimport { Switch, Route, withRouter, HashRouter, Redirect, Prompt } from \"react-router-dom\";\nimport {\n  ReceiptOutlined, PlaceOutlined, PersonOutlined, AddShoppingCartOutlined,\n  Receipt, Place, Person, ShoppingCart, MonetizationOn, MonetizationOnOutlined\n} from '@material-ui/icons';\n\nimport API from \"./Services/API\";\nimport * as prefs from \"./Services/Preferences\";\nimport State from \"./App.state\";\n\nimport A from './Components/TakeOrder';\nimport B from './Components/ConfirmOrder';\nimport C from './Components/ContactData';\nimport D from './Components/Location';\nimport E from './Components/Payment';\nimport F from './Components/Done';\nimport WithValidate from './HOCs/WithValidate';\nimport { VerifyStep } from \"./Services/StepValidations\";\nimport NavigationButtons from \"./Components/Layouts/NavigationButtons\";\n\nconst Location = WithValidate(D, 0);\nconst TakeOrder = WithValidate(A, 1);\nconst ConfirmOrder = WithValidate(B, 2);\nconst ContactData = WithValidate(C, 3);\nconst Payment = WithValidate(E, 4);\nconst Done = WithValidate(F, 5);\n\nconst STEPS = [\n  { t: \"Ingresa tu ubicación\", resumido: \"Ubicación\", icon: PlaceOutlined, currentIcon: Place },\n  { t: \"Elige tus productos\", resumido: \"Elige\", icon: AddShoppingCartOutlined, currentIcon: ShoppingCart },\n  { t: \"Confirma tu pedido\", resumido: \"Confirma\", icon: ReceiptOutlined, currentIcon: Receipt },\n  { t: \"Datos de Contacto\", resumido: \"Contacto\", icon: PersonOutlined, currentIcon: Person },\n  { t: \"Método de Pago\", resumido: \"Pago\", icon: MonetizationOnOutlined, currentIcon: MonetizationOn },\n];\n\nconst App = withRouter(class extends React.Component {\n  state = new State();\n  constructor(props) {\n    super(props);\n    this.handleItemChange = this.handleItemChange.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleInvoiceDataChange = this.handleInvoiceDataChange.bind(this);\n\n    this.handleMount = this.handleMount.bind(this);\n    this.handleNext = this.handleNext.bind(this);\n    this.handleBack = this.handleBack.bind(this);\n\n    this.handleDataChange = this.handleDataChange.bind(this);\n    if (prefs.Get(\"contactData\")) {\n      this.state.contactData = prefs.Get(\"contactData\");\n    }\n\n    this.state.store = props.store;\n    // la direccion viene pre-cargada!\n    if (props.direccion) {\n      let msg = VerifyStep(0, { ...this.state, direccion: props.direccion });\n      if (!msg) {\n        this.state.direccion = props.direccion;\n        props.history.push(\"/1\");\n      }\n    }\n  }\n  PROMISE_GUARDAR;\n  handleMount(step) {\n    if (this.state.orderNumber && step !== 5) {\n      // CUANDO SE MUEVE EL PEDIDO, POR EJEMPLO HACIA ATRAS, BORRO TODO Y COMIENZO DE 0\n      const state = { ...new State(), loading: false, productList: [...this.state.productList] };\n      state.contactData = prefs.Get(\"contactData\") || {};\n      state.invoiceData = null;\n      state.delivery = null;\n      this.setState(state);\n      this.props.history.push(\"/\" + state.activeStep);\n      return 0;\n    }\n    // verifica que los datos esten completos antes de pasar al siguiente paso\n    var prevstep = step - 1;\n    var goToStep = undefined;\n    if (step >= 0) {\n      while (prevstep >= 0) {\n        let msg = VerifyStep(prevstep, this.state);\n        if (msg) goToStep = prevstep;\n        prevstep--;\n      }\n    }\n    if (goToStep >= 0)\n      return this.props.history.push(\"/\" + goToStep);\n\n    // verifica que los datos asincronicos esten cubiertos antes de pasar el siguiente paso\n    // tambien obtiene la información que este proximo paso necesite\n    if (step > 0) {\n      // mejora en la validacion, pero bueno!\n      if (!this.state.delivery) {\n        console.info(\"No hay costo de envio, verificando la cobertura\");\n        return this.VerificarUbicacion();\n      }\n      if ((step === 1 || step === 2) && !this.state.productList.length) {\n        console.info(\"No hay productos en la lista, obteniendo productos\");\n        return this.LoadProducts();\n      }\n    }\n    if (step === 5) {\n      // cuando se abre el paso 5, la primera accion es GUARDAR todo\n      if (this.state.orderNumber || this.state.loading) return;\n      if (this.PROMISE_GUARDAR) return;\n\n      this.setState({ loading: \"guardar\", errGuardar: null });\n      this.PROMISE_GUARDAR = API.SaveOrder(this.state).then(order => {\n        this.setState({ loading: false, orderNumber: order.numero, errGuardar: null }, () => {\n          this.PROMISE_GUARDAR = null;\n        });\n      }).catch(ex => {\n        this.setState({ loading: false, errGuardar: ex }, () => {\n          this.PROMISE_GUARDAR = null;\n        });\n      });\n\n    }\n    this.setState({ activeStep: step });\n  }\n  handleDataChange(prop, value) {\n    this.setState(prev => {\n      const state = { ...prev };\n      if (prop === \"direccion\") {\n        // cuando la direccion CAMBIA, el objeto delivery se borra\n        var prev_position = state[prop].position;\n        var new_position = value ? value.position : null;\n        // si antes no habia posicion, o ahora tampoco hay, no deberia existir el objeto delivery\n        if (!new_position || !prev_position) {\n          if (state.delivery) {\n            console.info(\"App.State borrando DELIVERY:\", state.delivery);\n          }\n          state.delivery = null;\n        } else {\n          // Si las coordinadas son distintas, deberia borrarse el delivery tambien\n          if (prev_position.lat !== new_position.lat || prev_position.lng !== new_position.lng) {\n            if (state.delivery) {\n              console.info(\"App.State borrando DELIVERY:\", state.delivery);\n            }\n            state.delivery = null;\n          }\n        }\n      }\n      state[prop] = value;\n      return state;\n    });\n  }\n\n  LoadProducts() {\n    if (this.state.productList.length) {\n      console.warn(\"Load Products LOADED MORE THAN ONCE\");\n      return;\n    }\n    this.setState({\n      loading: true,\n      loadingMessage: \"Obteniendo los productos de la tienda...\",\n      error: null\n    });\n    return API.GetProducts().then(products => {\n      let productList = products.map(item => {\n        var pvp_final = 0;\n        if (item.pvp) pvp_final = item.pvp;\n        if (item.pagaIva && this.state.store.porcentajeIVA)\n          pvp_final += (item.pvp * (+this.state.store.porcentajeIVA) / 100);\n        item.pvp_final = pvp_final;\n        return item;\n      });\n      this.setState({\n        productList,\n        loading: null,\n        loadingMessage: null\n      }, () => console.info(\"Se han cargado los productos al estado\"))\n    }).catch(ex => {\n      console.dir(ex);\n      if (ex.status === 404) return this.setState({\n        loading: null, loadingMessage: null, productList: [],\n        error: { message: \"Esta tienda no tiene ningun articulo publicado.\" }\n      });\n      this.setState({\n        loading: null, loadingMessage: null, error: { ...ex }\n      });\n    });\n  }\n  VerificarUbicacion() {\n    const { direccion } = this.state;\n    this.setState({\n      loading: true,\n      loadingMessage: \"Verifcando el área de cobertura. Espera un momento.\",\n      error: null,\n      delivery: null\n    });\n    return API.CheckCoverage(direccion.position)\n      .then(results => {\n        if (results.isCovered) {\n          return this.setState({\n            direccion: { ...direccion },\n            delivery: {\n              status: results.deliveryPriceStatus,\n              valor: results.deliveryPrice,\n              metros: results.distance,\n              segundos: results.duration,\n              info_id: results.info_id\n            },\n            loading: null,\n            loadingMessage: null\n          });\n        }\n        var error;\n        if (results.nearestStore) {\n          setTimeout(() => {\n            API.RedirectTo(results.nearestStore,\n              direccion);\n          }, 100);\n          this.setState({\n            error: {\n              message: \"Estamos dirigiendote a la tienda más cercana a ti.\",\n              action: function () { },\n              btnMessage: \"ESPERA UN MOMENTO\"\n            },\n            loading: null,\n            loadingMessage: null\n          });\n        } else {\n          this.setState({\n            error: {\n              message: \"Esta tienda no está disponible para tu área. Intenta con otra ubicación.\",\n              btnMessage: \"CAMBIAR UBICACIÓN\",\n              action: () => {\n                this.props.history.push(\"/0\");\n                this.setState({ error: null, loading: null, loadingMessage: null });\n              }\n            }\n          });\n        }\n      }).catch(error => this.setState({ error }));\n  }\n\n  handleInputChange(event) {\n    const { name, value } = event.currentTarget;\n    this.setState(prev => {\n      const state = { ...prev };\n      if (name.indexOf(\".\") >= 0) {\n        const levels = name.split(\".\");\n        const key = levels.pop();\n        let reference = state;\n        for (let i = 0; i < levels.length; i++) {\n          reference = reference[levels[i]];\n        }\n        reference[key] = value;\n      } else {\n        state[name] = value;\n      }\n      return state;\n    });\n  }\n  handleItemChange(item) {\n    let PrevItem = this.state.items.find(x => x.id === item.id);\n    if (!PrevItem && item.cantidad) {\n      const items = [...this.state.items];\n      items.push(item);\n      return this.setState({ items });\n    }\n    if (PrevItem) {\n      const items = [...this.state.items];\n      let PrevIndex = items.indexOf(PrevItem);\n      if (item.cantidad) {\n        items[PrevIndex] = item;\n      } else {\n        items.splice(PrevIndex, 1);\n      }\n      this.setState({ items });\n    }\n  }\n  handleInvoiceDataChange(invoiceData) {\n    this.setState({ invoiceData });\n  }\n  handleNext() {\n    const { contactData, direccion, activeStep } = this.state;\n\n    var deniedReason = VerifyStep(activeStep, this.state);\n    if (deniedReason) return alert(deniedReason);\n\n    if (activeStep === 0 && direccion) {\n      const { gps_enabled, ...storable_data } = direccion;\n      prefs.Set(\"direccion\", JSON.stringify(storable_data));\n    }\n    if (activeStep === 3 && contactData)\n      prefs.Set(\"contactData\", JSON.stringify(contactData));\n\n    this.props.history.push(\"/\" + (this.state.activeStep + 1));\n  }\n  handleBack() {\n    this.props.history.push(\"/\" + (this.state.activeStep - 1));\n  }\n\n\n  render() {\n    const {\n      activeStep, productList, loading, loadingMessage, error, store,\n      items, nota,\n      forma_pago, numeroTransaccion,\n      invoiceData, contactData,\n      direccion,\n      errGuardar, orderNumber\n    } = this.state;\n    return (\n      <Paper style={{\n        maxHeight: \"100%\",\n        minHeight: \"100%\",\n        margin: \"auto\",\n        maxWidth: 700,\n        display: \"flex\",\n        flexDirection: \"column\"\n      }} >\n\n        <Stepper className=\"hide-on-min-height\" alternativeLabel activeStep={activeStep}>\n          {STEPS.map((x, i) => generateStep(x, i, activeStep))}\n        </Stepper>\n\n        <Typography variant=\"h6\" className=\"show-on-min-height\" style={{\n          textAlign: \"center\",\n          textTransform: \"uppercase\",\n          background: \"#3f51b5\",\n          paddingTop: 5,\n          paddingBottom: 5,\n          color: \"white\"\n        }}>\n          {(STEPS[activeStep] || {}).t}\n        </Typography>\n\n        <div style={{ flex: 1, overflow: \"hidden\", display: \"flex\", flexDirection: \"column\" }}>\n          {error\n            ? (<div style={{ flex: 1, textAlign: \"center\", padding: 20 }}>\n              <Typography variant=\"h6\" color=\"secondary\">{error.message}</Typography>\n              <Button fullWidth style={{ marginTop: 20, marginBottom: 20 }} onClick={() => { error.action ? error.action() : window.location.reload() }} variant=\"outlined\" color=\"primary\">\n                {error.btnMessage || \"REINTENTAR\"}\n              </Button>\n            </div>)\n            : (loading\n              ? <div style={{ flex: 1, textAlign: \"center\", padding: 20 }}>\n                <CircularProgress size={40} />\n                <Typography color=\"primary\" variant=\"h6\">{loadingMessage}</Typography>\n              </div>\n              : (<React.Fragment>\n                {loading && <Prompt message=\"Hay un proceso en progreso, no deberia salir hasta que se complete. Está seguro de salir?\" />}\n                <Switch>\n                  <Route path=\"/0\" render={props => <Location\n                    {...props}\n                    style={{ flex: 1 }}\n                    store={store}\n                    onDataChange={this.handleDataChange}\n                    onMount={this.handleMount}\n                    data={direccion}\n                    prop={\"direccion\"}\n                  />}\n                  />\n\n\n                  <Route path=\"/1\"\n                    render={props => <TakeOrder\n                      {...props}\n                      style={{ flex: 1 }}\n                      onMount={this.handleMount}\n                      onItemChange={this.handleItemChange}\n                      choosenItems={items}\n                      productList={productList}\n                    />}\n                  />\n\n\n                  <Route path=\"/2\"\n                    render={props => <ConfirmOrder\n                      {...props}\n                      style={{ flex: 1 }}\n                      productList={productList}\n                      delivery={this.state.delivery}\n                      envio_programado={this.state.envio_programado}\n                      onMount={this.handleMount}\n                      onItemChange={this.handleItemChange}\n                      onInputChange={this.handleInputChange}\n                      onDataChange={this.handleDataChange}\n\n                      items={items}\n                      nota={nota}\n                      store={store}\n                    />}\n                  />\n\n                  <Route path=\"/3\"\n                    render={props =>\n                      <ContactData\n                        {...props}\n                        requireContactCedula={store && store.requireContactCedula}\n                        onMount={this.handleMount}\n                        invoiceData={invoiceData}\n                        data={contactData}\n                        onInputChange={this.handleInputChange}\n                        onInvoiceDataChange={this.handleInvoiceDataChange}\n                      />}\n                  />\n\n                  <Route path=\"/4\"\n                    render={props => (<Payment\n                      {...props}\n                      onMount={this.handleMount}\n                      onInputChange={this.handleInputChange}\n                      numeroTransaccion={numeroTransaccion}\n                      forma_pago={forma_pago}\n                      store={store}\n                    />)} />\n\n                  <Route path=\"/5\"\n                    render={props => (<Done\n                      {...props}\n                      ws_msg={store.ws_msg}\n                      ws_phone={store.ws_phone}\n                      contactData={contactData}\n                      orderNumber={orderNumber}\n                      onMount={this.handleMount}\n                      loading={loading}\n                      error={errGuardar}\n                      saved={Boolean(orderNumber)}\n                    />)} />\n\n\n                  <Redirect exact from=\"/\" to=\"/0\"></Redirect>\n                  <Redirect exact from=\"\" to=\"/0\"></Redirect>\n                </Switch>\n\n\n                {STEPS.length > this.state.activeStep && <NavigationButtons\n                  onNextClick={this.handleNext}\n                  onBackClick={this.handleBack}\n                />}\n              </React.Fragment>))}\n        </div>\n      </Paper >\n    );\n  }\n});\n\nfunction generateStep(item, index, current) {\n  let data = {};\n  if (current === index) data = { icon: <item.currentIcon /> };\n  if (index > current) data = { icon: <item.icon /> };\n  return (<Step key={index} >\n    <StepLabel {...data} >{item.resumido}</StepLabel>\n  </Step >)\n}\n\n\nexport default function (props) {\n  return (<HashRouter>\n    <App {...props} />\n  </HashRouter>);\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Home from './Home';\nimport API from \"./Services/API\";\n\nvar PRE_LOADED_DIRECCION;\nif (window.location.search && window.URLSearchParams) {\n    const params = new URLSearchParams(window.location.search);\n    var direccion = params && params.get(\"step1\");\n    try {\n        direccion = atob(direccion) && JSON.parse(atob(direccion));\n    } catch (ex) {\n        direccion = null;\n    }\n    PRE_LOADED_DIRECCION = direccion;\n}\nAPI.GetStoreData()\n    .then(store => {\n        if (store.estado === \"DISPONIBLE\" && PRE_LOADED_DIRECCION) {\n            return LaunchApp({ store, direccion: PRE_LOADED_DIRECCION });\n        }\n        return LaunchHome({ store, direccion: PRE_LOADED_DIRECCION });\n    }).catch(error => {\n        LaunchHome({ error })\n    });\n\n\nfunction LaunchApp(props) {\n    ReactDOM.render(<App {...props} />, document.getElementById('app'));\n}\nfunction LaunchHome(props) {\n    ReactDOM.render(<Home {...props} launch={LaunchApp} />, document.getElementById('app'));\n}\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();","import React from \"react\";\r\nimport { Typography, Button, Divider } from \"@material-ui/core\";\r\nimport { ParseHorarios } from \"./Services/HorarioCalcs\";\r\n// aqui cargo todo lo relacionado a la información inicial antes de comenzar!\r\nexport default class extends React.Component {\r\n    state = {};\r\n    constructor(props) {\r\n        super(props);\r\n        const { store, error } = props;\r\n        if (store) {\r\n            this.state.logoSrc = store.logoSrc;\r\n            this.state.slogan = store.slogan;\r\n            this.state.titulo = store.titulo;\r\n            if (store.estado === \"NO_DISPONIBLE\") {\r\n                this.state.error = \"La tienda no se encuentra disponible por el momento. Intenta nuevamente después.\";\r\n                this.state.horarios_de_atencion = ParseHorarios(store.horarios);\r\n                if (this.state.horarios_de_atencion && this.state.horarios_de_atencion.length) {\r\n                    this.state.infoHeader += \"\\nHorarios de Atención:\";\r\n                }\r\n            } else if (store.estado === \"CERRADO\") {\r\n                this.state.infoHeader = \"La tienda se encuentra cerrada en este momento, pero aún puedes agregar tu pedido para otro día.\";\r\n                this.state.horarios_de_atencion = ParseHorarios(store.horarios);\r\n                if (this.state.horarios_de_atencion && this.state.horarios_de_atencion.length) {\r\n                    this.state.infoHeader += \"\\nHorarios de Atención:\";\r\n                }\r\n            } else if (store.estado === \"DESHABILITADO\") {\r\n                this.state.error = \"Esta tienda está DESHABILITADA y no recibe pedidos.\";\r\n                this.state._error = \"Ingresaste a: \" + window.location.href;\r\n            }\r\n        } else {\r\n            if (error) {\r\n                if (error.status === 404) {\r\n                    this.state.error = \"La tienda que buscas no existe. Revisa tu enlace.\";\r\n                    this.state._error = \"Ingresaste a: \" + window.location.href;\r\n                } else {\r\n                    this.state.error = error.message;\r\n                    this.state.code = error.code || error.status;\r\n                    this.state._error = error.statusText;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const { logoSrc, slogan, titulo, error, _error, horarios_de_atencion, infoHeader } = this.state;\r\n        return (<div style={{ width: \"calc(100% - 20px)\", maxWidth: 600, textAlign: \"center\", paddingTop: 30, margin: \"auto\" }}>\r\n            {error\r\n                ? (<React.Fragment>\r\n                    <Typography color=\"secondary\" variant=\"h6\">{error}</Typography>\r\n                    <Typography color=\"secondary\" variant=\"subtitle2\">{_error}</Typography>\r\n                </React.Fragment>)\r\n                : (<React.Fragment>\r\n                    {logoSrc && <img src={logoSrc} style={{ maxWidth: \"100%\", maxHeight: 250, marginTop: 10, marginBottom: 10 }} alt={titulo || \"\"} />}\r\n                    <Typography variant=\"h5\">{titulo || \"Cargando...\"}</Typography>\r\n                    {slogan && <Typography variant=\"subtitle2\">{slogan}</Typography>}\r\n\r\n                    {infoHeader && horarios_de_atencion && <Divider />}\r\n\r\n                    {infoHeader && <Typography color=\"secondary\" variant=\"h6\">{infoHeader}</Typography>}\r\n\r\n                    {horarios_de_atencion && horarios_de_atencion.map((h, index) =>\r\n                        <Typography key={index} color=\"secondary\" variant=\"subtitle1\" style={{ flex: 1, textAlign: \"center\" }}>{h.dias} {h.periodo}</Typography>\r\n                    )}\r\n\r\n                    {(titulo || logoSrc)\r\n                        && (<Button color=\"primary\" onClick={x => this.props.launch(this.props)} fullWidth variant=\"outlined\" style={{ marginTop: 20 }} >\r\n                            EMPECEMOS!\r\n                        </Button>)}\r\n                </React.Fragment >)\r\n            }\r\n        </div>)\r\n    }\r\n}"],"sourceRoot":""}
{"version":3,"sources":["Layouts/Bar.tsx","Layouts/Menu.tsx","redux/reducers/orders.js","redux/store/alert-middleware.js","redux/store/index.ts","redux/reducers/store.js","redux/reducers/status.js","redux/actions/orders.ts","Services/Notifications/index.ts","Services/API.ts","Services/WhatsApp.js","Services/Geo.js","Components/Orders/OrderDetails.tsx","Components/Orders/OrderItem.tsx","Components/Orders/OrderGroup.tsx","Components/Orders/index.tsx","Components/Products/Item.js","Components/Products/Group.js","Services/ImageReader.js","Components/Config/UpdateableInput.js","Components/UploadImage.js","Components/Products/ProductDialog.js","Components/TextPrompt.js","Components/Products/index.js","Components/Config/Informacion.js","Components/Map.js","Components/Config/Cobertura.js","Components/Config/HorarioDialog.js","Components/Config/Horarios.js","Components/Config/Parametros.js","Components/Config/index.js","App.tsx","Login.tsx","index.tsx","redux/actions/Store.ts"],"names":["props","state","menuEl","handleMenu","bind","handleClose","handleLogOut","event","this","setState","currentTarget","window","confirm","onLogOut","title","store","user","onMenuClick","open","Boolean","AppBar","position","style","zIndex","Toolbar","display","flexDirection","Hidden","smUp","implementation","IconButton","color","aria-label","edge","onClick","flexGrow","xsDown","Typography","textTransform","variant","smDown","textAlign","titulo","toUpperCase","aria-owns","undefined","aria-haspopup","AccountCircle","Menu","id","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","onClose","MenuItem","minWidth","React","PureComponent","STEPS","current_step","classes","onCloseMenu","isMenuOpen","container","document","body","MenuContent","List","map","step","index","Fragment","key","addDividerBefore","Divider","ListItem","component","Link","to","selected","button","ListItemText","ListItemIcon","Icon","className","drawer","Drawer","anchor","paper","drawerPaper","ModalProps","keepMounted","toolbar","Close","alertInterval","intervalId","AlertMiddleware","next","action","type","clearInterval","setInterval","getElementById","play","payload","ReduxStore","createStore","combineReducers","porcentajeIVA","orders","i","res","item","find","x","indexOf","push","length","status","order_status","applyMiddleware","OrdersChanged","NotifyOrderChanged","order","Notification","permission","numero","estado","navigator","serviceWorker","ready","then","registration","showNotification","nombre","icon","data","socket","URL","PROJECT_ENV","QUITO","lat","lng","session","Date","toString","Math","floor","random","storeLoginData","info","localStorage","setItem","JSON","stringify","removeItem","viewLoginData","getItem","parse","getToken","location","reload","message","token","Fetch","URI","options","DEFAULTS","method","cache","mode","headers","fetch","response","ok","json","clone","catch","text","statusText","obj","ex","storeID","Id","URLSearchParams","btoa","ID","group","product","info_item","io","query","reconnection","transports","console","on","origin","dispatch","error","disconnect","OrderToPhone","trim","identificacion","telefono","detalle","number","str","substr","dif","padR","cantidad","descripcion","join","nota","FormaPago","total","toFixed","direccion","referencia","phone","encodeURIComponent","Promise","resolve","reject","geolocation","PositionByIP","getCurrentPosition","geoLocation","coords","latitude","longitude","currentLocation","locations","rutas","QUITO_BOUNDS","west","north","east","south","OrderDetails","contactos","handleClick","handlePhone","value","promise","API","OrdersOnRoute","OrdersDelivered","onEstadoChanged","all","GetOrder","GetParamContactos","DialogContent","padding","CircularProgress","size","facturaConDatos","documento_factura","identificacion_factura","_detalle_","valor_delivery","pvp","pagaIva","TOTALES","reduce","a","neto","iva","round","DOMICILIO_INFO","mts_delivery","segs_delivery","fecha","fechaEnvio","createdAt","asLocal","maxWidth","margin","width","Documento","target","href","Geo","GoogleMapsRouteURL","marginTop","flex","marginRight","RowDet","whiteSpace","marginBottom","numeroTransaccion","Documento_factura","marginLeft","DatosFacturaItem","BusinessOutlined","razonsocial_factura","PhoneOutlined","telefono_factura","LocationOnOutlined","direccion_factura","DialogActions","TextField","onChange","select","SelectProps","native","c","Button","Send","disabled","fullWidth","Component","connect","paddingLeft","useState","openedByDefault","visible","setVisible","label","animation","transform","ArrowDropDown","o","OrderItem","Orders","now","valueOf","onMounted","stepID","handleChanged","SetOrderStatus","GetOrders","SetOrders","history","match","path","changes","paddingTop","code","b","pendientes","enRuta","entregados","height","overflow","OrderGroup","children","Dialog","fullScreen","params","right","mapDispatchToProps","paused_color","paused","Card","habilitado","CardActionArea","onItemClick","CardMedia","image","imgSrc","verticalAlign","VisibilityOff","fontSize","CardContent","CardActions","onItemAction","loading","name","Pause","PlayArrow","ArrowLeft","ArrowRight","handleMenuClose","items","loading_action","onGroupAction","ArrowUpward","ArrowDownward","MoreVert","scrollBehavior","AddCircleOutline","sort","orden","p","Item","onGroupEdit","onGroupDelete","ReadImgAsUrl","file","mbs","reader","FileReader","onload","e","result","onerror","readAsDataURL","ImgFileToObject","base64","base64ArrayBuffer","ext","split","readAsArrayBuffer","arrayBuffer","chunk","encodings","bytes","Uint8Array","byteLength","byteRemainder","mainLength","timeout","click","IMG_STYLE","maxHeight","cursor","border","hidden","accept","src","alt","AddAPhoto","withStyles","idGrupo","handleInput","handleCheck","handleDelete","handlePhotoChange","handlePhotoDrop","handlePhotoOver","GetProduct","checked","isNaN","alert","imgFile","_save","SaveProduct","DeleteProduct","delete","preventDefault","files","dataTransfer","classList","remove","add","dropEffect","clearTimeout","setTimeout","precioFinal","onDrop","onDragOver","onDragEnter","handlePhotoEnter","onDragLeave","handlePhotoLeave","paddingBottom","overflowX","autoFocus","textField","UploadImage","inputProps","rows","multiline","InputProps","endAdornment","InputAdornment","FormControlLabel","control","Checkbox","paddingRight","grupos","g","Switch","input","inputLabel","handleSubmit","onSubmit","currentGroup","deleteGroup","editGroup","editGroupEnding","updateGrupo","handleGroupAction","handleItemClick","handleItemAction","editItemEnd","updateProduct","GetGroups","rawGroups","RequestActionProduct","prop_name","prev","grupo_a_actualizar","grupo","splice","scrollGroupToItem","new_element","hasOwnProperty","DeleteGroup","exists","RequestActionGroup","results","forEach","scrollToGroupId","onError","SaveGroup","err","requestAnimationFrame","div","groupDIV","scrollTop","offsetTop","idProducto","scrollLeft","offsetLeft","changed_prop","render","ProductDialog","d","Input","fb","feedback","visible_props","ReportProblem","helperText","validated","onUpdate","parseFloat","timeouts","handleUpdateProp","handleLogo","configuracion","avoidCatch","setConfigInfo","logoSrc","logoFile","slogan","whatsAppMessage","whatsAppPhone","Grid","xs","maxLength","API_KEY","mapProps","googleMapURL","containerElement","loadingElement","mapElement","defaultZoom","Map","withScriptjs","withGoogleMap","google","marker","polygons","enableDrawingManager","onPolygonComplete","onMapMounted","onPolygonClick","onPolygonMouseUp","disableDefaultUI","zoomControl","clickableIcons","ref","MarkerWithLabel","labelAnchor","maps","Point","elevation","defaultDrawingMode","drawing","OverlayType","POLYGON","defaultOptions","drawingControl","drawingControlOptions","ControlPosition","TOP_CENTER","drawingModes","polygonOptions","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","editable","onMouseUp","baseTransporte","kmBaseTransporte","recargoPorKm","google_maps_key","cobrarTransporte","coberturas","editMode","defaultCenter","handleTabContext","tabContextEl","handleTabContextClose","handleDeleteAllCoberturas","updateFeedback","handleMapMounted","handleNewPolygon","handlePolygonMouseUp","handleEditMode","handleMapClick","k","currentPosition","Polygon","vertices","getPath","getLength","getAt","toJSON","setMap","latLng","has_changed","previous","coord","prev_coord","LAST_COBERTURAS","mapRef","_fitBoundsToPolygon","_","bounds","LatLngBounds","extend","current_bounds","getBounds","union","fitBounds","hay_coberturas","MAP_OPTIONS","Tabs","Tab","LocationOn","Layers","onContextMenu","dias","desde","hasta","handleChange","handleDays","parts","INDEX","guardar","DialogTitle","TimeSelect","DaysSelect","selectProps","Select","horarios","handleEdit","horario","Table","TableHead","TableRow","TableCell","Add","TableBody","scope","Delete","TimeToString","tz","ToDayString","Edit","minHour","hour","min","telefono_contacto","nombre_contacto","handleNew","focus","digits","digit","handleRemove","handleSave","dir","placeholder","TableFooter","colSpan","diabled","currentTab","defaultConfiguracion","openedTabs","handleTabChange","GetConfigInfo","indicatorColor","textColor","Inbox","Category","Settings","theme","breakpoints","up","flexShrink","mixins","content","appBar","REMOVE_LISTENER","handleMounted","onToggleMenu","START_LISTENING","requestPermission","tienda","getState","Paper","exact","styles","pwd","showPassword","handleTogglePassword","LogIn","withStoresInfo","userInfo","onLogged","required","startAdornment","Visibility","LaunchApp","setStoreId","ReactDOM","LoggedOut","LaunchLogin","StrictMode","Logged","STOP_LISTENING","register"],"mappings":"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","file":"static/js/main.69e5a778.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { AppBar, Toolbar, Typography, IconButton, MenuItem, Hidden, Menu } from \"@material-ui/core\";\r\nimport { AccountCircle } from \"@material-ui/icons\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\n\r\nexport default class extends React.PureComponent<{\r\n    [key: string]: any\r\n}> {\r\n    state = {\r\n        menuEl: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleMenu = this.handleMenu.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleLogOut = this.handleLogOut.bind(this);\r\n    }\r\n    handleMenu(event) {\r\n        this.setState({ menuEl: event.currentTarget });\r\n    }\r\n    handleClose() {\r\n        this.setState({ menuEl: null });\r\n    }\r\n    handleLogOut() {\r\n        var ok = window.confirm(\"Est seguro de cerrar sesin?\");\r\n        if (ok) this.props.onLogOut();\r\n        this.handleClose();\r\n    }\r\n    render() {\r\n        const { title, store, user, onMenuClick } = this.props;\r\n        const { menuEl } = this.state;\r\n        const open = Boolean(menuEl);\r\n\r\n        return (<AppBar position=\"fixed\" style={{ zIndex: 1201 }}>\r\n            <Toolbar style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <Hidden smUp implementation=\"css\">\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        edge=\"start\"\r\n                        onClick={onMenuClick}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                </Hidden>\r\n                <div style={{ flexGrow: 1 }}>\r\n                    <Hidden xsDown implementation=\"css\">\r\n                        <Typography style={{ textTransform: \"uppercase\" }} variant=\"h4\" color=\"inherit\" >{title || \"\"}</Typography>\r\n                    </Hidden>\r\n                    <Hidden smUp implementation=\"css\">\r\n                        <Typography style={{ textTransform: \"uppercase\" }} variant=\"h6\" color=\"inherit\" >{title || \"\"}</Typography>\r\n                    </Hidden>\r\n                </div>\r\n\r\n                <Hidden smDown implementation=\"css\">\r\n                    <div style={{ display: \"block\", textAlign: \"right\" }}>\r\n                        <Typography style={{ display: \"block\" }} color=\"inherit\" variant=\"button\">{(store.titulo || \"\").toUpperCase()}</Typography>\r\n                        <Typography style={{ display: \"block\" }} color=\"inherit\" variant=\"caption\">{user}</Typography>\r\n                    </div>\r\n                </Hidden>\r\n\r\n                <div>\r\n                    <IconButton\r\n                        title={store.titulo}\r\n                        aria-owns={open ? 'menu-appbar' : undefined}\r\n                        aria-haspopup=\"true\"\r\n                        onClick={this.handleMenu}\r\n                        color=\"inherit\"\r\n                    >\r\n                        <AccountCircle />\r\n                    </IconButton>\r\n                    <Menu\r\n                        id=\"menu-appbar\"\r\n                        anchorEl={menuEl}\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={open}\r\n                        onClose={this.handleClose}\r\n                    >\r\n                        <MenuItem style={{ minWidth: 150 }} onClick={this.handleLogOut}>Salir</MenuItem>\r\n                    </Menu>\r\n                </div>\r\n            </Toolbar>\r\n        </AppBar>)\r\n    }\r\n};","import React from \"react\";\r\nimport { Drawer, List, ListItem, ListItemText, ListItemIcon, Divider, Hidden, IconButton } from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Close } from \"@material-ui/icons\";\r\nexport default function (props) {\r\n    const { STEPS, current_step, classes, window, onCloseMenu, isMenuOpen } = props;\r\n    const container = window !== undefined ? () => window().document.body : undefined;\r\n\r\n    const MenuContent = (<List>\r\n        {STEPS.map((step, index) => (<React.Fragment key={index}>\r\n            {step.addDividerBefore && <Divider />}\r\n            <ListItem\r\n                component={Link}\r\n                to={\"/\" + step.id}\r\n                selected={step.id === current_step}\r\n                button\r\n            >\r\n                <ListItemText>{step.title}</ListItemText>\r\n                <ListItemIcon>{<step.Icon />}</ListItemIcon>\r\n            </ListItem>\r\n        </React.Fragment>\r\n        ))}\r\n    </List>);\r\n\r\n    return (<nav className={classes.drawer}>\r\n\r\n        <Hidden smUp implementation=\"css\" >\r\n            <Drawer\r\n                container={container}\r\n                variant=\"temporary\"\r\n                anchor={'left'}\r\n                open={isMenuOpen}\r\n                onClose={onCloseMenu}\r\n                classes={{ paper: classes.drawerPaper }}\r\n                ModalProps={{\r\n                    keepMounted: true, // Better open performance on mobile.\r\n                }}\r\n            >\r\n                <div className={classes.toolbar} style={{ textAlign: \"right\" }}>\r\n                    <IconButton onClick={onCloseMenu}>\r\n                        <Close />\r\n                    </IconButton>\r\n                </div>\r\n                {MenuContent}\r\n            </Drawer>\r\n        </Hidden>\r\n        <Hidden xsDown implementation=\"css\">\r\n            <Drawer\r\n                classes={{ paper: classes.drawerPaper }}\r\n                variant=\"permanent\"\r\n                open\r\n            >\r\n                <div className={classes.toolbar}></div>\r\n                {MenuContent}\r\n            </Drawer>\r\n        </Hidden>\r\n    </nav>);\r\n}","export default function (orders = [], action) {\r\n    switch (action.type) {\r\n        case \"SET_ORDERS\":\r\n            return [...action.payload];\r\n        case \"ADD_ORDER\":\r\n            return [...orders, action.payload];\r\n        case \"ORDERS_CHANGED\":\r\n            for (let i = 0; i < action.payload.length; i++) {\r\n                const res = action.payload[i];\r\n                const item = orders.find(x => x.id === res.id);\r\n                if (item) {\r\n                    orders[orders.indexOf(item)] = { ...item, ...res };\r\n                    continue;\r\n                }\r\n                if (!item) orders.push(res);\r\n            }\r\n        default:\r\n            return orders;\r\n    }\r\n\r\n}","const alertInterval = {\r\n    id: null,\r\n    intervalId: null\r\n};\r\n\r\nconst AlertMiddleware = store => next => action => {\r\n    if (action.type === \"NEW_ORDER\") {\r\n        if (alertInterval.intervalId) clearInterval(alertInterval.intervalId);\r\n        alertInterval = {\r\n            intervalId: setInterval(() => document.getElementById(\"order-alert\").play(), 1000),\r\n            id: action.payload.id\r\n        };\r\n    }\r\n    if (action.type === \"ORDER_OPENED\" && alertInterval) {\r\n        if (alertInterval) clearInterval(alertInterval.intervalId);\r\n    }\r\n    return next(action);\r\n}\r\nexport default AlertMiddleware;","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\n\r\nimport store from \"../reducers/store\";\r\nimport orders from \"../reducers/orders\";\r\nimport status from \"../reducers/status\";\r\nimport AlertMiddleware from \"./alert-middleware\";\r\n\r\nconst ReduxStore = createStore(combineReducers({\r\n    store,\r\n    orders,\r\n    status\r\n}), applyMiddleware(AlertMiddleware));\r\n\r\nexport default ReduxStore;","export default function tienda(state = { porcentajeIVA: 12 }, action) {\r\n    switch (action.type) {\r\n        case \"SET_TIENDA\":\r\n            return { ...action.payload };\r\n        case \"SET_POSITION\":\r\n            return { ...state, position: action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n}","export default function (state = { order_status: \"\" }, action) {\r\n    switch (action.type) {\r\n        case \"SET_ORDER_STATUS\":\r\n            return { ...state, order_status: action.payload }\r\n        default:\r\n            return state;\r\n    }\r\n}","export function SetOrders(payload) {\r\n    return {\r\n        type: \"SET_ORDERS\",\r\n        payload\r\n    }\r\n}\r\n\r\nexport function AddOrder(payload) {\r\n    return {\r\n        type: \"ADD_ORDER\",\r\n        payload\r\n    }\r\n}\r\nexport function OrdersChanged(payload) {\r\n    return {\r\n        type: \"ORDERS_CHANGED\",\r\n        payload\r\n    }\r\n}\r\n\r\nexport function SetOrderStatus(payload: \"LOADING\" | \"ERROR\" | \"\") {\r\n    return {\r\n        type: \"SET_ORDER_STATUS\",\r\n        payload\r\n    }\r\n}","export function NotifyOrderChanged(order: any) {\r\n    if (Notification.permission !== \"granted\") return;\r\n\r\n    var title = \"LA ORDEN #\" + order.numero;\r\n    if (order.estado === 0) title = \"NUEVO PEDIDO\";\r\n    if (order.estado === 1) title += \" EST EN RUTA\";\r\n    if (order.estado === 2) title += \" FUE ENTREGADA\";\r\n    if (order.estado === 3) title += \"FUE CANCELADA\";\r\n\r\n    navigator.serviceWorker.ready.then(function (registration) {\r\n        registration.showNotification(title, {\r\n            body: order.nombre + (order.estado === 0 ? \" Acaba de realizar un pedido\" : \" - Click para ver el pedido\"),\r\n            icon: \"./favicon.ico\",\r\n            data: order.id\r\n        });\r\n    });\r\n}","import io from \"socket.io-client\";\r\nimport ReduxStore from \"../redux/store\";\r\nimport { OrdersChanged } from \"../redux/actions/orders\";\r\nimport { NotifyOrderChanged } from \"./Notifications/index\";\r\n/*const URL = (window.location.href.indexOf(\"http://localhost\") === 0)\r\n    ? \"http://localhost:10000/data/\"\r\n    : (window.location.protocol === \"https:\"\r\n        ? \"https://orders-runfoodapp.rj.r.appspot.com/data/\"\r\n        : \"http://runfoodapp.ddns.net:10000/data/\");*/\r\nconst URL = (window as any).PROJECT_ENV === \"development\"\r\n    ? \"http://localhost:10000\"\r\n    : \"https://www.orders.runfoodapp.com\";\r\n\r\nconst QUITO = { lat: -0.180653, lng: -78.467834 };\r\n\r\nconst session = new Date().toString() + \":\" + Math.floor(100000 + Math.random() * 900000);\r\n\r\nexport function storeLoginData(info?) {\r\n    if (info) {\r\n        window.localStorage.setItem(\"__\", JSON.stringify(info));\r\n    } else {\r\n        window.localStorage.removeItem(\"__\");\r\n    }\r\n}\r\nexport function viewLoginData() {\r\n    let info: any = window.localStorage.getItem(\"__\");\r\n    if (!info) return;\r\n    info = JSON.parse(info);\r\n    if (!info.position) info.position = QUITO;\r\n    return info;\r\n}\r\nfunction getToken() {\r\n    const info = viewLoginData();\r\n    if (!info) {\r\n        window.location.reload();\r\n        throw { message: \"Necesitas iniciar sesin para entrar aqu.\" };\r\n    }\r\n    return info.token + \"+\" + session;\r\n}\r\n\r\nlet socket;\r\nclass API {\r\n    private storeID: string;\r\n    setStoreId(Id: string) {\r\n        this.storeID = Id;\r\n    }\r\n    LogIn(data) {\r\n        return Fetch(`${URL}/login`, {\r\n            body: JSON.stringify(data),\r\n            method: \"POST\"\r\n        }).catch(x => {\r\n            if (x.status === 400) throw { ...x, message: \"Usuario o contrasea incorrectos.\" };\r\n            if (x.status === 401) throw { ...x };\r\n            if (x.status === 401) throw { ...x };\r\n            throw x;\r\n        });\r\n    }\r\n\r\n    GetOrders(body?) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order?${new URLSearchParams(body).toString()}`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n    GetOrder(ID) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order/${ID}`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n    OrdersOnRoute(orders) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order-actions/ON-ROUTE`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ orders }),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n    OrdersDelivered(orders) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order-actions/DELIVERED`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ orders }),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n\r\n    GetGroups() {\r\n        return Fetch(`${URL}/data/${this.storeID}/group?admin_info=true`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n    SaveGroup(group) {\r\n        const ID = group.id;\r\n        return Fetch(`${URL}/data/${this.storeID}/group${ID ? `/${ID}` : \"\"}`, {\r\n            method: ID ? \"PUT\" : \"POST\",\r\n            body: JSON.stringify(group),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    }\r\n    RequestActionGroup(group) {\r\n        return Fetch(`${URL}/data/${this.storeID}/group/${group.id}`, {\r\n            method: \"PATCH\",\r\n            body: JSON.stringify(group),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    }\r\n    DeleteGroup(group) {\r\n        return Fetch(`${URL}/data/${this.storeID}/group/${group.id}`, {\r\n            method: \"DELETE\",\r\n            body: JSON.stringify(group),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n\r\n    GetProduct(ID) {\r\n        return Fetch(`${URL}/data/${this.storeID}/product/${ID}?admin_info=true`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n    SaveProduct(product) {\r\n        const ID = product.id && product.id !== \"NUEVO\" && product.id;\r\n        return Fetch(`${URL}/data/${this.storeID}/product${ID ? `/${ID}` : \"\"}`, {\r\n            method: ID ? \"PUT\" : \"POST\",\r\n            body: JSON.stringify(product),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    }\r\n    RequestActionProduct(product) {\r\n        return Fetch(`${URL}/data/${this.storeID}/product/${product.id}`, {\r\n            method: \"PATCH\",\r\n            body: JSON.stringify(product),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    }\r\n    DeleteProduct(product) {\r\n        return Fetch(`${URL}/data/${this.storeID}/product/${product.id}`,\r\n            {\r\n                method: \"DELETE\",\r\n                body: JSON.stringify(product),\r\n                headers: {\r\n                    \"Authorization\": \"Basic \" + btoa(getToken())\r\n                }\r\n            })\r\n    }\r\n\r\n    GetParamContactos() {\r\n        return Fetch(`${URL}/data/${this.storeID}/config?items=contactos`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n    GetConfigInfo() {\r\n        return Fetch(`${URL}/data/${this.storeID}/config`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n    setConfigInfo(info_item) {\r\n        return Fetch(`${URL}/data/${this.storeID}/config`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(info_item),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    }\r\n\r\n    START_LISTENING() {\r\n        socket = io(URL, {\r\n            query: {\r\n                token: btoa(getToken())\r\n            },\r\n            reconnection: true,\r\n            transports: [\"polling\"]\r\n        });\r\n        console.info(\"SOCKET CONNECTED\");\r\n        socket.on(\"ORDERS_CHANGED\", ({ payload, origin }) => {\r\n            if (origin === btoa(getToken())) return;\r\n            ReduxStore.dispatch(OrdersChanged(payload));\r\n            try {\r\n                for (let i = 0; i < payload.length; i++) {\r\n                    const order = payload[i];\r\n                    NotifyOrderChanged(order);\r\n                }\r\n            } catch (ex) {\r\n                console.error(\"Notification error\", ex);\r\n            }\r\n        });\r\n    }\r\n    STOP_LISTENING() {\r\n        socket && socket.disconnect();\r\n        console.info(\"SOCKET DISCONNECTED\");\r\n    }\r\n}\r\n\r\nfunction Fetch(URI, options) {\r\n    const DEFAULTS = {\r\n        method: \"GET\",\r\n        cache: \"reload\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Access-Control-Allow-Origin': '*'\r\n        }\r\n    };\r\n    // headers\r\n    if (options && options.headers) {\r\n        for (const key in options.headers) {\r\n            DEFAULTS.headers[key] = options.headers[key];\r\n        }\r\n        delete options.headers;\r\n    }\r\n    return fetch(URI, { ...DEFAULTS, ...options }).then(response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        } else {\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }\r\n    }).catch(ex => {\r\n        if (ex.message === \"Failed to fetch\") {\r\n            throw {\r\n                message: \"Este servicio no se encuentra disponible por el momento. Intentelo ms tarde.\",\r\n                status: 0\r\n            }\r\n        }\r\n        if (!ex.message) ex.message = ex.statusText;\r\n        throw ex;\r\n    });\r\n}\r\nexport default new API();\r\n\r\n","export default function OrderToPhone(data) {\r\n    var text = `ORDEN *#${data.numero}*\\n` +\r\n        `CLIENTE: *${(data.nombre || \"\").trim()}*\\n` +\r\n        (data.identificacion\r\n            ? `CI/RUC: *${(data.identificacion || \"\").trim()}*\\n`\r\n            : \"\") +\r\n        `TELEFONO: *${(data.telefono || \"\").trim()}*\\n` +\r\n\r\n        \"\\n\" +\r\n        \"PRODUCTOS:\\n\" +\r\n        (data.detalle.map(x => {\r\n            return \"```\" + padR(x.cantidad) + \" \" + (x.descripcion || \"\").trim() + \"```\";\r\n        }).join(\"\\n\")) +\r\n        \"\\n\" +\r\n        \"\\n\" +\r\n        (data.nota && (\"NOTAS: *\" + data.nota.trim() + \"*\\n\")) +\r\n        \"METODO DE PAGO: \" +\r\n        \"*\" + data.FormaPago + \" $\" + data.total.toFixed(2) + \"*\\n\" +\r\n        \"DIRECCION: \" +\r\n        `*${(data.direccion || \"\").trim()}*  *${(data.referencia || \"\").trim()}*\\n` +\r\n        \" http://www.google.com/maps/place/\" + data.lat + \",\" + data.lng;\r\n\r\n    //return `https://wa.me/${data.phone}/?text=` + encodeURIComponent(text);\r\n    return \"whatsapp://send?phone=\" + data.phone + \"&text=\" + encodeURIComponent(text);\r\n}\r\n\r\nfunction padR(number, length) {\r\n    var str = number.toString();\r\n    if (str.length === length) return str;\r\n    if (str.length >= length) return str.substr(0, length);\r\n\r\n    var dif = length - str.length;\r\n    for (let i = 0; i < dif; i++) {\r\n        str += \" \";\r\n    }\r\n    return str;\r\n}","export default class {\r\n    static currentPosition() {\r\n        return new Promise((resolve, reject) => {\r\n            console.info(\"obteniendo posicion actual con navigator.geolocation.getCurrentPosition\");\r\n            if (!navigator.geolocation) {\r\n                console.info(\"navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()\");\r\n                return PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            navigator.geolocation.getCurrentPosition(\r\n                geoLocation => resolve({\r\n                    lat: geoLocation.coords.latitude,\r\n                    lng: geoLocation.coords.longitude\r\n                }), () => {\r\n                    console.info(\"navigator.geolocation.getCurrentPosition fall, intentando con PositionByIP()\");\r\n                    PositionByIP().then(resolve).catch(reject);\r\n                }\r\n            );\r\n        });\r\n    }\r\n    static QUITO_BOUNDS = {\r\n        west: -78.85300,\r\n        north: -0.04875,\r\n        east: -78.17184,\r\n        south: -0.39207\r\n    }\r\n    static QUITO = {\r\n        lat: -0.189515,\r\n        lng: -78.488167\r\n    }\r\n    static GoogleMapsRouteURL(currentLocation, locations) {\r\n        const rutas = [currentLocation];\r\n        for (let i = 0; i < locations.length; i++) {\r\n            rutas.push(locations[i]);\r\n        }\r\n        if (rutas.length === 1) return \"\";\r\n        return \"https://www.google.com/maps/dir/ \" +\r\n            rutas.map(x => [x.lat, x.lng].join(\",\")).join(\"/\");\r\n    }\r\n}\r\n\r\nfunction PositionByIP() {\r\n    return fetch(\"https://ipapi.co/json/\").then(x => x.json())\r\n        .then(info => ({ lat: info.latitude, lng: info.longitude }));\r\n}","import React from \"react\";\r\nimport {\r\n    DialogContent, CircularProgress, Typography, Divider,\r\n    DialogActions, Button, TextField\r\n} from \"@material-ui/core\";\r\nimport { PhoneOutlined, BusinessOutlined, LocationOnOutlined, Send } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport OrderToPhone from \"../../Services/WhatsApp\";\r\nimport { connect } from \"react-redux\";\r\nimport Geo from \"../../Services/Geo\";\r\n\r\nclass OrderDetails extends React.Component<{\r\n    history: any, id?: string, porcentajeIVA: number, show: boolean, onEstadoChanged: any, position: any\r\n}> {\r\n    state = {\r\n        data: null,\r\n        error: null,\r\n        phone: \"\",\r\n        status: \"\",\r\n        contactos: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handlePhone = this.handlePhone.bind(this);\r\n    }\r\n    handlePhone(event) {\r\n        this.setState({ phone: event.currentTarget.value });\r\n    }\r\n    handleClick() {\r\n        if (!this.state.data) return;\r\n        if (this.state.status) return;\r\n        this.setState({ status: \"LOADING\" });\r\n        let promise;\r\n        if (this.state.data.estado === 0) promise = API.OrdersOnRoute([this.state.data.id]);\r\n        if (this.state.data.estado === 1) promise = API.OrdersDelivered([this.state.data.id]);\r\n        if (!promise) return this.setState({ status: \"\" });\r\n        promise.then(this.props.onEstadoChanged)\r\n            .catch(error => this.setState({ status: \"\", error }));\r\n    }\r\n\r\n    componentWillMount() {\r\n        Promise.all([\r\n            API.GetOrder(this.props.id),\r\n            API.GetParamContactos()\r\n        ]).then(([data, contactos]) => this.setState({ data, contactos, error: null })\r\n        ).catch(error => this.setState({ error }));\r\n    }\r\n\r\n    render() {\r\n        const porcentajeIVA = this.props.porcentajeIVA || 12;\r\n        const { data, error, phone, contactos, status } = this.state;\r\n        if (!data) return (<DialogContent>\r\n            {error\r\n                ? (<div style={{ textAlign: \"center\", padding: 20 }}>\r\n                    <Typography variant=\"h6\">Ocurri un error</Typography>\r\n                    <Typography variant=\"body2\">{error.message}</Typography>\r\n                    <Typography variant=\"button\">{error.status} {error.statusText}</Typography>\r\n                </div>)\r\n                : (<div style={{ textAlign: \"center\", padding: 100 }}>\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </div>)}\r\n        </DialogContent>);\r\n\r\n        const facturaConDatos = data.documento_factura && data.identificacion_factura;\r\n        var _detalle_ = [...data.detalle];\r\n        if (data.valor_delivery) _detalle_.push({\r\n            id: \"DOMICILIO\",\r\n            pvp: data.valor_delivery,\r\n            cantidad: 1,\r\n            pagaIva: false\r\n        });\r\n        const TOTALES = _detalle_.reduce((a, x) => {\r\n            var neto = (x.pvp * x.cantidad);\r\n            a.cantidad += x.cantidad;\r\n            a.neto += neto;\r\n            if (x.pagaIva) a.iva += (neto * porcentajeIVA) / 100;\r\n            return a;\r\n        }, {\r\n            cantidad: 0,\r\n            neto: 0,\r\n            iva: 0\r\n        });\r\n        TOTALES.total = (TOTALES.neto + TOTALES.iva).round(2);\r\n\r\n\r\n        var DOMICILIO_INFO: any = [];\r\n        if (data.mts_delivery) DOMICILIO_INFO.push(`${(data.mts_delivery / 1000).round(1)} km`);\r\n        if (data.segs_delivery) DOMICILIO_INFO.push(`${(data.segs_delivery / 60).round(1)} min`);\r\n        if (DOMICILIO_INFO.length) {\r\n            DOMICILIO_INFO = DOMICILIO_INFO.join(\" - \");\r\n        } else {\r\n            DOMICILIO_INFO = \"\";\r\n        }\r\n\r\n        const fecha = new Date(data.fechaEnvio || data.createdAt).asLocal();\r\n        return (<>\r\n            <DialogContent>\r\n                <div style={{ maxWidth: 800, margin: \"auto\" }}>\r\n\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h5\">ORDEN #{data.numero}</Typography>\r\n\r\n                    <div>\r\n                        <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">FECHA: </Typography>\r\n                        <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{fecha}</Typography>\r\n                    </div>\r\n                    <div>\r\n                        <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">CLIENTE: </Typography>\r\n                        <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.nombre}</Typography>\r\n                    </div>\r\n                    {(data.Documento || data.identificacion) && <div>\r\n                        <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">{data.Documento || \"C.I. / RUC\"}: </Typography>\r\n                        <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.identificacion}</Typography>\r\n                    </div>}\r\n                    <div>\r\n                        <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">TLF: </Typography>\r\n                        <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.telefono}</Typography>\r\n                    </div>\r\n                    <div>\r\n                        <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">DIRECCION: </Typography>\r\n                        <Typography target=\"_blank\" component=\"a\" href={Geo.GoogleMapsRouteURL(this.props.position, [this.state.data])} style={{ display: \"inline-block\" }} variant=\"body1\">{data.direccion}</Typography>\r\n                    </div>\r\n                    <div>\r\n                        <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">REFERENCIA: </Typography>\r\n                        <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.referencia}</Typography>\r\n                    </div>\r\n\r\n                    <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginTop: 10 }}>\r\n                        <Typography style={{ flex: 1, marginRight: 10 }} variant=\"h6\">PRODUCTO</Typography>\r\n                        <Typography style={{ width: 60, marginRight: 10 }} variant=\"h6\">CANT</Typography>\r\n                        <Typography style={{ width: 70, textAlign: \"right\" }} variant=\"h6\">TOTAL</Typography>\r\n                    </div>\r\n\r\n                    {data.detalle.map((item, index) => <RowDet {...item} key={index} porcentajeIVA={porcentajeIVA} />)}\r\n                    {data.valor_delivery ? <RowDet\r\n                        color=\"primary\"\r\n                        cantidad={1}\r\n                        pvp={data.valor_delivery}\r\n                        descripcion={\"ENVIO A DOMICILIO \" + DOMICILIO_INFO}\r\n                    /> : null}\r\n\r\n                    <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginTop: 5 }}>\r\n                        <Typography variant=\"h6\" style={{ flex: 1, marginRight: 10 }} >TOTAL</Typography>\r\n                        <Typography style={{ marginRight: 10, width: 60 }} variant=\"h6\">{TOTALES.cantidad.round(4)}</Typography>\r\n                        <Typography style={{ width: 70, textAlign: \"right\", whiteSpace: \"nowrap\" }} variant=\"h6\">$ {TOTALES.total.toFixed(2)}</Typography>\r\n                    </div>\r\n\r\n                    <Divider style={{ marginTop: 5, marginBottom: 20 }} />\r\n                    <Typography>PAGO : {data.FormaPago}</Typography>\r\n                    {data.numeroTransaccion && <Typography># de Comprobante :{data.numeroTransaccion}</Typography>}\r\n                    <Typography>NOTAS: {data.nota}</Typography>\r\n\r\n                    {facturaConDatos && <div>\r\n                        <Divider style={{ marginTop: 5, marginBottom: 20 }} />\r\n                        <Typography style={{ textAlign: \"center\", width: \"100%\" }} variant=\"h6\">DATOS DE FACTURACIN</Typography>\r\n                        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                            <Typography variant=\"body2\">{data.Documento_factura}:</Typography>\r\n                            <Typography variant=\"body2\" style={{ flex: 1, marginLeft: 10 }}>{data.identificacion_factura}</Typography>\r\n                        </div>\r\n                        <DatosFacturaItem title=\"Razon Social\" icon={BusinessOutlined} text={data.razonsocial_factura} />\r\n                        <DatosFacturaItem title=\"Telefono\" icon={PhoneOutlined} text={data.telefono_factura} />\r\n                        <DatosFacturaItem title=\"Direccin\" icon={LocationOnOutlined} text={data.direccion_factura} />\r\n                    </div>}\r\n\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions style={{ maxWidth: 800, width: \"calc(100% - 20px)\", margin: \"auto\" }}>\r\n                <TextField\r\n                    style={{ flex: 1, margin: 5 }}\r\n                    type=\"phone\"\r\n                    value={phone}\r\n                    margin=\"none\"\r\n                    onChange={this.handlePhone}\r\n                    variant=\"standard\"\r\n                    select={true}\r\n                    SelectProps={{\r\n                        native: true\r\n                    }}\r\n                >\r\n                    <option value=\"\">ENVIAR POR WHATSAPP</option>\r\n                    {contactos.map(c => <option key={c.telefono} value={c.telefono}>{c.nombre}</option>)}\r\n                </TextField>\r\n\r\n                <Button\r\n                    title=\"Enviar por WhatsApp\"\r\n                    component=\"a\"\r\n                    href={OrderToPhone({ ...data, total: TOTALES.total, phone })} target=\"_blank\"\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                >\r\n                    <Send />\r\n                </Button>\r\n            </DialogActions>\r\n            {[0, 1].indexOf(data.estado) >= 0\r\n                ? (<DialogActions style={{ maxWidth: 800, width: \"calc(100% - 20px)\", margin: \"auto\" }}>\r\n                    {error && <Typography color=\"secondary\">{error.message}</Typography>}\r\n                    <Button disabled={!!status} onClick={this.handleClick} type=\"button\" variant=\"contained\" fullWidth color=\"primary\" >\r\n                        {NextStep(data.estado)}\r\n                    </Button>\r\n                </DialogActions>)\r\n                : null}\r\n        </>)\r\n    }\r\n}\r\n\r\nexport default connect(state => ({\r\n    porcentajeIVA: state.porcentajeIVA,\r\n    position: state.store.position\r\n}))(OrderDetails);\r\n\r\nfunction RowDet(props) {\r\n    var neto = props.pvp * props.cantidad;\r\n    var iva = props.pagaIva ? ((neto * props.porcentajeIVA) / 100) : 0;\r\n    return (<div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginTop: 5, marginBottom: 5 }}>\r\n        <div style={{ flex: 1, marginRight: 10 }}>\r\n            <Typography color={props.color || \"default\"} variant=\"subtitle2\">{props.descripcion}</Typography>\r\n            <Typography style={{ paddingLeft: 10 }} color={props.color || \"default\"} variant=\"body1\">{props.nota}</Typography>\r\n        </div>\r\n        <Typography color={props.color || \"default\"} style={{ marginRight: 10, width: 60 }} variant=\"subtitle2\">{props.cantidad.round(4)}</Typography>\r\n        <Typography color={props.color || \"default\"} style={{ width: 70, textAlign: \"right\", whiteSpace: \"nowrap\" }} variant=\"subtitle2\">$ {(neto + iva).round(2).toFixed(2)}</Typography>\r\n    </div>)\r\n}\r\n\r\nfunction DatosFacturaItem(props) {\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"row\" }} title={props.title}>\r\n            <props.icon />\r\n            <Typography style={{ padding: 3, flex: 1 }}>{props.text}</Typography>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction NextStep(step) {\r\n    if (step === 0) return \"ENVIAR A RUTA\";\r\n    if (step === 1) return \"FINALIAR ENTREGA\";\r\n    return step;\r\n}","import React from \"react\";\r\nimport { Typography, Button } from \"@material-ui/core\";\r\n\r\nexport default function (props) {\r\n    return (<Button fullWidth onClick={props.onClick} component=\"button\" value={props.id} variant=\"outlined\" style={{ margin: 5, textAlign: \"left\" }} >\r\n        <div style={{ display: \"table-cell\", width: \"100%\" }}>\r\n            <div style={{ display: \"table-row\" }}>\r\n                <div style={{ display: \"table-cell\" }}>\r\n                    <Typography style={{ display: \"table-cell\", width: \"100%\" }} variant=\"h6\">{props.nombre}</Typography>\r\n                </div>\r\n                <div style={{ display: \"table-cell\" }}>\r\n                    <Typography style={{ display: \"table-cell\", whiteSpace: \"nowrap\" }}>\r\n                        # {props.numero}\r\n                    </Typography>\r\n                </div>\r\n            </div>\r\n            <div style={{ display: \"table-row\" }}>\r\n                <div style={{ display: \"table-cell\", width: \"100%\" }}>\r\n                    <Typography variant=\"button\">\r\n                        {new Date(props.createdAt).asLocal()}\r\n                    </Typography>\r\n                </div>\r\n                <div style={{ display: \"table-cell\", whiteSpace: \"nowrap\" }}>\r\n                    <Typography>\r\n                        $ {props.total}\r\n                    </Typography>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </Button >);\r\n}","import React from \"react\";\r\nimport { Typography, Button } from \"@material-ui/core\";\r\nimport OrderItem from \"./OrderItem\";\r\nimport { ArrowDropDown } from \"@material-ui/icons\";\r\n\r\n\r\n\r\nexport default function (props) {\r\n    const [visible, setVisible] = React.useState(props.openedByDefault === true);\r\n    const { data, onClick, label } = props;\r\n    const style: any = { animation: \"rotation 2s linear\" };\r\n    if (!visible) style.transform = \"rotate(180deg)\";\r\n    return (\r\n        <div style={{ maxWidth: 600, margin: \"auto\" }}>\r\n            <Button fullWidth variant=\"text\" type=\"button\" onClick={event => setVisible(!visible)}>\r\n                <Typography variant=\"h6\" >{label}</Typography>\r\n                <ArrowDropDown style={style} />\r\n            </Button>\r\n            <div style={{ display: visible ? \"block\" : \"none\" }}>\r\n                {data.map(o => (<OrderItem key={o.id} {...o} onClick={onClick} />))}\r\n            </div>\r\n        </div>);\r\n}","import React from \"react\";\r\nimport { CircularProgress, Typography, Dialog, IconButton } from \"@material-ui/core\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport API from \"../../Services/API\";\r\nimport { SetOrders, SetOrderStatus, OrdersChanged } from \"../../redux/actions/orders\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport OrderGroup from \"./OrderGroup\";\r\n\r\nclass Orders extends React.Component<{\r\n    history: any;\r\n    match: any;\r\n    data: any[];\r\n    SetOrders: any;\r\n    SetOrderStatus: any;\r\n    OrdersChanged: any;\r\n    status: string;\r\n}> {\r\n    state = {\r\n        now: new Date().valueOf(),\r\n        error: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleChanged = this.handleChanged.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        this.props.SetOrderStatus(\"LOADING\");\r\n        API.GetOrders()\r\n            .then(this.props.SetOrders)\r\n            .then(() => this.props.SetOrderStatus(\"\"))\r\n            .catch(error => {\r\n                this.props.SetOrderStatus(\"ERROR\");\r\n                this.setState({ error });\r\n            });\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.SetOrderStatus(\"\");\r\n    }\r\n    handleClick(event) {\r\n        const id = event.currentTarget.value;\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    handleClose() {\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handleChanged(changes) {\r\n        this.props.OrdersChanged(changes);\r\n        this.handleClose();\r\n    }\r\n\r\n    render() {\r\n        const { error } = this.state;\r\n        const { status, data } = this.props;\r\n\r\n        if (status === \"LOADING\") return (<div style={{ width: \"100%\", textAlign: \"center\", margin: \"auto\", paddingTop: 100 }}>\r\n            <CircularProgress size={70} />\r\n            <Typography variant=\"h4\" >CARGANDO...</Typography>\r\n        </div>);\r\n        if (error) return (<div style={{ width: \"100%\", textAlign: \"center\", margin: \"auto\", paddingTop: 100 }}>\r\n            <Typography variant=\"h4\">Ocurri un error</Typography>\r\n            <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n            <Typography variant=\"body1\">{error.status} | {error.statusText} | {error.code}</Typography>\r\n        </div>);\r\n\r\n        const { pendientes, enRuta, entregados } = data.reduce((a, b) => {\r\n            if (b.estado === 0) a.pendientes.push(b);\r\n            if (b.estado === 1) a.enRuta.push(b);\r\n            if (b.estado === 2) a.entregados.push(b);\r\n            return a;\r\n        }, {\r\n            pendientes: [],\r\n            enRuta: [],\r\n            entregados: []\r\n        });\r\n\r\n        return (<div style={{ display: \"flex\", flexDirection: \"row\", height: \"100%\" }}>\r\n            <div style={{ flex: 1, overflow: \"auto\" }}>\r\n                <OrderGroup openedByDefault={true} label=\"PENDIENTES\" data={pendientes} onClick={this.handleClick} />\r\n                <OrderGroup openedByDefault={false} label=\"EN RUTA\" data={enRuta} onClick={this.handleClick} />\r\n                <OrderGroup openedByDefault={false} label=\"ENTREGADOS\" data={entregados} onClick={this.handleClick} />\r\n            </div>\r\n            <Route path={`${this.props.match.path}/:id`}\r\n                children={({ match, history }) => (<Dialog fullScreen onClose={this.handleClose} open={Boolean(match && match.params.id)} >\r\n                    <IconButton style={{ position: \"absolute\", right: 20 }} onClick={this.handleClose} type=\"button\">\r\n                        <Close />\r\n                    </IconButton>\r\n                    {(match && match.params.id)\r\n                        ? <OrderDetails\r\n                            key={match && match.params.id}\r\n                            onEstadoChanged={this.handleChanged}\r\n                            history={history}\r\n                            id={match && match.params.id}\r\n                        />\r\n                        : null}\r\n                </Dialog>)}\r\n            />\r\n        </div>);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({ data: state.orders, status: state.order_status });\r\nconst mapDispatchToProps = {\r\n    SetOrders,\r\n    SetOrderStatus,\r\n    OrdersChanged\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Orders);","import React from \"react\";\r\nimport {\r\n    Typography, IconButton,\r\n    Card, CardActionArea, CardMedia, CardContent, CardActions,\r\n    CircularProgress\r\n} from \"@material-ui/core\";\r\nimport {\r\n    Pause, PlayArrow, ArrowLeft, ArrowRight, VisibilityOff\r\n} from \"@material-ui/icons\";\r\n\r\nexport default function (props) {\r\n    const paused_color = props.paused ? \"secondary\" : \"primary\";\r\n    return (<Card\r\n        style={{ display: \"inline-block\", width: 200, margin: 10, height: 285 }}\r\n        id={\"ITEM-CONTAINER-\" + props.id}\r\n        title={props.nombre + (props.habilitado ? \"\" : \" - DESHABILITADO\")}\r\n    >\r\n        <CardActionArea style={{ height: 220, overflow: \"hidden\" }} value={props.id} onClick={props.onItemClick}>\r\n            {props.habilitado\r\n                ? <CardMedia\r\n                    style={{ height: 140 }}\r\n                    image={props.imgSrc || \"https://diegopq95.github.io/img/default.png\"}\r\n                    title={props.nombre}\r\n                />\r\n                : <div style={{ height: 140, display: \"table\", textAlign: \"center\", width: \"100%\" }}>\r\n                    <div style={{ display: \"table-cell\", margin: \"auto\", verticalAlign: \"middle\" }}>\r\n                        <VisibilityOff fontSize=\"large\" />\r\n                    </div>\r\n                </div>}\r\n            <CardContent>\r\n                <Typography variant=\"subtitle2\">{props.nombre}</Typography>\r\n                <Typography variant=\"body1\" style={{ whiteSpace: \"pre-wrap\" }} >{props.descripcion}</Typography>\r\n            </CardContent>\r\n        </CardActionArea>\r\n        {props.habilitado\r\n            && <CardActions style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <IconButton\r\n                    onClick={props.onItemAction}\r\n                    disabled={props.loading === \"pause\"}\r\n                    name=\"pause\"\r\n                    value={props.id}\r\n                    color={paused_color}\r\n                    title={props.paused ? \"No Disponible\" : \"Disponible\"}\r\n                >\r\n                    {props.loading === \"pause\"\r\n                        ? <CircularProgress size={20} color={paused_color} />\r\n                        : (props.paused\r\n                            ? <Pause fontSize=\"small\" color=\"inherit\" />\r\n                            : <PlayArrow fontSize=\"small\" color=\"inherit\" />)\r\n                    }\r\n                </IconButton>\r\n                <div style={{ flex: 1, textAlign: \"right\" }}>\r\n                    {(props.loading === \"left\" || props.loading === \"right\")\r\n                        ? <CircularProgress size={20} style={{ marginRight: 40 }} />\r\n                        : (<React.Fragment>\r\n                            <IconButton onClick={props.onItemAction} value={props.id} name=\"left\" >\r\n                                <ArrowLeft />\r\n                            </IconButton>\r\n                            <IconButton onClick={props.onItemAction} value={props.id} name=\"right\" >\r\n                                <ArrowRight />\r\n                            </IconButton>\r\n                        </React.Fragment>)}\r\n                </div>\r\n            </CardActions>\r\n        }\r\n    </Card>)\r\n}","import React from \"react\";\r\nimport {\r\n    AppBar, Typography, Toolbar, IconButton,\r\n    Card, CardActionArea, CardContent,\r\n    Menu, MenuItem, CircularProgress\r\n} from \"@material-ui/core\";\r\nimport {\r\n    MoreVert, AddCircleOutline,\r\n    ArrowUpward, ArrowDownward\r\n} from \"@material-ui/icons\";\r\nimport Item from \"./Item\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        menuEl: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleMenu = this.handleMenu.bind(this);\r\n        this.handleMenuClose = this.handleMenuClose.bind(this);\r\n    }\r\n    handleMenu(event) {\r\n        this.setState({ menuEl: event.target });\r\n    }\r\n    handleMenuClose() {\r\n        this.setState({ menuEl: null });\r\n    }\r\n    render() {\r\n        const { nombre, items, id, loading, loading_action } = this.props;\r\n        console.info(\"Group \" + id + \" rendered\");\r\n        const { menuEl } = this.state;\r\n\r\n        return (<div style={{ width: \"calc(100% - 40px)\", padding: \"10px 20px\" }} id={\"GROUP-ROOT-\" + id}>\r\n            <AppBar position=\"relative\" color=\"default\">\r\n                <Toolbar>\r\n                    {loading_action\r\n                        ? <div style={{ marginRight: 10 }}>\r\n                            <CircularProgress size={20} />\r\n                        </div>\r\n                        : <div style={{ marginRight: 10 }}>\r\n                            <IconButton onClick={this.props.onGroupAction} name=\"up\" value={id}>\r\n                                <ArrowUpward fontSize=\"small\" />\r\n                            </IconButton>\r\n                            <IconButton onClick={this.props.onGroupAction} name=\"down\" value={id}>\r\n                                <ArrowDownward fontSize=\"small\" />\r\n                            </IconButton>\r\n                        </div>}\r\n                    <Typography variant=\"h6\" color=\"inherit\" style={{ flexGrow: 1 }}>\r\n                        {nombre} ({(items && items.length) || 0} items)\r\n                    </Typography>\r\n                    <IconButton disabled={loading} onClick={this.handleMenu}>\r\n                        {loading ? <CircularProgress size={20} color=\"inherit\" /> : <MoreVert />}\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div style={{ width: \"100%\", overflow: \"auto\", whiteSpace: \"nowrap\", scrollBehavior: \"smooth\" }} id={\"GROUP-CONTAINER-\" + id}>\r\n                <Card style={{ display: \"inline-block\", width: 200, margin: 10 }}>\r\n                    <CardActionArea style={{ height: 285, textAlign: \"center\" }} component=\"button\" value={\"NUEVO~\" + id} onClick={this.props.onItemClick} >\r\n                        <CardContent>\r\n                            <AddCircleOutline fontSize=\"large\" />\r\n                            <Typography variant=\"h6\">NUEVO</Typography>\r\n                        </CardContent>\r\n                    </CardActionArea>\r\n                </Card>\r\n\r\n                {items && items.sort((a, b) => a.orden - b.orden)\r\n                    .map(p => (<Item\r\n                        {...p}\r\n                        onItemClick={this.props.onItemClick}\r\n                        onItemAction={this.props.onItemAction}\r\n                        key={p.id}\r\n                    />))}\r\n            </div>\r\n            <Menu\r\n                anchorEl={menuEl}\r\n                anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                open={Boolean(menuEl)}\r\n                onClose={this.handleMenuClose}\r\n                onClick={this.handleMenuClose}\r\n            >\r\n                <MenuItem value={id} onClick={this.props.onGroupEdit}>Editar</MenuItem>\r\n                <MenuItem value={id} onClick={this.props.onGroupDelete}>Eliminar</MenuItem>\r\n            </Menu >\r\n        </div>)\r\n    }\r\n}","export function ReadImgAsUrl(file) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (file.type.indexOf(\"image\") < 0)\r\n            return reject({ message: \"El archivo no es una imagen\" });\r\n        var bytes = file.size;\r\n        var mbs = (bytes * 9.5367431640625e-7).round(2);\r\n        if (mbs > 5) return reject({\r\n            message: `Solo se pueden subir imagenes de hasta 15mb. Imagen actual (${mbs} MB)`\r\n        });\r\n\r\n        var reader = new FileReader();\r\n        reader.onload = (e) => resolve(e.target.result);\r\n        reader.onerror = reject;\r\n        reader.readAsDataURL(file);\r\n    });\r\n}\r\nexport function ImgFileToObject(file) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (file.type.indexOf(\"image\") < 0)\r\n            return reject({ message: \"El archivo no es una imagen\" });\r\n        var bytes = file.size;\r\n        var mbs = (bytes * 9.5367431640625e-7).round(2);\r\n        if (mbs > 5) return reject({\r\n            message: `Solo se pueden subir imagenes de hasta 15mb. Imagen actual (${mbs} MB)`\r\n        });\r\n\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            resolve({\r\n                base64: base64ArrayBuffer(event.target.result),\r\n                ext: file.type.split(\"/\")[1]\r\n            });\r\n        }\r\n        reader.onerror = reject;\r\n        reader.readAsArrayBuffer(file);\r\n    });\r\n}\r\n\r\nfunction base64ArrayBuffer(arrayBuffer) {\r\n    var base64 = ''\r\n    var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\n\r\n    var bytes = new Uint8Array(arrayBuffer);\r\n    var byteLength = bytes.byteLength;\r\n    var byteRemainder = byteLength % 3;\r\n    var mainLength = byteLength - byteRemainder;\r\n\r\n    var a, b, c, d\r\n    var chunk\r\n\r\n    // Main loop deals with bytes in chunks of 3\r\n    for (var i = 0; i < mainLength; i = i + 3) {\r\n        // Combine the three bytes into a single integer\r\n        chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\r\n\r\n        // Use bitmasks to extract 6-bit segments from the triplet\r\n        a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\r\n        b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\r\n        c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\r\n        d = chunk & 63               // 63       = 2^6 - 1\r\n\r\n        // Convert the raw binary segments to the appropriate ASCII encoding\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\r\n    }\r\n\r\n    // Deal with the remaining bytes and padding\r\n    if (byteRemainder === 1) {\r\n        chunk = bytes[mainLength]\r\n\r\n        a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\r\n\r\n        // Set the 4 least significant bits to zero\r\n        b = (chunk & 3) << 4 // 3   = 2^2 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + '=='\r\n    } else if (byteRemainder === 2) {\r\n        chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\r\n\r\n        a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\r\n        b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\r\n\r\n        // Set the 2 least significant bits to zero\r\n        c = (chunk & 15) << 2 // 15    = 2^4 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + '='\r\n    }\r\n    return base64\r\n}","import React from \"react\";\r\nimport { TextField, InputAdornment, CircularProgress, Typography } from \"@material-ui/core\";\r\nimport { ReportProblem } from \"@material-ui/icons\";\r\n\r\nvar timeout;\r\nexport default function Input(props) {\r\n    function onChange(event) {\r\n        const { type, value } = event.currentTarget;\r\n        props.onChange(event);\r\n        var validated = true;\r\n        if (type === \"number\") {\r\n            validated = (value !== null && value !== undefined) &&\r\n                value.toString().length\r\n                && !isNaN(+value);\r\n        }\r\n        if (timeout) clearTimeout(timeout);\r\n        if (props.onUpdate && validated) {\r\n            timeout = setTimeout(() => {\r\n                props.onUpdate(props.name, type === \"number\" ? parseFloat(value) : value)\r\n            }, 1500);\r\n        }\r\n    }\r\n\r\n    var fb = props.feedback[props.name];\r\n    var error = fb && fb !== \"loading\";\r\n    var visible_props = {\r\n        InputProps: fb && (\r\n            fb === \"loading\"\r\n                ? {\r\n                    endAdornment: (<InputAdornment>\r\n                        <CircularProgress title=\"Guardando...\" color=\"primary\" size={20} />\r\n                    </InputAdornment>)\r\n                }\r\n                : {\r\n                    endAdornment: (<InputAdornment>\r\n                        <ReportProblem color=\"secondary\" />\r\n                    </InputAdornment>)\r\n                }\r\n        )\r\n    }\r\n    if (error) {\r\n        visible_props.helperText = <Typography variant=\"caption\" color=\"secondary\">{fb}</Typography>\r\n    }\r\n    return (\r\n        <TextField\r\n            type={props.type}\r\n            style={{ marginTop: 10, marginBottom: 10 }}\r\n            fullWidth\r\n            onChange={onChange}\r\n            value={props.value}\r\n            label={props.label}\r\n            name={props.name}\r\n            multiline={props.multiline}\r\n            inputProps={props.inputProps}\r\n            {...visible_props}\r\n            color={error ? \"secondary\" : \"primary\"}\r\n        />);\r\n}","import React from \"react\";\r\nimport { Button, Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { AddAPhoto } from \"@material-ui/icons\";\r\n\r\nexport default function (props) {\r\n    function onClick() {\r\n        var input = document.getElementById(\"img-src-input-hidden\");\r\n        input.click();\r\n    }\r\n    const IMG_STYLE = { maxHeight: props.height, maxWidth: \"100%\", cursor: \"pointer\" };\r\n    if (props.border) IMG_STYLE.border = \"1px dotted #949494\";\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <input type=\"file\" id=\"img-src-input-hidden\" onChange={props.onChange} hidden accept=\"image/*\" />\r\n            {props.loading\r\n                ? (<div style={{ height: props.height, maxWidth: \"100%\", margin: \"auto\", display: \"table\" }}>\r\n                    <div style={{ display: \"table-cell\", verticalAlign: \"middle\", height: \"100%\" }}>\r\n                        <CircularProgress color=\"primary\" size={100} />\r\n                    </div>\r\n                </div>)\r\n                : (props.src\r\n                    ? (<img\r\n                        onClick={onClick}\r\n                        title=\"Click para cambiar la foto. O arrastra tu imagen.\"\r\n                        src={props.src}\r\n                        alt={props.name}\r\n                        style={IMG_STYLE}\r\n                    />)\r\n                    : (<div style={{ height: props.height, maxWidth: \"100%\", margin: \"auto\", display: \"table\" }}>\r\n                        <Button\r\n                            variant={props.border ? \"outlined\" : \"text\"}\r\n                            type=\"button\"\r\n                            onClick={onClick}\r\n                            style={{ display: \"table-cell\", verticalAlign: \"middle\", height: \"100%\" }}\r\n                        >\r\n                            <AddAPhoto fontSize=\"large\" />\r\n                            <Typography variant=\"h6\">Agrega una foto</Typography>\r\n                        </Button>\r\n                    </div>))\r\n            }\r\n        </React.Fragment >);\r\n}","import React from \"react\";\r\nimport {\r\n    Dialog, DialogContent, TextField, FormControlLabel, Switch,\r\n    Button, CircularProgress, Checkbox, Typography, InputAdornment,\r\n    DialogActions, withStyles\r\n} from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { ReadImgAsUrl, ImgFileToObject } from \"../../Services/ImageReader\";\r\nimport UploadImage from \"../UploadImage\";\r\n\r\nexport default withStyles({\r\n    paper: {\r\n        maxHeight: \"calc(100% - 20px)\"\r\n    }\r\n})(class extends React.PureComponent {\r\n    state = {\r\n        id: null,\r\n        idGrupo: null,\r\n        nombre: \"\",\r\n        descripcion: \"\",\r\n        pvp: \"\",\r\n        imgSrc: \"\",\r\n        pagaIva: false,\r\n        habilitado: true,\r\n\r\n        error: null,\r\n        loading: \"INITIAL\"\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleCheck = this.handleCheck.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n\r\n        this.handlePhotoChange = this.handlePhotoChange.bind(this);\r\n        this.handlePhotoDrop = this.handlePhotoDrop.bind(this);\r\n        this.handlePhotoOver = this.handlePhotoOver.bind(this);\r\n\r\n        const { info } = this.props.match.params;\r\n        if (info.indexOf(\"~\") >= 0) {\r\n            var [id, idGrupo] = info.split(\"~\");\r\n            this.state.id = id;\r\n            this.state.idGrupo = +idGrupo;\r\n        } else {\r\n            this.state.id = info;\r\n        }\r\n        if (this.state.id === \"NUEVO\") this.state.loading = false;\r\n    }\r\n    componentWillMount() {\r\n        if (this.state.id === \"NUEVO\") return;\r\n        API.GetProduct(this.state.id).then(item => {\r\n            this.setState({ ...item, loading: false });\r\n        }).catch(error => this.setState({ error, loading: \"INITIAL-FAILED\" }));\r\n    }\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck(event) {\r\n        const { name, checked } = event.currentTarget;\r\n        this.setState({\r\n            [name]: checked\r\n        });\r\n    }\r\n    handleClick() {\r\n        if (this.state.loading) return;\r\n        if (!(this.state.pvp && !isNaN(this.state.pvp))) return alert(\"Digite un Precio valido\");\r\n        if (!this.state.nombre) return alert(\"Agregue el nombre\");\r\n        if (!this.state.idGrupo) return alert(\"Seleccione un grupo\");\r\n        if (!this.state.imgSrc) {\r\n            var confirm = window.confirm(\"Este item no tiene una imagen, est seguro de continuar?\");\r\n            if (!confirm) return;\r\n        }\r\n        this.setState({ loading: true, error: null });\r\n        if (this.state.imgFile) {\r\n            ImgFileToObject(this.state.imgFile)\r\n                .then(this._save.bind(this))\r\n                .catch(error => this.setState({ error, loading: false }))\r\n        } else {\r\n            this._save();\r\n        }\r\n    }\r\n    _save(imgFile) {\r\n        API.SaveProduct({ ...this.state, imgFile })\r\n            .then(x => {\r\n                try {\r\n                    this.setState({ loading: false, error: null });\r\n                    this.props.onClose({ ...this.state, ...x });\r\n                } catch (ex) { }\r\n            }).catch(error => this.setState({ error, loading: false }));\r\n    }\r\n    handleDelete() {\r\n        if (this.state.loading) return;\r\n        var confirmed = window.confirm(\"Esta seguro de eliminar este registro?\");\r\n        if (!confirmed) return;\r\n        this.setState({ loading: true, error: null });\r\n        API.DeleteProduct(this.state)\r\n            .then(x => {\r\n                this.props.onClose({\r\n                    id: this.state.id,\r\n                    delete: true\r\n                })\r\n            }).catch(error =>\r\n                this.setState({ error, loading: false })\r\n            );\r\n    }\r\n    handleClose(event) {\r\n        if (this.state.loading && event) return event.preventDefault();\r\n        this.props.onClose();\r\n    }\r\n    handlePhotoChange(event) {\r\n        const { files } = event.currentTarget;\r\n        if (!(files && files.length)) return;\r\n        const imgFile = files[0];\r\n        ReadImgAsUrl(imgFile)\r\n            .then(imgSrc => this.setState({ imgSrc, imgFile }))\r\n            .catch(ex => alert(\"Ocurrio un problema al cargar tu imagen: \" + ex.message));\r\n    }\r\n    handlePhotoDrop(event) {\r\n        event.preventDefault();\r\n        const { files } = event.dataTransfer;\r\n        if (!(files && files.length)) return;\r\n        const imgFile = files[0];\r\n        ReadImgAsUrl(imgFile)\r\n            .then(imgSrc => this.setState({ imgSrc, imgFile }))\r\n            .catch(ex => alert(\"Ocurrio un problema al cargar tu imagen: \" + ex.message));\r\n        const div = document.getElementById(\"product-dialog-container\");\r\n        div.classList.remove(\"with-drop-view\");\r\n    }\r\n    handlePhotoEnter(e) {\r\n        var div = document.getElementById(\"product-dialog-container\");\r\n        div.classList.add(\"with-drop-view\");\r\n        e.preventDefault();\r\n    }\r\n    handlePhotoLeave(e) {\r\n        e.preventDefault();\r\n    }\r\n    handlePhotoOver(e) {\r\n        e.dataTransfer.dropEffect = \"copy\";\r\n        e.preventDefault();\r\n        if (this.timeout !== undefined) clearTimeout(this.timeout);\r\n        this.timeout = setTimeout(() => {\r\n            var div = document.getElementById(\"product-dialog-container\");\r\n            div.classList.remove(\"with-drop-view\")\r\n        }, 200);\r\n        console.info(\"dragenter\");\r\n    }\r\n    render() {\r\n        const { state } = this;\r\n        console.info(\"product dialog rendered\");\r\n        let pvp = isNaN(this.state.pvp) ? 0 : +this.state.pvp;\r\n        const precioFinal = pvp\r\n            ? (pvp + (state.pagaIva\r\n                ? ((pvp * (this.props.porcentajeIVA || 12)) / 100)\r\n                : 0)).round(2)\r\n            : 0;\r\n\r\n        if (state.loading === \"INITIAL\")\r\n            return (<Dialog open={true}>\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 150, width: 500, height: 300 }}>\r\n                    <CircularProgress size={70} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n        if (state.loading === \"INITIAL-FAILED\")\r\n            return (<Dialog onClose={event => this.handleClose()} open={true}>\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 150, width: 500, height: 300 }}>\r\n                    <Typography color=\"secondary\" variant=\"h5\">Hubo un error al cargar la informacin</Typography>\r\n                    <Typography color=\"secondary\" variant=\"h6\">{state.error.message}</Typography>\r\n                    <Typography color=\"secondary\" variant=\"body1\">{state.error.code} {state.error.status}</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n\r\n        return (<Dialog\r\n            id=\"product-dialog-container\"\r\n            onDrop={this.handlePhotoDrop}\r\n            onDragOver={this.handlePhotoOver}\r\n            onDragEnter={this.handlePhotoEnter}\r\n            onDragLeave={this.handlePhotoLeave}\r\n            open={true}\r\n            onClose={this.handleClose}\r\n            classes={{\r\n                paper: this.props.classes.paper\r\n            }}\r\n        >\r\n            <DialogContent style={{ textAlign: \"center\", paddingTop: 0, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n                <TextField\r\n                    autoFocus={true}\r\n                    value={state.nombre}\r\n                    name=\"nombre\"\r\n                    onChange={this.handleInput}\r\n                    label=\"Nombre\"\r\n                    variant=\"standard\"\r\n                    fullWidth\r\n                    style={style.textField}\r\n                />\r\n                <UploadImage\r\n                    onChange={this.handlePhotoChange}\r\n                    src={state.imgSrc}\r\n                    name={state.nombre}\r\n                    height={\"calc(100vh - 430px)\"}\r\n                />\r\n                <TextField\r\n                    value={(state.descripcion === undefined || state.descripcion === null)\r\n                        ? \"\"\r\n                        : state.descripcion}\r\n                    name=\"descripcion\"\r\n                    onChange={this.handleInput}\r\n                    inputProps={{\r\n                        rows: 3\r\n                    }}\r\n                    label=\"Descripcion\"\r\n                    variant=\"outlined\"\r\n                    multiline\r\n                    fullWidth\r\n                    style={style.textField}\r\n                />\r\n\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <TextField\r\n                        value={state.pvp}\r\n                        name=\"pvp\"\r\n                        type=\"number\"\r\n                        label=\"Precio sin impuestos\"\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                        onChange={this.handleInput}\r\n                        style={{ ...style.textField, flex: 1 }}\r\n                        InputProps={{\r\n                            endAdornment: <InputAdornment position=\"end\">\r\n                                <FormControlLabel\r\n                                    control={<Checkbox\r\n                                        color=\"primary\"\r\n                                        name=\"pagaIva\"\r\n                                        checked={state.pagaIva}\r\n                                        onChange={this.handleCheck}\r\n                                    />}\r\n                                    label=\"IVA\"\r\n                                />\r\n                            </InputAdornment>\r\n                        }}\r\n                    />\r\n                    <Typography variant=\"body2\" style={{ marginLeft: 15, paddingTop: 15, width: 130, paddingLeft: 5, paddingRight: 5 }}>\r\n                        PRECIO FINAL: ${precioFinal.toFixed(2)}\r\n                    </Typography>\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <TextField\r\n                        style={{ ...style.textField, flex: 1 }}\r\n                        value={state.idGrupo || 1}\r\n                        onChange={this.handleInput}\r\n                        name=\"idGrupo\"\r\n                        label=\"Grupo\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                    >\r\n                        {this.props.grupos && this.props.grupos.map(g => <option key={g.id} value={g.id}>\r\n                            {g.nombre}\r\n                        </option>)}\r\n                    </TextField>\r\n\r\n                    <FormControlLabel\r\n                        style={{ marginLeft: 15, marginRight: 0, width: 130 }}\r\n                        label={state.habilitado ? \"Habilitado\" : \"Deshabilitado\"}\r\n                        control={<Switch\r\n                            checked={state.habilitado}\r\n                            onChange={this.handleCheck}\r\n                            name=\"habilitado\" />}\r\n                    />\r\n                </div>\r\n            </DialogContent>\r\n\r\n            {state.error && <Typography style={{ width: \"100%\", marginTop: 10, textAlign: \"center\" }} color=\"secondary\">{state.error.message}</Typography>}\r\n\r\n            <DialogActions>\r\n                <Button\r\n                    fullWidth\r\n                    style={{ ...style.textField, flex: 1 }}\r\n                    disabled={state.loading}\r\n                    variant=\"outlined\"\r\n                    type=\"button\"\r\n                    onClick={this.handleClick} color=\"primary\">\r\n                    {state.loading\r\n                        ? <CircularProgress size={30} color=\"primary\" />\r\n                        : \"GUARDAR\"}\r\n                </Button>\r\n\r\n                {state.id !== \"NUEVO\"\r\n                    ? <Button disabled={state.loading} variant=\"outlined\" type=\"button\" onClick={this.handleDelete} color=\"secondary\">\r\n                        {state.loading\r\n                            ? <CircularProgress size={30} color=\"secondary\" />\r\n                            : \"ELIMINAR\"}\r\n                    </Button>\r\n                    : null}\r\n            </DialogActions>\r\n        </Dialog >)\r\n    }\r\n})\r\n\r\nconst style = {\r\n    textField: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, CircularProgress, TextField, Button, Typography } from \"@material-ui/core\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        input: \"\",\r\n        inputLabel: \"\"\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n\r\n        this.state.input = props.value || \"\";\r\n        this.state.inputLabel = props.label || \"\";\r\n    }\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        if (!this.state.input) return this.setState({error : \"El texto no puede estar vaco.\"});\r\n            this.setState({ loading: true });\r\n        if (!this.props.onSubmit) return alert(\"You Must especify TextPrompt.onSubmit event\");\r\n        this.props.onSubmit(this.state.input, error => {\r\n            this.setState({ error, loading: false });\r\n        });\r\n    }\r\n    handleClose(event) {\r\n        if (this.state.loading) return event.preventDefault();\r\n        this.props.onSubmit(undefined, error => {\r\n            this.setState({ error, loading: false });\r\n        });\r\n    }\r\n    render() {\r\n        console.info(\"TextPrompt rendering\");\r\n        const { state } = this;\r\n\r\n        return (<Dialog maxWidth=\"lg\" open={true} onClose={this.handleClose} >\r\n            <DialogContent style={{ width: 300 }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <TextField\r\n                        value={state.input}\r\n                        name=\"input\"\r\n                        onChange={this.handleInput}\r\n                        label={state.inputLabel}\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                        style={style.textField}\r\n                        autoFocus={true}\r\n                    />\r\n                    {state.error && <Typography color=\"secondary\" variant=\"body2\">{state.error}</Typography>}\r\n                    <Button\r\n                        fullWidth\r\n                        variant=\"outlined\"\r\n                        disabled={state.loading}\r\n                        type=\"submit\"\r\n                        color=\"primary\">\r\n                        {state.loading\r\n                            ? <CircularProgress size={30} color=\"primary\" />\r\n                            : \"GUARDAR\"}\r\n                    </Button>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>)\r\n    }\r\n}\r\n\r\nconst style = {\r\n    textField: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n}","import React from \"react\";\r\nimport Group from \"./Group\";\r\nimport API from \"../../Services/API\";\r\nimport { Toolbar, AppBar, Typography, CardActionArea, CircularProgress } from \"@material-ui/core\";\r\nimport { AddCircleOutline } from \"@material-ui/icons\";\r\nimport { Route } from \"react-router-dom\";\r\nimport ProductDialog from \"./ProductDialog\";\r\nimport TextPrompt from \"../TextPrompt\";\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        grupos: [],\r\n        loading: true,\r\n        // Habilita/deshabilita TextPrompt del grupo\r\n        currentGroup: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n\r\n        this.deleteGroup = this.deleteGroup.bind(this);\r\n        this.editGroup = this.editGroup.bind(this);\r\n        this.editGroupEnding = this.editGroupEnding.bind(this);\r\n        this.updateGrupo = this.updateGrupo.bind(this);\r\n        this.handleGroupAction = this.handleGroupAction.bind(this);\r\n\r\n        this.handleItemClick = this.handleItemClick.bind(this);\r\n        this.handleItemAction = this.handleItemAction.bind(this);\r\n        this.editItemEnd = this.editItemEnd.bind(this);\r\n        this.updateProduct = this.updateProduct.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        API.GetGroups().then(rawGroups => {\r\n            var grupos = rawGroups.sort((a, b) => a.orden - b.orden)\r\n                .map(x => {\r\n                    if (!x.items) x.items = [];\r\n                    x.items = x.items.sort((a, b) => a.orden - b.orden);\r\n                    return x;\r\n                });\r\n            this.setState({ grupos, loading: false });\r\n        }).catch(error => {\r\n            this.setState({ loading: false, error });\r\n        });\r\n    }\r\n\r\n    handleItemAction(event) {\r\n        const id = +event.currentTarget.value;\r\n        const action = event.currentTarget.name;\r\n        this.updateProduct(\"loading\", { id, loading: action });\r\n        API.RequestActionProduct({ id, action })\r\n            .then(items => {\r\n                for (let i = 0; i < items.length; i++) {\r\n                    const item = items[i];\r\n                    this.updateProduct(null, { ...item, loading: null });\r\n                }\r\n            }).catch(ex => {\r\n                alert(ex.message);\r\n                this.updateProduct(\"loading\", { id, loading: null });\r\n            });\r\n    }\r\n    handleItemClick(event) {\r\n        const id = event.currentTarget.value;\r\n        if (id.indexOf(\"NUEVO\") >= 0) {\r\n            this.updateProduct(\"loading\", { id: +id, loading: true })\r\n        }\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    editItemEnd(product) {\r\n        if (product) {\r\n            this.updateProduct(null, product);\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    updateProduct(prop_name, product) {\r\n        this.setState(prev => {\r\n            product.idGrupo = +product.idGrupo;\r\n            const state = { ...prev };\r\n            state.grupos = prev.grupos;\r\n            var grupo = state.grupos.find(x => x.items && x.items.find(i => i.id === product.id));\r\n            var grupo_a_actualizar;\r\n\r\n            if (product.delete) {\r\n                if (grupo) {\r\n                    let index = grupo.items.indexOf(\r\n                        grupo.items.find(x => x.id === product.id)\r\n                    );\r\n                    grupo.items.splice(index, 1);\r\n                    grupo.items = [...grupo.items].sort((a, b) => a.orden - b.orden);\r\n                }\r\n                return state;\r\n            }\r\n\r\n            if (grupo) {\r\n                let item = grupo.items.find(x => x.id === product.id);\r\n                let index = grupo.items.indexOf(item);\r\n                if (product.idGrupo && product.idGrupo !== grupo.id) {\r\n                    // CAMBIO DE GRUPO\r\n                    grupo.items.splice(index, 1);\r\n                    grupo.items = [...grupo.items].sort((a, b) => a.orden - b.orden);\r\n                    grupo_a_actualizar = state.grupos.find(x => x.id === product.idGrupo);\r\n                    if (grupo_a_actualizar) {\r\n                        grupo_a_actualizar.items.push(product);\r\n                        this.scrollGroupToItem(grupo_a_actualizar.id, product.id);\r\n                    }\r\n                } else {\r\n                    grupo_a_actualizar = grupo;\r\n                    if (prop_name) {\r\n                        item[prop_name] = product[prop_name];\r\n                    } else {\r\n                        var new_element = { ...item };\r\n                        for (const key in product) {\r\n                            if (product.hasOwnProperty(key)) {\r\n                                new_element[key] = product[key];\r\n                            }\r\n                        }\r\n                        grupo.items[index] = new_element;\r\n                    }\r\n                }\r\n            } else {\r\n                // ITEM NO EXISTE\r\n                grupo_a_actualizar = state.grupos.find(x => x.id === product.idGrupo);\r\n                if (grupo_a_actualizar) {\r\n                    grupo_a_actualizar.items.push(product);\r\n                    this.scrollGroupToItem(grupo_a_actualizar.id, product.id);\r\n                }\r\n            }\r\n            if (grupo_a_actualizar) {\r\n                grupo_a_actualizar.items = [...grupo_a_actualizar.items].sort((a, b) => a.orden - b.orden);\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n\r\n    deleteGroup(event) {\r\n        const id = +event.currentTarget.value;\r\n        if (!id) return;\r\n        var confirmed = window.confirm(\"Esta seguro de borrar este registro?\");\r\n        if (!confirmed) return;\r\n        this.updateGrupo(\"loading\", { id, loading: true });\r\n        API.DeleteGroup({ id })\r\n            .then(x => {\r\n                this.setState(prev => {\r\n                    const state = { ...prev };\r\n                    state.grupos = prev.grupos;\r\n                    var exists = state.grupos.find(x => x.id === id);\r\n                    if (exists) state.grupos.splice(state.grupos.indexOf(exists), 1);\r\n                    return state.grupos;\r\n                });\r\n            }).catch(ex => {\r\n                alert(ex.message);\r\n                this.updateGrupo(\"loading\", { id, loading: false });\r\n            });\r\n    }\r\n    editGroup(event) {\r\n        const { value } = event.currentTarget;\r\n        if (value === \"NUEVO\")\r\n            return this.setState({ currentGroup: {} });\r\n        var group = this.state.grupos.find(x => x.id === (+value));\r\n        this.setState({\r\n            currentGroup: {\r\n                id: group.id,\r\n                value: group.nombre\r\n            }\r\n        });\r\n    }\r\n    handleGroupAction(event) {\r\n        const id = +event.currentTarget.value;\r\n        const action = event.currentTarget.name;\r\n        this.updateGrupo(\"loading_action\", { id, loading_action: true });\r\n\r\n        API.RequestActionGroup({ id, action })\r\n            .then(results => {\r\n                results.forEach(g => {\r\n                    this.updateGrupo(null, { ...g, loading_action: null });\r\n                });\r\n                this.scrollToGroupId(id);\r\n            }).catch(ex => {\r\n                this.updateGrupo(\"loading_action\", { id, loading_action: null });\r\n                alert(ex.message);\r\n            })\r\n    }\r\n    editGroupEnding(nombre, onError) {\r\n        if (!nombre) return this.setState({ currentGroup: null });\r\n        const grupo = this.state.currentGroup;\r\n        if (grupo.value === nombre) return this.setState({ currentGroup: null });\r\n\r\n        var exists = this.state.grupos.find(a =>\r\n            a.id !== grupo.id &&\r\n            a.nombre.toUpperCase() === nombre.toUpperCase()\r\n        );\r\n        if (exists) return onError(\"Este nombre ya existe\");\r\n        API.SaveGroup({ id: grupo.id, nombre })\r\n            .then(this.updateGrupo.bind(this, \"nombre\"))\r\n            .catch(err => onError(err.message));\r\n    }\r\n    scrollToGroupId(ID, then) {\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => {\r\n                var div = document.getElementById(\"product-div\");\r\n                var groupDIV = document.getElementById(\"GROUP-ROOT-\" + ID);\r\n                if (!groupDIV) return;\r\n                var scrollTop = groupDIV.offsetTop - 70;\r\n                div.scrollTop = scrollTop;\r\n                if (then) then();\r\n            })\r\n        });\r\n    }\r\n    scrollGroupToItem(idGrupo, idProducto) {\r\n        this.scrollToGroupId(idGrupo, () => {\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => {\r\n                    var div = document.getElementById(\"GROUP-CONTAINER-\" + idGrupo);\r\n                    var item = document.getElementById(\"ITEM-CONTAINER-\" + idProducto);\r\n                    if (!item) return;\r\n                    div.scrollLeft = item.offsetLeft;\r\n                });\r\n            }, 300);\r\n        })\r\n    }\r\n    updateGrupo(changed_prop, group) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.grupos = prev.grupos;\r\n            var exists = state.grupos.find(x => x.id === group.id);\r\n            if (exists) {\r\n                if (changed_prop) {\r\n                    var props = changed_prop.split(\",\");\r\n                    props.forEach(changed_prop => {\r\n                        exists[changed_prop] = group[changed_prop];\r\n                    });\r\n                } else {\r\n                    group.items = exists.items;\r\n                    state.grupos[state.grupos.indexOf(exists)] = { ...exists, ...group };\r\n                }\r\n            } else {\r\n                state.grupos.push(group);\r\n                this.scrollToGroupId(group.id);\r\n            }\r\n            state.currentGroup = null;\r\n            return state;\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        console.info(\"Product view rendered\");\r\n\r\n        const {\r\n            grupos, loading, error,\r\n            currentGroup\r\n        } = this.state;\r\n\r\n\r\n        if (loading) {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\">CARGANDO...</Typography>\r\n            </div>)\r\n        }\r\n\r\n\r\n        if (error) {\r\n            return (<div style={{ textAlign: \"center\", paddingTop: 200 }}>\r\n                <Typography variant=\"subtitle1\"> Ocurrio un error</Typography>\r\n                <Typography variant=\"body1\">{error.message}</Typography>\r\n                <Typography variant=\"caption\">{error.code} {error.status}</Typography>\r\n            </div>)\r\n        }\r\n\r\n\r\n        return (<div style={{ height: \"100%\", overflow: \"auto\", scrollBehavior: \"smooth\" }} id=\"product-div\">\r\n\r\n            <div style={{ width: \"calc(100% - 40px)\", padding: 20 }} >\r\n                <AppBar position=\"relative\" color=\"default\">\r\n                    <CardActionArea onClick={this.editGroup} value=\"NUEVO\">\r\n                        <Toolbar>\r\n                            <AddCircleOutline style={{ marginRight: 10 }} />\r\n                            <Typography variant=\"h6\" color=\"inherit\" style={{ flexGrow: 1 }}>\r\n                                NUEVO GRUPO\r\n                        </Typography>\r\n                        </Toolbar>\r\n                    </CardActionArea>\r\n                </AppBar>\r\n            </div>\r\n\r\n\r\n            {grupos && grupos.length\r\n                ? grupos.sort((a, b) => a.orden - b.orden).map(x => (<Group\r\n                    onGroupAction={this.handleGroupAction}\r\n                    onGroupEdit={this.editGroup}\r\n                    onGroupDelete={this.deleteGroup}\r\n\r\n                    onItemAction={this.handleItemAction}\r\n                    onItemClick={this.handleItemClick}\r\n                    key={x.id}\r\n                    {...x}\r\n                />))\r\n                : null}\r\n\r\n            <Route path={this.props.match.path + \"/:info\"}\r\n                render={props => <ProductDialog\r\n                    porcentajeIVA={12}\r\n                    grupos={grupos.map(d => ({ id: d.id, nombre: d.nombre }))}\r\n                    onClose={this.editItemEnd}\r\n                    {...props}\r\n                />}\r\n            />\r\n\r\n            {currentGroup && <TextPrompt label=\"Nombre del Grupo\" {...currentGroup} onSubmit={this.editGroupEnding} />}\r\n\r\n        </div>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport UploadImage from \"../UploadImage\";\r\nimport { ReadImgAsUrl, ImgFileToObject } from \"../../Services/ImageReader\";\r\nimport UpdateableInput from \"./UpdateableInput\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        // {key : \"cargando\" | errMessage}\r\n        feedback: {}\r\n    }\r\n    // aqui almaceno los timeouts\r\n    timeouts = {}\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleUpdateProp = this.handleUpdateProp.bind(this);\r\n        this.handleLogo = this.handleLogo.bind(this);\r\n        const { configuracion } = props;\r\n        if (configuracion) {\r\n            for (const key in configuracion) {\r\n                if (configuracion.hasOwnProperty(key)) {\r\n                    this.state[key] = configuracion[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        if (this.state.feedback[name] === \"loading\") return;\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n    handleUpdateProp(name, value, avoidCatch) {\r\n        if (this.state.feedback[name] === \"loading\") return;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.feedback = { ...state.feedback, [name]: \"loading\" };\r\n            return state;\r\n        });\r\n        var promise = API.setConfigInfo({\r\n            [name]: value || this.state[name]\r\n        }).then(x =>\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.feedback = { ...state.feedback, [name]: \"loading\" };\r\n                delete state.feedback[name];\r\n                return state;\r\n            })\r\n        )\r\n        if (avoidCatch) return promise;\r\n        promise.catch(err =>\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.feedback = { ...state.feedback, [name]: err.message };\r\n                return state;\r\n            })\r\n        );\r\n    }\r\n    handleLogo(event) {\r\n        if (this.state.feedback.logoSrc === \"loading\") return;\r\n        const { files } = event.currentTarget;\r\n        if (!(files && files.length)) return;\r\n        const logoFile = files[0];\r\n        Promise.all([\r\n            ImgFileToObject(logoFile).then(file => this.handleUpdateProp(\"logoFile\", file, true))\r\n            , ReadImgAsUrl(logoFile)\r\n        ]).then(([, logoSrc]) => {\r\n            this.setState({ logoSrc });\r\n        }).catch(ex => {\r\n            alert(\"Ocurrio un problema al cargar tu imagen: \" + ex.message);\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.feedback = { ...state.feedback };\r\n                delete state.feedback.logoSrc;\r\n                return state;\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { titulo, slogan, logoSrc,\r\n            direccion, telefono,\r\n            whatsAppMessage, whatsAppPhone,\r\n            feedback } = this.state;\r\n        return (<div>\r\n            <Grid container>\r\n                <Grid item xs={6} style={{ padding: 10 }}>\r\n\r\n                    <UpdateableInput\r\n                        label=\"Nombre de la Tienda\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={titulo || \"\"}\r\n                        name={\"titulo\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        inputProps={{ maxLength: 100 }}\r\n                    />\r\n                    <div style={{ textAlign: \"center\", padding: 10 }}>\r\n                        <UploadImage\r\n                            loading={feedback.logoSrc}\r\n                            onChange={this.handleLogo}\r\n                            src={logoSrc}\r\n                            border={true}\r\n                            name=\"Logo de la Tienda\"\r\n                            height=\"calc(100vh - 400px)\"\r\n                        />\r\n                    </div>\r\n\r\n                    <UpdateableInput\r\n                        label=\"Slogan de la Tienda\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={slogan || \"\"}\r\n                        name={\"slogan\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        inputProps={{ maxLength: 100 }}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={6} style={{ padding: 10 }}>\r\n\r\n                    <UpdateableInput\r\n                        label=\"Direccion de la Tienda\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={direccion || \"\"}\r\n                        name={\"direccion\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        multiline={true}\r\n                        inputProps={{ rows: 2, maxLength: 300 }}\r\n\r\n                    />\r\n\r\n                    <UpdateableInput\r\n                        label=\"Telefono\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={telefono || \"\"}\r\n                        name={\"telefono\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        type=\"phone\"\r\n                        inputProps={{ maxLength: 50 }}\r\n                    />\r\n\r\n                    <UpdateableInput\r\n                        label=\"Numero en Whatsapp\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={whatsAppPhone || \"\"}\r\n                        name={\"whatsAppPhone\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        type=\"phone\"\r\n                        inputProps={{ maxLength: 20 }}\r\n                    />\r\n\r\n                    <UpdateableInput\r\n                        label=\"Escribe el mensaje de Whatsapp que quieres recibir cuando seas contactado\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={whatsAppMessage || \"\"}\r\n                        name={\"whatsAppMessage\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        multiline={true}\r\n                        inputProps={{ rows: 3, maxLength: 300 }}\r\n                    />\r\n\r\n\r\n                </Grid>\r\n            </Grid>\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport { withScriptjs, GoogleMap, withGoogleMap, Polygon } from \"react-google-maps\";\r\nimport { MarkerWithLabel } from \"react-google-maps/lib/components/addons/MarkerWithLabel\";\r\nimport { Typography, Card, CardContent } from \"@material-ui/core\";\r\nimport DrawingManager from \"react-google-maps/lib/components/drawing/DrawingManager\";\r\n\r\nexport default function (props) {\r\n    const { API_KEY, ...mapProps } = props;\r\n    return (<Map\r\n        googleMapURL={`https://maps.googleapis.com/maps/api/js?key=${API_KEY || \"\"}&v=3.exp&libraries=geometry,drawing,places`}\r\n        containerElement={<div style={{ height: \"100%\" }} />}\r\n        loadingElement={<div style={{ height: `100%` }} />}\r\n        mapElement={<div style={{ height: `100%` }} />}\r\n        defaultZoom={15}\r\n        {...mapProps}\r\n    />)\r\n}\r\n\r\nconst Map = withScriptjs(withGoogleMap(props => {\r\n    const google = window.google;\r\n    const { marker, polygons, enableDrawingManager\r\n        , onPolygonComplete, onMapMounted, onPolygonClick, onPolygonMouseUp,\r\n        ...mapProps } = props;\r\n    return (<GoogleMap\r\n        {...mapProps}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n        ref={onMapMounted}\r\n    >\r\n        {marker && <MarkerWithLabel\r\n            labelAnchor={new google.maps.Point(0, 0)}\r\n            position={marker.position}\r\n        >\r\n            <Card elevation={3} color=\"secondary\" style={{ margin: 5 }}>\r\n                <CardContent style={{ maxWidth: 200, padding: 5 }}>\r\n                    <Typography variant=\"button\">{marker.label}</Typography>\r\n                </CardContent>\r\n            </Card>\r\n        </MarkerWithLabel>}\r\n\r\n        {enableDrawingManager &&\r\n            <DrawingManager\r\n                onPolygonComplete={onPolygonComplete}\r\n                defaultDrawingMode={google.maps.drawing.OverlayType.POLYGON}\r\n                defaultOptions={{\r\n                    drawingControl: true,\r\n                    drawingControlOptions: {\r\n                        position: google.maps.ControlPosition.TOP_CENTER,\r\n                        drawingModes: [\"polygon\"]\r\n                    }\r\n                }}\r\n                polygonOptions={{\r\n                    strokeColor: '#007bff',\r\n                    strokeOpacity: 0.8,\r\n                    strokeWeight: 2,\r\n                    fillColor: '#007bff',\r\n                    fillOpacity: 0.35\r\n                }}\r\n            />}\r\n\r\n        {polygons && polygons.map((p, index) => (\r\n            <Polygon\r\n                key={index}\r\n                path={p.path}\r\n                editable={p.editable}\r\n                onClick={onPolygonClick}\r\n                onMouseUp={function (event) { onPolygonMouseUp && onPolygonMouseUp(this, event, index) }}\r\n                options={{\r\n                    strokeColor: '#007bff',\r\n                    strokeOpacity: 0.8,\r\n                    strokeWeight: 2,\r\n                    fillColor: '#007bff',\r\n                    fillOpacity: 0.35\r\n                }}\r\n            />\r\n        ))}\r\n    </GoogleMap >)\r\n}));","import React from \"react\";\r\nimport { Typography, CircularProgress, Tabs, Tab, FormControlLabel, Checkbox, Menu, MenuItem } from \"@material-ui/core\";\r\nimport Geo from \"../../Services/Geo\";\r\nimport Map from \"../Map\";\r\nimport UpdateableInput from \"./UpdateableInput\";\r\nimport API from \"../../Services/API\";\r\nimport { ReportProblem, Layers, LocationOn } from \"@material-ui/icons\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        position: null,\r\n        baseTransporte: 0,\r\n        kmBaseTransporte: 0,\r\n        recargoPorKm: 0,\r\n        google_maps_key: \"\",\r\n        cobrarTransporte: false,\r\n\r\n        coberturas: [],\r\n        // esto es el modo de edicion del mapa (0=UBICACION o 1=COBERTURA)\r\n        editMode: 0,\r\n        loading: true,\r\n        defaultCenter: null,\r\n        feedback: {}\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleUpdateProp = this.handleUpdateProp.bind(this);\r\n        this.handleCheck = this.handleCheck.bind(this);\r\n\r\n        this.handleMapMounted = this.handleMapMounted.bind(this);\r\n        this.handleNewPolygon = this.handleNewPolygon.bind(this);\r\n        this.handlePolygonMouseUp = this.handlePolygonMouseUp.bind(this);\r\n        this.handleEditMode = this.handleEditMode.bind(this);\r\n        this.handleMapClick = this.handleMapClick.bind(this);\r\n\r\n\r\n        const { configuracion } = props;\r\n        if (configuracion) {\r\n            for (const k in this.state) {\r\n                if (configuracion.hasOwnProperty(k)) {\r\n                    this.state[k] = configuracion[k];\r\n                }\r\n            }\r\n        }\r\n        if (this.state.position) this.state.defaultCenter = this.state.position;\r\n        if (this.state.defaultCenter) {\r\n            this.state.loading = null;\r\n            this.state.editMode = 1;\r\n        }\r\n    }\r\n\r\n    handleUpdateProp(name, value, avoidCatch) {\r\n        if (this.state.feedback[name] === \"loading\") return;\r\n        this.updateFeedback(name, \"loading\");\r\n        var promise = API.setConfigInfo({\r\n            [name]: value === undefined ? this.state[name] : value\r\n        }).then(() => this.updateFeedback(name, null))\r\n        if (avoidCatch) return promise;\r\n        return promise.catch(err => this.updateFeedback(name, err.message));\r\n    }\r\n    updateFeedback(name, feedback) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.feedback = { ...state.feedback, [name]: feedback };\r\n            return state;\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.state.defaultCenter) {\r\n            Geo.currentPosition()\r\n                .then(defaultCenter => this.setState({ defaultCenter, loading: null }))\r\n                .catch(error => this.setState({ error, loading: \"ERROR\" }));\r\n        }\r\n    }\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck(event) {\r\n        event.preventDefault();\r\n        const { name, checked } = event.currentTarget;\r\n        var promise = this.handleUpdateProp(name, checked, true)\r\n        if (promise) promise.then(x => {\r\n            this.setState({ [name]: checked })\r\n        }).catch(ex => {\r\n            alert(ex.message);\r\n            this.updateFeedback(name, null);\r\n        });\r\n    }\r\n    handleNewPolygon(Polygon) {\r\n        var path = [];\r\n        var vertices = Polygon.getPath();\r\n        for (var i = 0; i < vertices.getLength(); i++) {\r\n            path.push(vertices.getAt(i).toJSON());\r\n        }\r\n        const coberturas = [...this.state.coberturas, { path }];\r\n        var promise = this.handleUpdateProp(\"coberturas\", coberturas, true);\r\n        if (promise) {\r\n            promise\r\n                .then(() => {\r\n                    this.setState({ coberturas });\r\n                    Polygon.setMap(null);\r\n                }).catch(ex => {\r\n                    this.updateFeedback(\"coberturas\", ex.message);\r\n                    Polygon.setMap(null);\r\n                });\r\n        }\r\n    }\r\n    handleMapClick(event) {\r\n        const position = event.latLng.toJSON();\r\n        if (this.state.editMode === 0) {\r\n            var promise = this.handleUpdateProp(\"position\", position, true);\r\n            if (promise) {\r\n                promise.then(() => this.setState({ position }))\r\n                    .catch(ex => this.updateFeedback(\"position\", ex.message));\r\n                this.setState({ position });\r\n            }\r\n        }\r\n    }\r\n    handlePolygonMouseUp(Polygon, event, index) {\r\n        // en caso de que se aplaste el mouse sobre el Poligono, pero\r\n        // sea para situar la Ubicacin. \r\n        if (this.state.editMode !== 1) return;\r\n        var path = [];\r\n        var vertices = Polygon.getPath();\r\n        for (var i = 0; i < vertices.getLength(); i++) {\r\n            path.push(vertices.getAt(i).toJSON());\r\n        }\r\n        const coberturas = JSON.parse(JSON.stringify(this.state.coberturas));\r\n        var has_changed = false;\r\n        var previous = coberturas[index];\r\n        // esto es solo de seguridad\r\n        if (previous) {\r\n            for (let i = 0; i < path.length; i++) {\r\n                const coord = path[i];\r\n                var prev_coord = previous.path[i];\r\n                if (!prev_coord) {\r\n                    has_changed = true;\r\n                    break;\r\n                }\r\n                var isDifferent = (prev_coord.lat !== coord.lat || prev_coord.lng !== coord.lng);\r\n                if (isDifferent) {\r\n                    has_changed = true;\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            has_changed = true;\r\n        }\r\n        if (!has_changed) return;\r\n        coberturas[index] = { path };\r\n        var promise = this.handleUpdateProp(\"coberturas\", coberturas, true);\r\n        if (promise) {\r\n            if (!this.LAST_COBERTURAS) {\r\n                this.LAST_COBERTURAS = JSON.parse(JSON.stringify(this.state.coberturas));\r\n            }\r\n            promise\r\n                .then(() => {\r\n                    //this.setState({ coberturas })\r\n                    this.LAST_COBERTURAS = coberturas;\r\n                }).catch(ex => {\r\n                    this.updateFeedback(\"coberturas\", ex.message);\r\n                    this.setState(\r\n                        { coberturas: [] }, () =>\r\n                        this.setState({ coberturas: this.LAST_COBERTURAS })\r\n                    )\r\n                });\r\n        }\r\n    }\r\n    handleMapMounted(map) {\r\n        this.mapRef = map;\r\n        this._fitBoundsToPolygon();\r\n    }\r\n    handleEditMode(_, value) {\r\n        this.setState({ editMode: value });\r\n    }\r\n    // pone el recangulo de visualizacion, en el lugar correcto\r\n    // para abarcar todo/s el/los poligono/s\r\n    _fitBoundsToPolygon() {\r\n        if (!this.mapRef) return;\r\n        if (!this.state.coberturas.length) return;\r\n        const google = window.google;\r\n        const bounds = new google.maps.LatLngBounds();\r\n        for (let i = 0; i < this.state.coberturas.length; i++) {\r\n            const c = this.state.coberturas[i];\r\n            c.path.forEach(coords => bounds.extend(coords));\r\n        }\r\n        var current_bounds = this.mapRef.getBounds();\r\n        if (current_bounds) bounds.union(current_bounds);\r\n        this.mapRef.fitBounds(bounds);\r\n    }\r\n\r\n    handleTabContext = (event) => {\r\n        event.preventDefault();\r\n        this.setState({ tabContextEl: event.currentTarget });\r\n    }\r\n    handleTabContextClose = () => {\r\n        this.setState({ tabContextEl: null });\r\n    }\r\n    handleDeleteAllCoberturas = () => {\r\n        this.handleUpdateProp(\"coberturas\", [], true)\r\n            .then(() => {\r\n                this.setState({ coberturas: [] })\r\n            }).catch(err => this.updateFeedback(\"coberturas\", err.message));\r\n        this.setState({ tabContextEl: null });\r\n    }\r\n\r\n    render() {\r\n        const { loading, error, editMode,\r\n            baseTransporte, kmBaseTransporte, recargoPorKm, feedback, cobrarTransporte,\r\n            defaultCenter, position, google_maps_key,\r\n            coberturas, tabContextEl\r\n        } = this.state;\r\n        var hay_coberturas = coberturas && coberturas.length;\r\n\r\n        var MAP_OPTIONS = {\r\n            defaultCenter: defaultCenter,\r\n            API_KEY: google_maps_key,\r\n            enableDrawingManager: !hay_coberturas && editMode === 1\r\n        }\r\n        if (position) MAP_OPTIONS.marker = {\r\n            position: position,\r\n            label: \"Tu Tienda\"\r\n        };\r\n        if (coberturas && coberturas.length)\r\n            MAP_OPTIONS.polygons = coberturas.map(x => ({ ...x, editable: editMode === 1 }));\r\n\r\n        if (loading === \"ERROR\")\r\n            return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\">Ocurri un error</Typography>\r\n                <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                <Typography variant=\"body1\">{error.code} {error.status}</Typography>\r\n            </div>);\r\n\r\n        if (loading)\r\n            return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\">CARGANDO EL MAPA...</Typography>\r\n            </div>);\r\n\r\n        return (<div style={{ display: \"flex\", flexDirection: \"row\", height: \"calc(100% - 100px)\" }}>\r\n\r\n            <Menu anchorEl={tabContextEl}\r\n                anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n                transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n                open={Boolean(tabContextEl)}\r\n                onClose={this.handleTabContextClose}\r\n            >\r\n                <MenuItem onClick={this.handleDeleteAllCoberturas}>Borrar areas</MenuItem>\r\n            </Menu>\r\n\r\n            <div style={{ flex: 1, padding: 10 }}>\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Typography style={{ marginLeft: 10, flex: 1, paddingTop: 5 }} variant=\"h6\">Ubicacin de la Tienda</Typography>\r\n                    <Tabs onChange={this.handleEditMode} value={editMode}>\r\n                        <Tab\r\n                            title={feedback[\"position\"]}\r\n                            label={(position ? \"Cambiar\" : \"Agregar\") + \" Ubicacin\"}\r\n                            icon={(\r\n                                feedback[\"position\"] && (feedback[\"position\"] === \"loading\"\r\n                                    ? < CircularProgress size={20} color=\"primary\" />\r\n                                    : <ReportProblem color=\"secondary\" />)\r\n                            ) || <LocationOn />}\r\n                        />\r\n                        <Tab\r\n                            title={feedback[\"coberturas\"]}\r\n                            label={(hay_coberturas ? \"Cambiar\" : \"Agregar\") + \" Cobertura\"}\r\n                            icon={(\r\n                                feedback[\"coberturas\"] && (feedback[\"coberturas\"] === \"loading\"\r\n                                    ? < CircularProgress size={20} color=\"primary\" />\r\n                                    : <ReportProblem color=\"secondary\" />)\r\n                            ) || <Layers />}\r\n                            disabled={!position}\r\n                            onContextMenu={this.handleTabContext}\r\n                        />\r\n                    </Tabs>\r\n                </div>\r\n\r\n                {defaultCenter && <Map\r\n                    onMapMounted={this.handleMapMounted}\r\n                    onClick={this.handleMapClick}\r\n                    defaultZoom={12}\r\n                    onPolygonComplete={this.handleNewPolygon}\r\n                    onPolygonClick={this.handleMapClick}\r\n                    onPolygonMouseUp={this.handlePolygonMouseUp}\r\n                    {...MAP_OPTIONS}\r\n                />}\r\n            </div>\r\n\r\n            <div style={{ width: 300, padding: 10, textAlign: \"center\" }}>\r\n                <Typography style={{ margin: 10 }} variant=\"h6\">Tarifa de Transporte</Typography>\r\n\r\n                <FormControlLabel\r\n                    label=\"Cobrar Servicio de Transporte\"\r\n                    control={feedback[\"cobrarTransporte\"]\r\n                        ? <CircularProgress size={20} color=\"primary\" style={{ margin: 12 }} />\r\n                        : <Checkbox checked={cobrarTransporte} onChange={this.handleCheck} name=\"cobrarTransporte\" />}\r\n                />\r\n                {cobrarTransporte && (<React.Fragment>\r\n                    <UpdateableInput\r\n                        value={baseTransporte}\r\n                        onChange={this.handleInput}\r\n                        onUpdate={this.handleUpdateProp}\r\n                        label=\"Tarifa base\"\r\n                        name=\"baseTransporte\"\r\n                        type=\"number\"\r\n                        feedback={feedback}\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                    />\r\n                    <UpdateableInput\r\n                        value={kmBaseTransporte}\r\n                        onChange={this.handleInput}\r\n                        onUpdate={this.handleUpdateProp}\r\n                        label=\"Kms que cubre la tarifa base\"\r\n                        name=\"kmBaseTransporte\"\r\n                        type=\"number\"\r\n                        feedback={feedback}\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                    />\r\n                    <UpdateableInput\r\n                        value={recargoPorKm}\r\n                        onChange={this.handleInput}\r\n                        onUpdate={this.handleUpdateProp}\r\n                        label=\"Recargo por km adicional\"\r\n                        name=\"recargoPorKm\"\r\n                        type=\"number\"\r\n                        feedback={feedback}\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                    />\r\n                </React.Fragment>)}\r\n\r\n            </div>\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport {\r\n    Dialog, DialogContent,\r\n    Select, FormControlLabel,\r\n    Checkbox, DialogActions, Button,\r\n    Typography,\r\n    DialogTitle\r\n} from \"@material-ui/core\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        dias: [],\r\n        desde: [0, 0],\r\n        hasta: [0, 0]\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleDays = this.handleDays.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        if (props.data && props.data !== \"NUEVO\") {\r\n            this.state = { ...props.data };\r\n        }\r\n    }\r\n    handleChange(event) {\r\n        const { value, name } = event.currentTarget;\r\n        if (name.indexOf(\".\") >= 0) {\r\n            var parts = name.split(\".\");\r\n            this.setState(prev => {\r\n                const state = JSON.parse(JSON.stringify(prev));\r\n                state[parts[0]][parts[1]] = value;\r\n                return state;\r\n            });\r\n        } else {\r\n            this.setState({ [name]: value });\r\n        }\r\n    }\r\n    handleDays(event) {\r\n        const { value } = event.currentTarget;\r\n        this.setState(prev => {\r\n            const state = JSON.parse(JSON.stringify(prev));\r\n            state.dias = [...state.dias];\r\n            var INDEX = state.dias.indexOf(+value);\r\n            if (INDEX >= 0) {\r\n                state.dias.splice(INDEX, 1);\r\n            } else {\r\n                state.dias.push(+value);\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    handleClick() {\r\n        const { loading, dias, desde, hasta } = this.state;\r\n        if (loading) return;\r\n        if (!dias.length) return alert(\"Selecciona al menos un dia\");\r\n        if (desde[0] === hasta[0] && desde[1] === hasta[1]) return alert(\"Las horas de inicio y fin no pueden ser iguales\");\r\n        this.setState({ loading: true });\r\n        this.props.guardar(this.state)\r\n            .catch(ex => {\r\n                alert(ex.message);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.onClose && this.props.onClose();\r\n    }\r\n    render() {\r\n        const { desde, hasta, dias, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"lg\">\r\n            <DialogTitle>HORARIO</DialogTitle>\r\n            <DialogContent>\r\n                <div style={{ display: \"table\" }}>\r\n                    <div style={{ display: \"table-cell\", width: 150 }}>\r\n                        <Typography variant=\"subtitle1\">INICIO</Typography>\r\n                        <div>\r\n                            <TimeSelect label=\"Horas\" length={23} name=\"desde.0\" value={desde[0]} onChange={this.handleChange} />\r\n                            <Typography style={{ display: \"inline\", width: \"auto\", marginLeft: 5, marginRight: 5 }} variant=\"subtitle1\" >:</Typography>\r\n                            <TimeSelect label=\"Minutos\" items={[0, 15, 30, 45]} name=\"desde.1\" value={desde[1]} onChange={this.handleChange} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: \"table-cell\", width: 150 }}>\r\n                        <Typography variant=\"subtitle1\">FIN</Typography>\r\n                        <div>\r\n                            <TimeSelect label=\"Horas\" length={23} name=\"hasta.0\" value={hasta[0]} onChange={this.handleChange} />\r\n                            <Typography style={{ display: \"inline\", width: \"auto\", marginLeft: 5, marginRight: 5 }} variant=\"subtitle1\" >:</Typography>\r\n                            <TimeSelect label=\"Minutos\" items={[0, 15, 30, 45]} name=\"hasta.1\" value={hasta[1]} onChange={this.handleChange} />\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ display: \"table-cell\" }}>\r\n                        <Typography variant=\"subtitle1\">SELECCIONA LOS DIAS</Typography>\r\n                        <DaysSelect value={dias} onChange={this.handleDays} />\r\n                    </div>\r\n                </div>\r\n                <DialogActions >\r\n                    <Button disabled={loading} style={{ flex: 1 }} color=\"primary\" variant=\"outlined\" onClick={this.handleClick}>\r\n                        GUARDAR\r\n                        </Button>\r\n                </DialogActions>\r\n            </DialogContent>\r\n        </Dialog>)\r\n    }\r\n}\r\nfunction TimeSelect(props) {\r\n    const { length, items, ...selectProps } = props;\r\n    var options = [];\r\n    if (items) {\r\n        options = items.map(i => ({\r\n            value: i,\r\n            label: i.toString().length === 1 ? `0${i}` : i\r\n        }))\r\n    } else {\r\n        for (let i = 0; i <= length; i++) {\r\n            options.push({\r\n                value: i,\r\n                label: i.toString().length === 1 ? `0${i}` : i\r\n            });\r\n        }\r\n    }\r\n    return (<Select native={true} {...selectProps}>\r\n        {options.map(o => <option key={o.value} value={o.value}>{o.label}</option>)}\r\n    </Select>);\r\n}\r\nfunction DaysSelect(props) {\r\n    const value = props.value || [];\r\n    return (<div style={props.style}>\r\n        <FormControlLabel\r\n            label=\"Lun\"\r\n            control={<Checkbox value={\"1\"} checked={value.indexOf(1) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Mar\"\r\n            control={<Checkbox value={\"2\"} checked={value.indexOf(2) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Mie\"\r\n            control={<Checkbox value={\"3\"} checked={value.indexOf(3) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Jue\"\r\n            control={<Checkbox value={\"4\"} checked={value.indexOf(4) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Vie\"\r\n            control={<Checkbox value={\"5\"} checked={value.indexOf(5) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Sab\"\r\n            control={<Checkbox value={\"6\"} checked={value.indexOf(6) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Dom\"\r\n            control={<Checkbox value={\"0\"} checked={value.indexOf(0) >= 0} onChange={props.onChange} />}\r\n        />\r\n    </div>)\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TableRow, TableCell, TableBody, IconButton, CircularProgress } from \"@material-ui/core\";\r\nimport { Delete, Edit, Add } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport HorarioDialog from \"./HorarioDialog\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        horarios: [],\r\n        selected: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.configuracion && props.configuracion.horarios) {\r\n            this.state.horarios = [...props.configuracion.horarios];\r\n        }\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleEdit = this.handleEdit.bind(this);\r\n        this.guardar = this.guardar.bind(this);\r\n    }\r\n    handleDelete(event) {\r\n        const index = event.currentTarget.value;\r\n        if (this.state.horarios.length <= 1) return alert(\"No se puede borrar: Debe existir al menos un horario\");\r\n        var item = this.state.horarios[+index];\r\n        if (!item) return;\r\n        if (item.loading) return;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.horarios = [...state.horarios];\r\n            state.horarios[index].loading = true;\r\n            return state;\r\n        })\r\n        const horarios = [...this.state.horarios];\r\n        horarios.splice(index, 1);\r\n        API.setConfigInfo({ horarios })\r\n            .then(() => {\r\n                this.setState({ horarios });\r\n            }).catch(ex => {\r\n                alert(\"Ocurrio un error: \" + ex.message);\r\n                this.setState(prev => {\r\n                    const state = { ...prev };\r\n                    state.horarios = [...state.horarios];\r\n                    state.horarios[index].loading = false;\r\n                    return state;\r\n                });\r\n            });\r\n    }\r\n    guardar(horario) {\r\n        const horarios = JSON.parse(JSON.stringify(this.state.horarios));\r\n        var exists;\r\n        if (horario.id) exists = horarios.find(x => x.id === horario.id);\r\n        if (exists) {\r\n            horarios[horarios.indexOf(exists)] = horario;\r\n        } else {\r\n            horarios.push(horario);\r\n        }\r\n        return API.setConfigInfo({ horarios })\r\n            .then(x => {\r\n                this.setState({ horarios, selected: null });\r\n            });\r\n    }\r\n    handleEdit(event) {\r\n        const index = event.currentTarget.value;\r\n        if (index === \"NUEVO\") return this.setState({ selected: \"NUEVO\" });\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.horarios = [...state.horarios];\r\n            var item = state.horarios[+index];\r\n            if (!item) return state;\r\n            state.selected = item;\r\n            return state;\r\n        });\r\n    }\r\n    handleClose() {\r\n        this.setState({ selected: null });\r\n    }\r\n    render() {\r\n        const { horarios, selected } = this.state;\r\n        return (<div>\r\n            {selected && <HorarioDialog data={selected} onClose={this.handleClose} guardar={this.guardar} />}\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell style={{ width: 40 }}>\r\n                        </TableCell>\r\n                        <TableCell component=\"th\">HORA</TableCell>\r\n                        <TableCell component=\"th\">DIAS</TableCell>\r\n                        <TableCell component=\"th\" style={{ width: 40 }}>\r\n                            <IconButton onClick={this.handleEdit} value=\"NUEVO\" >\r\n                                <Add color=\"primary\" />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {horarios && horarios.map((item, index) =>\r\n                        (<TableRow key={index}>\r\n                            <TableCell scope=\"row\" component=\"th\">\r\n                                <IconButton disabled={item.loading} value={index} onClick={this.handleDelete}>\r\n                                    {item.loading ? <CircularProgress size={20} color=\"secondary\" /> : <Delete />}\r\n                                </IconButton>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                {TimeToString(item.desde, item.tz) + \" - \" + TimeToString(item.hasta, item.tz)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                {item.dias.map(ToDayString).join(\", \")}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <IconButton disabled={item.loading} value={index} onClick={this.handleEdit}>\r\n                                    <Edit />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                        </TableRow>)\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n        </div>)\r\n    }\r\n}\r\n\r\n\r\nfunction ToDayString(d) {\r\n    if (d === 1) return \"Lun\";\r\n    if (d === 2) return \"Mar\";\r\n    if (d === 3) return \"Mie\";\r\n    if (d === 4) return \"Jue\";\r\n    if (d === 5) return \"Vie\";\r\n    if (d === 6) return \"Sab\";\r\n    if (d === 0) return \"Dom\";\r\n    return \"UNDEFINED\";\r\n}\r\nfunction TimeToString(minHour, tz) {\r\n    const [hour, min] = minHour;\r\n    return (\r\n        (hour.toString().length === 1 ? \"0\" : \" \") + hour\r\n    ) + \":\" + (\r\n            (min.toString().length === 1 ? \"0\" : \" \") + min\r\n        )\r\n}","import React from \"react\";\r\nimport { Input, Table, TableBody, TableRow, TableCell, IconButton, TableHead, Typography, TableFooter, Button } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { ArrowDownward, Delete } from \"@material-ui/icons\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        // {key : \"cargando\" | errMessage}\r\n        contactos: [],\r\n        telefono_contacto: \"\",\r\n        nombre_contacto: \"\"\r\n    }\r\n    // aqui almaceno los timeouts\r\n    timeouts = {}\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        const { configuracion } = props;\r\n        if (configuracion) {\r\n            for (const key in configuracion) {\r\n                if (configuracion.hasOwnProperty(key)) {\r\n                    this.state[key] = configuracion[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleInput = (event) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleNew = event => {\r\n        var { telefono_contacto, nombre_contacto } = this.state;\r\n\r\n        var telefono = (telefono_contacto || \"\").trim();\r\n        var nombre = (nombre_contacto || \"\").trim();\r\n\r\n        if (!(nombre && nombre.trim())) {\r\n            alert(\"Digita el Nombre de la persona\");\r\n            return document.getElementById(\"nombre_contacto\").focus();\r\n        };\r\n\r\n        if (!telefono) {\r\n            alert(\"Digita el nmero de telfono\");\r\n            return document.getElementById(\"telefono_contacto\").focus();\r\n        }\r\n        if (telefono.length !== 12) {\r\n            alert(\"El nmero de telfono debe tener 12 digitos\");\r\n            return document.getElementById(\"telefono_contacto\").focus();\r\n        }\r\n\r\n        var digits = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\r\n        for (let i = 0; i < telefono.length; i++) {\r\n            var digit = telefono[i];\r\n            if (digits.indexOf(digit) < 0) {\r\n                alert(\"El nmero de telfono solo puede contener digitos.\");\r\n                return document.getElementById(\"telefono_contacto\").focus();\r\n            }\r\n        }\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.contactos = [...state.contactos];\r\n            state.contactos.push({ telefono, nombre });\r\n            state.telefono_contacto = \"\";\r\n            state.nombre_contacto = \"\";\r\n            return state;\r\n        });\r\n    }\r\n    handleRemove = event => {\r\n        const index = +event.currentTarget.value;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.contactos = [...state.contactos];\r\n            if (!state.contactos[index]) return state;\r\n            state.contactos.splice(index, 1);\r\n            return state;\r\n        });\r\n    }\r\n    handleSave = event => {\r\n        if (this.state.loading) return;\r\n        this.setState({ loading: \"contactos\" });\r\n        API.setConfigInfo({ contactos: this.state.contactos })\r\n            .then(x => {\r\n                this.setState({ loading: false });\r\n            }).catch(ex => {\r\n                alert(ex.message);\r\n                this.setState({ loading: false });\r\n                console.dir(ex);\r\n            });\r\n    }\r\n    render() {\r\n        const { contactos, nombre_contacto, telefono_contacto, loading } = this.state;\r\n        return (<div>\r\n            <Typography variant=\"h6\" style={{ textAlign: \"center\", margin: 10 }}>PUEDES ENVIAR TUS PEDIDOS POR WHATSAPP A ESTAS PERSONAS:</Typography>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                        <TableCell></TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>\r\n                            <Input\r\n                                inputProps={{ id: \"nombre_contacto\", maxLength: 50 }}\r\n                                fullWidth\r\n                                margin=\"none\"\r\n                                disabled={loading}\r\n                                value={nombre_contacto}\r\n                                name=\"nombre_contacto\"\r\n                                onChange={this.handleInput}\r\n                                placeholder=\"Nombre...\"\r\n                            />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <Input\r\n                                inputProps={{ id: \"telefono_contacto\", maxLength: 20 }}\r\n                                fullWidth\r\n                                disabled={loading}\r\n                                value={telefono_contacto}\r\n                                margin=\"none\"\r\n                                name=\"telefono_contacto\"\r\n                                onChange={this.handleInput}\r\n                                placeholder=\"Telefono (Ej:5939939579)\"\r\n                                title=\"Nmero de telfono incluyendo el cdigo internacional, sin signos\"\r\n                            />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <IconButton disabled={loading} title=\"Agregar\" onClick={this.handleNew}>\r\n                                <ArrowDownward />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {contactos.map((c, index) => <TableRow key={index}>\r\n                        <TableCell scope=\"row\" component=\"th\" >{c.nombre}</TableCell>\r\n                        <TableCell>{c.telefono}</TableCell>\r\n                        <TableCell>\r\n                            <IconButton disabled={loading} onClick={this.handleRemove} value={index}>\r\n                                <Delete />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                    </TableRow>)}\r\n                </TableBody>\r\n                <TableFooter>\r\n                    <TableRow>\r\n                        <TableCell colSpan={3} >\r\n                            <Button\r\n                                onClick={this.handleSave}\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                diabled={loading}\r\n                            >\r\n                                {loading === \"contactos\" ? \"GUARDANDO...\" : \"GUARDAR\"}\r\n                            </Button>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableFooter>\r\n            </Table>\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, CircularProgress, Typography } from \"@material-ui/core\";\r\nimport Informacion from \"./Informacion\";\r\nimport Cobertura from \"./Cobertura\";\r\nimport Horarios from \"./Horarios\";\r\nimport API from \"../../Services/API\";\r\nimport Parametros from \"./Parametros\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        // toda la configuracion\r\n        currentTab: 0,\r\n        defaultConfiguracion: null,\r\n        loading: true,\r\n        error: null,\r\n        // aqui almaceno los Tabs que ya se han cargado.para no cargar todo de golpe!\r\n        openedTabs: {}\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleTabChange = this.handleTabChange.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetConfigInfo()\r\n            .then(configuracion => {\r\n                this.setState(prev => {\r\n                    const state = { ...prev };\r\n                    state.configuracion = configuracion;\r\n                    state.loading = null;\r\n                    state.openedTabs[state.currentTab] = true;\r\n                    return state;\r\n                });\r\n            }).catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    handleTabChange(_, currentTab) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.openedTabs[currentTab] = true;\r\n            state.currentTab = currentTab;\r\n            return state;\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { currentTab, openedTabs, error, loading, configuracion } = this.state;\r\n        if (loading)\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\" >CARGANDO...</Typography>\r\n            </div>);\r\n\r\n        if (error)\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 200 }}>\r\n                <Typography variant=\"h6\" >Ocurri un error al cargar tu configuracin</Typography>\r\n                <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                <Typography variant=\"body1\" >{error.code} {error.status}</Typography>\r\n            </div>);\r\n\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\", height: \"100%\" }}>\r\n            <Tabs variant=\"fullWidth\" onChange={this.handleTabChange} value={currentTab} indicatorColor=\"primary\" textColor=\"primary\">\r\n                <Tab label=\"Informacin\" />\r\n                <Tab label=\"Parametros\" />\r\n                <Tab label=\"Cobertura y Tarifas\" />\r\n                <Tab label=\"Horarios de Atencin\" />\r\n            </Tabs>\r\n            <div style={{ display: currentTab === 0 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[0] && <Informacion configuracion={configuracion} />}\r\n            </div>\r\n\r\n            <div style={{ display: currentTab === 1 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[1] && <Parametros configuracion={configuracion} />}\r\n            </div>\r\n\r\n            <div style={{ display: currentTab === 2 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[2] && <Cobertura configuracion={configuracion} />}\r\n            </div>\r\n\r\n            <div style={{ display: currentTab === 3 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[3] && <Horarios configuracion={configuracion} />}\r\n            </div>\r\n        </div>);\r\n    }\r\n}","import React from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport { Typography, Paper, withStyles, Hidden } from \"@material-ui/core\";\nimport { Inbox, Category, Settings/*, Assessment*/ } from \"@material-ui/icons\";\nimport AppBar from \"./Layouts/Bar\";\nimport AppMenu from \"./Layouts/Menu\";\nimport Orders from \"./Components/Orders/index\";\nimport API from \"./Services/API\";\nimport Products from \"./Components/Products\";\nimport Config from \"./Components/Config\";\nimport { Provider } from \"react-redux\";\n\nconst STEPS = [\n  { id: \"orders\", title: \"Pedidos\", Icon: Inbox },\n  { id: \"products\", title: \"Productos\", Icon: Category },\n  //{ id: \"dashboard\", title: \"Dashboard\", Icon: Assessment },\n  { id: \"config\", title: \"Configuracin\", Icon: Settings, addDividerBefore: true }\n];\n\nconst drawerWidth = 200;\nexport default withStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: drawerWidth\n    }\n  },\n  appBar: {\n    display: \"block\"\n  }\n}))(class App extends React.Component<{ store: any, user: any, onLogOut: any, classes?: any, window?: any }> {\n  state = { current_step: \"\", isMenuOpen: false }\n  constructor(props) {\n    super(props);\n    this.handleMounted = this.handleMounted.bind(this);\n    this.onToggleMenu = this.onToggleMenu.bind(this);\n    API.START_LISTENING();\n  }\n  REMOVE_LISTENER;\n  componentDidMount() {\n    if (!window.Notification) return;\n    Notification.requestPermission()\n      .then(p => console.info(\"Notification status\", p))\n      .catch(console.error);\n  }\n  componentWillUnmount() {\n    this.REMOVE_LISTENER && this.REMOVE_LISTENER();\n  }\n  handleMounted(current_step) {\n    this.setState({ current_step, isMenuOpen: false });\n  }\n  onToggleMenu() {\n    this.setState({ isMenuOpen: !this.state.isMenuOpen });\n  }\n  render() {\n    const { current_step, isMenuOpen } = this.state;\n    const { title } = current_step && STEPS.find(x => x.id === current_step);\n    const tienda = this.props.store.getState();\n\n    const { classes, window } = this.props;\n\n    return (<HashRouter>\n      <Provider store={this.props.store}>\n        <Paper style={{ height: \"100vh\", width: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\n          <AppBar\n            user={this.props.user}\n            store={tienda.store}\n            title={title}\n            onLogOut={this.props.onLogOut}\n            onMenuClick={this.onToggleMenu}\n          />\n          <AppMenu\n            STEPS={STEPS}\n            current_step={current_step}\n            classes={classes}\n            window={window}\n            isMenuOpen={isMenuOpen}\n            onCloseMenu={this.onToggleMenu}\n          />\n\n\n          <main className={classes.content}>\n            <div className={classes.toolbar}></div>\n            <Switch>\n\n              <Route path=\"/orders\" render={props => (<Orders\n                {...props}\n                onMounted={this.handleMounted}\n                stepID={\"orders\"}\n              />)} />\n\n              <Route path=\"/products\" render={props => (<Products\n                {...props}\n                onMounted={this.handleMounted}\n                stepID={\"products\"}\n              />)} />\n\n              <Route path=\"/config\" render={props => (<Config\n                {...props}\n                onMounted={this.handleMounted}\n                stepID={\"config\"}\n              />)} />\n\n              <Route exact path=\"/\" >\n                <div style={{ paddingTop: 100, width: \"100%\", textAlign: \"center\" }}>\n                  <Typography variant=\"h4\">BIENVENIDO!</Typography>\n                  <Typography variant=\"subtitle2\">RunFood Orders - Administrador</Typography>\n                </div>\n              </Route>\n            </Switch>\n          </main>\n        </Paper>\n      </Provider>\n    </HashRouter>)\n  }\n});","import React from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    TextField,\r\n    Typography,\r\n    InputAdornment,\r\n    Button,\r\n    CircularProgress,\r\n    IconButton\r\n} from \"@material-ui/core\";\r\nimport { AccountCircle, Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport API from \"./Services/API\";\r\n\r\nconst styles = {\r\n    control: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n}\r\n\r\nexport default class extends React.Component<{\r\n    onLogged: any\r\n}> {\r\n    state = {\r\n        user: \"\",\r\n        pwd: \"\",\r\n        showPassword: false,\r\n        loading: false,\r\n        store: null,\r\n        error: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleTogglePassword = this.handleTogglePassword.bind(this);\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { loading, user, pwd } = this.state;\r\n        if (loading) return;\r\n        if (!user) return this.setState({ error: { message: \"Digite el usuario\" } });\r\n        if (!pwd) return this.setState({ error: { message: \"Digite la contrasea\" } });\r\n        this.setState({ loading: true });\r\n        API.LogIn({\r\n            user: user,\r\n            pwd: pwd,\r\n            withStoresInfo: true\r\n        }).then(userInfo =>\r\n            this.props.onLogged({\r\n                user,\r\n                token: userInfo.token,\r\n                store: userInfo.store\r\n            })\r\n        ).catch(error => this.setState({ error, loading: false }));\r\n    }\r\n    handleTogglePassword() {\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.showPassword = !state.showPassword;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { showPassword, loading, error, user, pwd } = this.state;\r\n        return (<div style={{ paddingTop: 40, paddingBottom: 40, overflow: \"auto\" }}>\r\n            <Card style={{ maxWidth: 400, width: \"calc(100% - 20px)\", margin: \"auto\" }} elevation={8}>\r\n                <CardContent style={{ padding: 0 }}><form onSubmit={this.handleSubmit} style={{ padding: 20 }}>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h5\">INICIO DE SESION</Typography>\r\n                    <TextField\r\n                        autoFocus={true}\r\n                        disabled={loading}\r\n                        required\r\n                        style={{ ...styles.control }}\r\n                        fullWidth\r\n                        label=\"USUARIO\"\r\n                        value={user || \"\"}\r\n                        name={\"user\"}\r\n                        onChange={this.handleChange}\r\n                        type=\"email\"\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <AccountCircle />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        fullWidth\r\n                        style={{ ...styles.control }}\r\n                        value={pwd || \"\"}\r\n                        label=\"CONTRASEA\"\r\n                        name={\"pwd\"}\r\n                        onChange={this.handleChange}\r\n                        type={showPassword ? \"text\" : \"password\"}\r\n                        InputProps={{\r\n                            endAdornment: (\r\n                                <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handleTogglePassword}>\r\n                                        {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    {error && <div style={{ width: \"100%\" }}>\r\n                        <Typography color=\"secondary\" variant=\"body2\">{error.message} {error.code && error.code}</Typography>\r\n                        <Typography color=\"secondary\" variant=\"body1\">{error.status} | {error.statusText}</Typography>\r\n                    </div>}\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth style={{ ...styles.control }}\r\n                        variant=\"outlined\"\r\n                        disabled={loading}\r\n                        color=\"primary\"\r\n                    >\r\n                        {loading ? <CircularProgress size={20} color=\"inherit\" /> : \"ENTRAR\"}\r\n                    </Button>\r\n                </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div >)\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n *\r\n    handleStore(event) {\r\n        const { id } = event.currentTarget;\r\n        const store = this.state.stores[+id];\r\n        this.setState({ store });\r\n        this.props.onLogged({\r\n            user: this.state.user,\r\n            token: this.state.token,\r\n            store\r\n        });\r\n    }\r\n                    {stores\r\n                        ? (<div>\r\n                            <Typography variant=\"h5\" style={{ margin: 10, textAlign: \"center\" }}>SELECCIONA LA TIENDA</Typography>\r\n                            <List style={{ ...styles.control, padding: 0 }}>\r\n                                {stores.map((x, index) => (\r\n                                    <ListItem\r\n                                        style={{ padding: 10 }}\r\n                                        button\r\n                                        onClick={this.handleStore}\r\n                                        key={index}\r\n                                        id={index}\r\n                                        disabled={Boolean(store)}>\r\n                                        <ListItemText>{x.titulo}</ListItemText>\r\n                                        <ListItemIcon><img alt={x.titulo} style={{ maxWidth: 100, maxHeight: 100 }} src={x.logoSrc}></img></ListItemIcon>\r\n                                    </ListItem>))}\r\n                            </List>\r\n                        </div>)\r\n                        : (\r\n                            )\r\n                    }\r\n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Login from './Login';\nimport API, { viewLoginData, storeLoginData } from \"./Services/API\";\nimport ReduxStore from './redux/store';\nimport { SET_TIENDA, SET_POSITION } from './redux/actions/Store';\n\nfunction LaunchApp(data?) {\n    // uso viewLoginData porque pone por default la position en quito\n    // en caso de que position sea NULL\n    if (!data) data = viewLoginData();\n    ReduxStore.dispatch(SET_TIENDA(data.store));\n    ReduxStore.dispatch(SET_POSITION(data.position));\n    API.setStoreId(data.store.nombre);\n\n    ReactDOM.render(\n        <App user={data.user} store={ReduxStore} onLogOut={LoggedOut} />\n        , document.getElementById('app')\n    );\n}\nfunction LaunchLogin() {\n    ReactDOM.render(<React.StrictMode>\n        <Login onLogged={Logged} />\n    </React.StrictMode>, document.getElementById('app'));\n}\nfunction Logged(data) {\n    storeLoginData(data);\n    LaunchApp();\n}\nfunction LoggedOut() {\n    API.STOP_LISTENING();\n    storeLoginData();\n    LaunchLogin();\n}\n\nviewLoginData() ? LaunchApp() : LaunchLogin();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//register();\n/*\nServiceWorker.register();\n*/\ntry {\n    navigator.serviceWorker && navigator.serviceWorker.register(\"./service-worker.js\");\n} catch (ex) {\n    console.error(\"Service Worker wont update\", ex);\n}\n","export function SET_TIENDA(payload) {\r\n    return {\r\n        type: \"SET_TIENDA\",\r\n        payload\r\n    }\r\n}\r\n\r\nexport function SET_POSITION(latLng) {\r\n    return {\r\n        type: \"SET_POSITION\",\r\n        payload: latLng\r\n    }\r\n}"],"sourceRoot":""}
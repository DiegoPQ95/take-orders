{"version":3,"sources":["Layouts/AppBar.js","Layouts/AppMenu.js","Services/ImageReader.js","Services/API.js","Contexts/StoreContext.js","Components/Orders/OrderDetails.js","Services/WhatsApp.js","Components/Orders/OrdersTable.js","Components/Orders/index.js","Components/Config/UpdateableInput.js","Services/Notifications.js","Components/Products/Item.js","Components/Products/Group.js","Components/UploadImage.js","Components/Products/ProductDialog.js","Components/TextPrompt.js","Components/Products/index.js","Components/Config/Informacion.js","Services/Geo.js","Components/Map.js","Components/Config/Cobertura.js","Components/Config/HorarioDialog.js","Components/Config/Horarios.js","Components/Config/Parametros.js","Components/Config/index.js","App.js","Login.js","index.js"],"names":["_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","menuEl","handleMenu","bind","assertThisInitialized","handleClose","handleLogOut","event","setState","currentTarget","window","confirm","onLogOut","_this$props","title","store","user","open","Boolean","react_default","a","createElement","index_es","position","style","zIndex","display","flexDirection","flexGrow","variant","color","textAlign","titulo","toUpperCase","aria-owns","undefined","aria-haspopup","onClick","icons_index_es","id","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","onClose","minWidth","React","PureComponent","AppMenu","STEPS","current_step","maxWidth","paddingTop","width","map","step","index","Fragment","key","addDividerBefore","component","Link","to","selected","button","Icon","ReadImgAsUrl","file","Promise","resolve","reject","type","indexOf","message","mbs","size","round","concat","reader","FileReader","onload","e","target","result","onerror","readAsDataURL","ImgFileToObject","base64","arrayBuffer","chunk","encodings","bytes","Uint8Array","byteLength","byteRemainder","mainLength","i","base64ArrayBuffer","ext","split","readAsArrayBuffer","URL","QUITO","lat","lng","session","Date","toString","Math","floor","random","storeLoginData","info","localStorage","setItem","JSON","stringify","removeItem","viewLoginData","getItem","parse","getToken","location","reload","token","socket","LISTENERS","ON_ORDERS_CHANGED","Fetch","URI","options","DEFAULTS","method","cache","mode","headers","Content-Type","Access-Control-Allow-Origin","fetch","objectSpread","then","response","ok","json","clone","catch","text","x","status","statusText","obj","ex","API","LogIn","data","body","GetOrders","storeID","URLSearchParams","Authorization","btoa","GetOrder","ID","OrdersOnRoute","orders","OrdersDelivered","ListenOnOrderChange","fn","push","splice","GetGroups","SaveGroup","group","RequestActionGroup","DeleteGroup","GetProduct","SaveProduct","product","RequestActionProduct","DeleteProduct","GetParamContactos","GetConfigInfo","setConfigInfo","info_item","START_LISTENING","io","query","reconnection","transports","console","on","origin","forEach","payload","deletedAt","STOP_LISTENING","disconnect","StoreContext","createContext","porcentajeIVA","error","phone","handlePhone","value","close","_this2","all","match","params","_ref","_ref2","slicedToArray","contactos","history","goBack","context","_this$state","height","padding","facturaConDatos","documento_factura","identificacion_factura","_detalle_","toConsumableArray","detalle","valor_delivery","pvp","cantidad","pagaIva","TOTALES","reduce","neto","iva","total","DOMICILIO_INFO","mts_delivery","segs_delivery","length","join","fecha","f","toDateString","toLocaleTimeString","FechaHoraStr","fechaEnvio","createdAt","numero","nombre","Documento","identificacion","telefono","direccion","referencia","flex","marginRight","item","RowDet","assign","descripcion","marginTop","toFixed","FormaPago","numeroTransaccion","nota","Documento_factura","marginLeft","DatosFacturaItem","icon","BusinessOutlined","razonsocial_factura","PhoneOutlined","telefono_factura","LocationOnOutlined","direccion_factura","margin","onChange","select","SelectProps","native","c","href","trim","number","str","substr","dif","padR","encodeURIComponent","OrderToPhone","Component","marginBottom","paddingLeft","contextType","withRouter","_React$PureComponent","_class","handleClick","onMounted","estado","inherits","createClass","stopPropagation","path","onSelect","now","timeCol","rows","filter","overflow","OrdersTable_Row","onCheck","react_router","OrderDetails","Row","tabIndex","cursor","onContextMenu","hover","checked","scope","toLocaleString","day","DayOfYear","today","toHHMM","RenderTimeCol","date","start","getFullYear","diff","hours","getHours","mins","getMinutes","TwoPlaces","valueOf","loading","goToCenter","navigationValue","stepID","handleRightClick","handleSelect","handleCurrentLocation","handleNavigation","handleChangeState","__updateRecords","REMOVE_LISTENER","STOP_TIMER","_event$target","prev","find","_this3","selections","alert","IDS","results","addIfNotExists","res","_this4","_this$state2","code","G_M_K","textColor","indicatorColor","label","render","OrdersTable","paddingRight","disabled","currentLocation","locations","rutas","ruta","Map","googleMapURL","containerElement","loadingElement","mapElement","center","withScriptjs","withGoogleMap","lib","defaultCenter","defaultZoom","disableDefaultUI","zoomControl","clickableIcons","MarkerWithLabel","labelAnchor","google","maps","Point","labelStyle","background","border","timeout","N","Notification","onclick","focus","Item","paused_color","paused","habilitado","onItemClick","image","imgSrc","verticalAlign","fontSize","whiteSpace","onItemAction","name","handleMenuClose","items","loading_action","onGroupAction","scrollBehavior","sort","b","orden","p","onGroupEdit","onGroupDelete","UploadImage","document","getElementById","click","IMG_STYLE","maxHeight","hidden","accept","src","alt","withStyles","paper","_class2","idGrupo","handleInput","handleCheck","handleDelete","handlePhotoChange","handlePhotoDrop","handlePhotoOver","_info$split","_info$split2","_event$currentTarget","defineProperty","_event$currentTarget2","isNaN","imgFile","_save","_this5","delete","preventDefault","_this6","files","_this7","dataTransfer","classList","remove","add","dropEffect","clearTimeout","setTimeout","_this8","precioFinal","onDrop","onDragOver","onDragEnter","handlePhotoEnter","onDragLeave","handlePhotoLeave","classes","paddingBottom","overflowX","autoFocus","fullWidth","textField","inputProps","multiline","InputProps","endAdornment","control","grupos","g","input","inputLabel","handleSubmit","onSubmit","currentGroup","deleteGroup","editGroup","editGroupEnding","updateGrupo","handleGroupAction","handleItemClick","handleItemAction","editItemEnd","updateProduct","rawGroups","action","prop_name","grupo_a_actualizar","grupo","scrollGroupToItem","new_element","hasOwnProperty","exists","scrollToGroupId","onError","err","requestAnimationFrame","div","groupDIV","scrollTop","offsetTop","idProducto","scrollLeft","offsetLeft","changed_prop","Group_default","ProductDialog","d","TextPrompt_default","Input","fb","feedback","visible_props","helperText","validated","onUpdate","parseFloat","timeouts","handleUpdateProp","handleLogo","configuracion","avoidCatch","promise","logoSrc","logoFile","slogan","whatsAppMessage","whatsAppPhone","container","xs","maxLength","navigator","geolocation","PositionByIP","getCurrentPosition","geoLocation","coords","latitude","longitude","QUITO_BOUNDS","west","north","east","south","Components_Map","API_KEY","mapProps","objectWithoutProperties","Map_Map","marker","polygons","enableDrawingManager","onPolygonComplete","onMapMounted","onPolygonClick","onPolygonMouseUp","ref","elevation","DrawingManager_default","defaultDrawingMode","drawing","OverlayType","POLYGON","defaultOptions","drawingControl","drawingControlOptions","ControlPosition","TOP_CENTER","drawingModes","polygonOptions","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","editable","onMouseUp","baseTransporte","kmBaseTransporte","recargoPorKm","google_maps_key","cobrarTransporte","coberturas","editMode","handleTabContext","tabContextEl","handleTabContextClose","handleDeleteAllCoberturas","updateFeedback","handleMapMounted","handleNewPolygon","handlePolygonMouseUp","handleEditMode","handleMapClick","k","Geo","currentPosition","Polygon","vertices","getPath","getLength","getAt","toJSON","setMap","latLng","has_changed","previous","coord","prev_coord","LAST_COBERTURAS","mapRef","_fitBoundsToPolygon","_","bounds","LatLngBounds","extend","current_bounds","getBounds","union","fitBounds","hay_coberturas","MAP_OPTIONS","dias","desde","hasta","handleChange","handleDays","parts","INDEX","guardar","TimeSelect","DaysSelect","selectProps","o","horarios","handleEdit","horario","HorarioDialog_default","TimeToString","tz","ToDayString","minHour","_minHour","hour","min","telefono_contacto","nombre_contacto","handleNew","digits","digit","handleRemove","handleSave","dir","placeholder","colSpan","diabled","currentTab","defaultConfiguracion","openedTabs","handleTabChange","Informacion_default","Parametros_default","Cobertura_default","Horarios_default","Inbox","Category","Settings","handleMounted","permission","Notifications","ListenOrderChanges","requestPermission","log","react_router_dom","Contexts_StoreContext","Provider","AppBar_default","Orders_default","Products_default","Config_default","exact","styles","pdw","showPassword","handleTogglePassword","pwd","withStoresInfo","userInfo","onLogged","required","startAdornment","LaunchApp","ReactDOM","App_default","LoggedOut","LaunchLogin","Login_default","Logged"],"mappings":"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","file":"static/js/main.4fcb9258.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { AppBar, Toolbar, Typography, IconButton, Menu, MenuItem } from \"@material-ui/core\";\r\nimport { AccountCircle } from \"@material-ui/icons\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        menuEl: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleMenu = this.handleMenu.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleLogOut = this.handleLogOut.bind(this);\r\n    }\r\n    handleMenu(event) {\r\n        this.setState({ menuEl: event.currentTarget });\r\n    }\r\n    handleClose() {\r\n        this.setState({ menuEl: null });\r\n    }\r\n    handleLogOut() {\r\n        var ok = window.confirm(\"Est seguro de cerrar sesin?\");\r\n        if (ok) this.props.onLogOut();\r\n        this.handleClose();\r\n    }\r\n    render() {\r\n        const { title, store, user } = this.props;\r\n        const { menuEl } = this.state;\r\n        const open = Boolean(menuEl);\r\n        return (<AppBar position=\"fixed\" style={{ zIndex: 1201 }}>\r\n            <Toolbar style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <Typography style={{ flexGrow: 1 }} variant=\"h4\" color=\"inherit\" >{title || \"\"}</Typography>\r\n                <div style={{ display: \"block\", textAlign: \"right\" }}>\r\n                    <Typography color=\"inherit\" variant=\"button\">{(store.titulo || \"\").toUpperCase()}</Typography>\r\n                    <Typography color=\"inherit\" variant=\"caption\">{user}</Typography>\r\n                </div>\r\n                <div>\r\n                    <IconButton\r\n                        title={store.titulo}\r\n                        aria-owns={open ? 'menu-appbar' : undefined}\r\n                        aria-haspopup=\"true\"\r\n                        onClick={this.handleMenu}\r\n                        color=\"inherit\"\r\n                    >\r\n                        <AccountCircle />\r\n                    </IconButton>\r\n                    <Menu\r\n                        id=\"menu-appbar\"\r\n                        anchorEl={menuEl}\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={open}\r\n                        onClose={this.handleClose}\r\n                    >\r\n                        <MenuItem style={{ minWidth: 150 }} onClick={this.handleLogOut}>Salir</MenuItem>\r\n                    </Menu>\r\n                </div>\r\n            </Toolbar>\r\n        </AppBar>)\r\n    }\r\n};","import React from \"react\";\r\nimport { Drawer, List, ListItem, ListItemText, ListItemIcon, Divider } from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\nexport default function (props) {\r\n    const { STEPS, current_step } = props;\r\n    return (<Drawer variant=\"permanent\" style={{ maxWidth: 200 }}>\r\n        <div style={{ paddingTop: 70, width: 200 }}>\r\n            <List>\r\n                {STEPS.map((step, index) => (<React.Fragment key={index}>\r\n                    {step.addDividerBefore && <Divider />}\r\n                    <ListItem\r\n                        component={Link}\r\n                        to={\"/\" + step.id}\r\n                        selected={step.id === current_step}\r\n                        button\r\n                    >\r\n                        <ListItemText>{step.title}</ListItemText>\r\n                        <ListItemIcon>{<step.Icon />}</ListItemIcon>\r\n                    </ListItem>\r\n                </React.Fragment>\r\n                ))}\r\n            </List>\r\n        </div>\r\n    </Drawer>)\r\n}","export function ReadImgAsUrl(file) {\r\n    return new Promise((resolve, reject) => {\r\n        \r\n        if (file.type.indexOf(\"image\") < 0)\r\n            return reject({ message: \"El archivo no es una imagen\" });\r\n        var bytes = file.size;\r\n        var mbs = (bytes * 9.5367431640625e-7).round(2);\r\n        if (mbs > 5) return reject({\r\n            message: `Solo se pueden subir imagenes de hasta 15mb. Imagen actual (${mbs} MB)`\r\n        });\r\n\r\n        var reader = new FileReader();\r\n        reader.onload = (e) => resolve(e.target.result);\r\n        reader.onerror = reject;\r\n        reader.readAsDataURL(file);\r\n    });\r\n}\r\nexport function ImgFileToObject(file) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (file.type.indexOf(\"image\") < 0)\r\n            return reject({ message: \"El archivo no es una imagen\" });\r\n        var bytes = file.size;\r\n        var mbs = (bytes * 9.5367431640625e-7).round(2);\r\n        if (mbs > 5) return reject({\r\n            message: `Solo se pueden subir imagenes de hasta 15mb. Imagen actual (${mbs} MB)`\r\n        });\r\n\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            resolve({\r\n                base64: base64ArrayBuffer(event.target.result),\r\n                ext: file.type.split(\"/\")[1]\r\n            });\r\n        }\r\n        reader.onerror = reject;\r\n        reader.readAsArrayBuffer(file);\r\n    });\r\n}\r\n\r\nfunction base64ArrayBuffer(arrayBuffer) {\r\n    var base64 = ''\r\n    var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\n\r\n    var bytes = new Uint8Array(arrayBuffer)\r\n    var byteLength = bytes.byteLength\r\n    var byteRemainder = byteLength % 3\r\n    var mainLength = byteLength - byteRemainder\r\n\r\n    var a, b, c, d\r\n    var chunk\r\n\r\n    // Main loop deals with bytes in chunks of 3\r\n    for (var i = 0; i < mainLength; i = i + 3) {\r\n        // Combine the three bytes into a single integer\r\n        chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\r\n\r\n        // Use bitmasks to extract 6-bit segments from the triplet\r\n        a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\r\n        b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\r\n        c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\r\n        d = chunk & 63               // 63       = 2^6 - 1\r\n\r\n        // Convert the raw binary segments to the appropriate ASCII encoding\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\r\n    }\r\n\r\n    // Deal with the remaining bytes and padding\r\n    if (byteRemainder == 1) {\r\n        chunk = bytes[mainLength]\r\n\r\n        a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\r\n\r\n        // Set the 4 least significant bits to zero\r\n        b = (chunk & 3) << 4 // 3   = 2^2 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + '=='\r\n    } else if (byteRemainder == 2) {\r\n        chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\r\n\r\n        a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\r\n        b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\r\n\r\n        // Set the 2 least significant bits to zero\r\n        c = (chunk & 15) << 2 // 15    = 2^4 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + '='\r\n    }\r\n    return base64\r\n}","import io from \"socket.io-client\";\r\nimport { ImgFileToObject } from \"./ImageReader\";\r\n/*const URL = (window.location.href.indexOf(\"http://localhost\") === 0)\r\n    ? \"http://localhost:10000/data/\"\r\n    : (window.location.protocol === \"https:\"\r\n        ? \"https://orders-runfoodapp.rj.r.appspot.com/data/\"\r\n        : \"http://runfoodapp.ddns.net:10000/data/\");*/\r\nconst URL = \"https://orders.runfoodapp.com\";\r\n//const URL = \"http://localhost:10000\";\r\n\r\nconst QUITO = { lat: -0.180653, lng: -78.467834 };\r\n\r\nconst session = new Date().toString() + \":\" + Math.floor(100000 + Math.random() * 900000);\r\n\r\nexport function storeLoginData(info) {\r\n    if (info) {\r\n        window.localStorage.setItem(\"__\", JSON.stringify(info));\r\n    } else {\r\n        window.localStorage.removeItem(\"__\");\r\n    }\r\n}\r\nexport function viewLoginData() {\r\n    let info = window.localStorage.getItem(\"__\");\r\n    if (!info) return;\r\n    info = JSON.parse(info);\r\n    if (!info.position) info.position = QUITO;\r\n    return info;\r\n}\r\nfunction getToken() {\r\n    const info = viewLoginData();\r\n    if (!info) {\r\n        window.location.reload();\r\n        throw { message: \"Necesitas iniciar sesin para entrar aqu.\" };\r\n    }\r\n    return info.token + \"+\" + session;\r\n}\r\n\r\nconst LISTENERS = {\r\n    ON_ORDERS_CHANGED: []\r\n};\r\nlet socket;\r\nconst API = {\r\n    LogIn(data) {\r\n        return Fetch(`${URL}/login`, {\r\n            body: JSON.stringify(data),\r\n            method: \"POST\"\r\n        }).catch(x => {\r\n            if (x.status === 400) throw { ...x, message: \"Usuario o contrasea incorrectos.\" };\r\n            if (x.status === 401) throw { ...x };\r\n            if (x.status === 401) throw { ...x };\r\n        });\r\n    },\r\n\r\n    GetOrders(body) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order?${new URLSearchParams(body).toString()}`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    GetOrder(ID) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order/${ID}`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    OrdersOnRoute(orders) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order-actions/ON-ROUTE`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ orders }),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    OrdersDelivered(orders) {\r\n        return Fetch(`${URL}/data/${this.storeID}/order-actions/DELIVERED`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ orders }),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    ListenOnOrderChange(fn) {\r\n        LISTENERS.ON_ORDERS_CHANGED.push(fn);\r\n        return () => LISTENERS.ON_ORDERS_CHANGED.splice(LISTENERS.ON_ORDERS_CHANGED.indexOf(fn), 1);\r\n    },\r\n\r\n    GetGroups() {\r\n        return Fetch(`${URL}/data/${this.storeID}/group?admin_info=true`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    SaveGroup(group) {\r\n        const ID = group.id;\r\n        return Fetch(`${URL}/data/${this.storeID}/group${ID ? `/${ID}` : \"\"}`, {\r\n            method: ID ? \"PUT\" : \"POST\",\r\n            body: JSON.stringify(group),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    },\r\n    RequestActionGroup(group) {\r\n        return Fetch(`${URL}/data/${this.storeID}/group/${group.id}`, {\r\n            method: \"PATCH\",\r\n            body: JSON.stringify(group),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    },\r\n    DeleteGroup(group) {\r\n        return Fetch(`${URL}/data/${this.storeID}/group/${group.id}`, {\r\n            method: \"DELETE\",\r\n            body: JSON.stringify(group),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n\r\n    GetProduct(ID) {\r\n        return Fetch(`${URL}/data/${this.storeID}/product/${ID}?admin_info=true`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    SaveProduct(product) {\r\n        const ID = product.id && product.id !== \"NUEVO\" && product.id;\r\n        return Fetch(`${URL}/data/${this.storeID}/product${ID ? `/${ID}` : \"\"}`, {\r\n            method: ID ? \"PUT\" : \"POST\",\r\n            body: JSON.stringify(product),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    },\r\n    RequestActionProduct(product) {\r\n        return Fetch(`${URL}/data/${this.storeID}/product/${product.id}`, {\r\n            method: \"PATCH\",\r\n            body: JSON.stringify(product),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        })\r\n    },\r\n    DeleteProduct(product) {\r\n        return Fetch(`${URL}/data/${this.storeID}/product/${product.id}`,\r\n            {\r\n                method: \"DELETE\",\r\n                body: JSON.stringify(product),\r\n                headers: {\r\n                    \"Authorization\": \"Basic \" + btoa(getToken())\r\n                }\r\n            })\r\n    },\r\n\r\n    GetParamContactos() {\r\n        return Fetch(`${URL}/data/${this.storeID}/config?items=contactos`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    GetConfigInfo() {\r\n        return Fetch(`${URL}/data/${this.storeID}/config`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    setConfigInfo(info_item) {\r\n        return Fetch(`${URL}/data/${this.storeID}/config`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(info_item),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n\r\n    START_LISTENING() {\r\n        socket = io(URL, {\r\n            query: {\r\n                token: btoa(getToken())\r\n            },\r\n            reconnection: true,\r\n            transports: [\"polling\"]\r\n        });\r\n        console.info(\"SOCKET CONNECTED\");\r\n        socket.on(\"ORDERS_CHANGED\", data => {\r\n            if (data.origin === btoa(getToken())) return;\r\n            LISTENERS.ON_ORDERS_CHANGED.forEach(fn => fn(data.payload, !data.deletedAt));\r\n        });\r\n    },\r\n    STOP_LISTENING() {\r\n        socket && socket.disconnect();\r\n        console.info(\"SOCKET DISCONNECTED\");\r\n    }\r\n}\r\n\r\nfunction Fetch(URI, options) {\r\n    const DEFAULTS = {\r\n        method: \"GET\",\r\n        cache: \"reload\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Access-Control-Allow-Origin': '*'\r\n        }\r\n    };\r\n    // headers\r\n    if (options && options.headers) {\r\n        for (const key in options.headers) {\r\n            DEFAULTS.headers[key] = options.headers[key];\r\n        }\r\n        delete options.headers;\r\n    }\r\n    return fetch(URI, { ...DEFAULTS, ...options }).then(response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        } else {\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }\r\n    }).catch(ex => {\r\n        if (ex.message === \"Failed to fetch\") {\r\n            throw {\r\n                message: \"Este servicio no se encuentra disponible por el momento. Intentelo ms tarde.\",\r\n                status: 0\r\n            }\r\n        }\r\n        if (!ex.message) ex.message = ex.statusText;\r\n        throw ex;\r\n    });\r\n}\r\nexport default API;\r\n\r\n","import React from \"react\";\r\nconst StoreContext = React.createContext({\r\n    porcentajeIVA: 12\r\n});\r\nexport default StoreContext;","import React from \"react\";\r\nimport { DialogContent, Dialog, CircularProgress, Typography, Divider, DialogActions, Button, TextField, InputAdornment, IconButton } from \"@material-ui/core\";\r\nimport { PhoneOutlined, BusinessOutlined, LocationOnOutlined, Send } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport StoreContext from \"../../Contexts/StoreContext\";\r\nimport OrderToPhone from \"../../Services/WhatsApp\";\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        data: null,\r\n        error: null,\r\n        phone: \"\"\r\n    }\r\n    static contextType = StoreContext;\r\n    constructor(props) {\r\n        super(props);\r\n        this.close = this.close.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        Promise.all([\r\n            API.GetOrder(this.props.match.params.id),\r\n            API.GetParamContactos()\r\n        ]).then(([data, contactos]) => this.setState({ data, contactos })\r\n        ).catch(error => this.setState({ error }));\r\n    }\r\n    handlePhone = (event) => {\r\n        this.setState({ phone: event.currentTarget.value });\r\n    }\r\n    close() {\r\n        this.props.history.goBack();\r\n    }\r\n    render() {\r\n        const porcentajeIVA = (this.context && this.context.porcentajeIVA) || 12;\r\n        const { data, error, phone, contactos } = this.state;\r\n        if (!data) return (<Dialog open={true} onClose={this.close} >\r\n            <DialogContent style={{ minWidth: 400, height: 400 }}>\r\n                {error\r\n                    ? (<div style={{ textAlign: \"center\", padding: 20 }}>\r\n                        <Typography variant=\"h6\">Ocurri un error</Typography>\r\n                        <Typography variant=\"body2\">{error.message}</Typography>\r\n                        <Typography variant=\"button\">{error.status} {error.statusText}</Typography>\r\n                    </div>)\r\n                    : (<div style={{ textAlign: \"center\", padding: 100 }}>\r\n                        <CircularProgress size={100} />\r\n                        <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                    </div>)}\r\n            </DialogContent>\r\n        </Dialog>);\r\n\r\n        const facturaConDatos = data.documento_factura && data.identificacion_factura;\r\n        var _detalle_ = [...data.detalle];\r\n        if (data.valor_delivery) _detalle_.push({\r\n            id: \"DOMICILIO\",\r\n            pvp: data.valor_delivery,\r\n            cantidad: 1,\r\n            pagaIva: false\r\n        });\r\n        const TOTALES = _detalle_.reduce((a, x) => {\r\n            var neto = (x.pvp * x.cantidad);\r\n            a.cantidad += x.cantidad;\r\n            a.neto += neto;\r\n            if (x.pagaIva) a.iva += (neto * porcentajeIVA) / 100;\r\n            return a;\r\n        }, {\r\n            cantidad: 0,\r\n            neto: 0,\r\n            iva: 0\r\n        });\r\n        TOTALES.total = (TOTALES.neto + TOTALES.iva).round(2);\r\n\r\n\r\n        var DOMICILIO_INFO = [];\r\n        if (data.mts_delivery) DOMICILIO_INFO.push(`${(data.mts_delivery / 1000).round(1)} km`);\r\n        if (data.segs_delivery) DOMICILIO_INFO.push(`${(data.segs_delivery / 60).round(1)} min`);\r\n        if (DOMICILIO_INFO.length) {\r\n            DOMICILIO_INFO = DOMICILIO_INFO.join(\" / \");\r\n        } else {\r\n            DOMICILIO_INFO = \"\";\r\n        }\r\n\r\n        const fecha = FechaHoraStr(data.fechaEnvio || data.createdAt);\r\n\r\n        return (<Dialog open={true} onClose={this.close}>\r\n            <DialogContent style={{ minWidth: 400, height: 400 }}>\r\n                <Typography style={{ textAlign: \"center\" }} variant=\"h5\">ORDEN #{data.numero}</Typography>\r\n\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">FECHA: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{fecha}</Typography>\r\n                </div>\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">CLIENTE: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.nombre}</Typography>\r\n                </div>\r\n                {(data.Documento || data.identificacion) && <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">{data.Documento || \"C.I. / RUC\"}: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.identificacion}</Typography>\r\n                </div>}\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">TLF: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.telefono}</Typography>\r\n                </div>\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">DIRECCION: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.direccion}</Typography>\r\n                </div>\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 90 }} variant=\"body2\">REFERENCIA: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.referencia}</Typography>\r\n                </div>\r\n\r\n                <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Typography style={{ flex: 1, marginRight: 10 }} variant=\"h6\">PRODUCTO</Typography>\r\n                    <Typography style={{ width: 60, marginRight: 10 }} variant=\"h6\">CANT</Typography>\r\n                    <Typography style={{ width: 70, textAlign: \"right\" }} variant=\"h6\">TOTAL</Typography>\r\n                </div>\r\n\r\n                {data.detalle.map((item, index) => <RowDet {...item} key={index} porcentajeIVA={porcentajeIVA} />)}\r\n                {data.valor_delivery ? <RowDet\r\n                    color=\"primary\"\r\n                    cantidad={1}\r\n                    pvp={data.valor_delivery}\r\n                    descripcion={\"ENVIO A DOMICILIO \" + DOMICILIO_INFO}\r\n                /> : null}\r\n\r\n                <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginTop: 10 }}>\r\n                    <Typography variant=\"h6\" style={{ flex: 1, marginRight: 10 }} >TOTAL</Typography>\r\n                    <Typography style={{ marginRight: 10, width: 60 }} variant=\"h6\">{TOTALES.cantidad.round(4)}</Typography>\r\n                    <Typography style={{ width: 70, textAlign: \"right\" }} variant=\"h6\">$ {TOTALES.total.toFixed(2)}</Typography>\r\n                </div>\r\n\r\n                <Divider style={{ marginTop: 10 }} />\r\n                <Typography>PAGO : {data.FormaPago}</Typography>\r\n                {data.numeroTransaccion && <Typography># de Comprobante :{data.numeroTransaccion}</Typography>}\r\n                <Typography>NOTAS: {data.nota}</Typography>\r\n\r\n                {facturaConDatos && <div>\r\n                    <Divider style={{ marginTop: 10 }} />\r\n                    <Typography style={{ textAlign: \"center\", width: \"100%\" }} variant=\"h6\">DATOS DE FACTURACIN</Typography>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                        <Typography variant=\"body2\">{data.Documento_factura}:</Typography>\r\n                        <Typography variant=\"body2\" style={{ flex: 1, marginLeft: 10 }}>{data.identificacion_factura}</Typography>\r\n                    </div>\r\n                    <DatosFacturaItem title=\"Razon Social\" icon={BusinessOutlined} text={data.razonsocial_factura} />\r\n                    <DatosFacturaItem title=\"Telefono\" icon={PhoneOutlined} text={data.telefono_factura} />\r\n                    <DatosFacturaItem title=\"Direccin\" icon={LocationOnOutlined} text={data.direccion_factura} />\r\n                </div>}\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <TextField\r\n                    style={{ flex: 1, margin: 5 }}\r\n                    type=\"phone\"\r\n                    value={phone}\r\n                    margin=\"none\"\r\n                    onChange={this.handlePhone}\r\n                    variant=\"standard\"\r\n                    select={true}\r\n                    SelectProps={{\r\n                        native: true\r\n                    }}\r\n                >\r\n                    <option value=\"\">ENVIAR UNA PERSONA</option>\r\n                    {contactos.map(c => <option value={c.telefono}>{c.nombre}</option>)}\r\n                </TextField>\r\n\r\n                <Button\r\n                    title=\"Enviar por WhatsApp\"\r\n                    component=\"a\"\r\n                    href={OrderToPhone({ ...data, total: TOTALES.total, phone })} target=\"_blank\"\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                >\r\n                    <Send />\r\n                </Button>\r\n\r\n                <Button variant=\"outlined\" color=\"secondary\" onClick={this.close}>\r\n                    SALIR\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>)\r\n    }\r\n}\r\n\r\nfunction RowDet(props) {\r\n    var neto = props.pvp * props.cantidad;\r\n    var iva = props.pagaIva ? ((neto * props.porcentajeIVA) / 100) : 0;\r\n    return (<div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginTop: 5, marginBottom: 5 }}>\r\n        <div style={{ flex: 1, marginRight: 10 }}>\r\n            <Typography color={props.color || \"default\"} variant=\"subtitle2\">{props.descripcion}</Typography>\r\n            <Typography style={{ paddingLeft: 10 }} color={props.color || \"default\"} variant=\"body1\">{props.nota}</Typography>\r\n        </div>\r\n        <Typography color={props.color || \"default\"} style={{ marginRight: 10, width: 60 }} variant=\"subtitle2\">{props.cantidad.round(4)}</Typography>\r\n        <Typography color={props.color || \"default\"} style={{ width: 70, textAlign: \"right\" }} variant=\"subtitle2\">$ {(neto + iva).round(2).toFixed(2)}</Typography>\r\n    </div>)\r\n}\r\n\r\nfunction DatosFacturaItem(props) {\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"row\" }} title={props.title}>\r\n            <props.icon />\r\n            <Typography style={{ padding: 3, flex: 1 }}>{props.text}</Typography>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction FechaHoraStr(f) {\r\n    if (!f) return;\r\n    var fecha = new Date(f);\r\n    return fecha.toDateString() + \" \" + fecha.toLocaleTimeString();\r\n}","export default function OrderToPhone(data) {\r\n    var text = `ORDEN *#${data.numero}*\\n` +\r\n        \"CLIENTE: \" +\r\n        `*${(data.nombre || \"\").trim()}*\\n` +\r\n        \"TELEFONO: \" +\r\n        `*${(data.telefono || \"\").trim()}*\\n` +\r\n        \"\\n\" +\r\n        \"PRODUCTOS:\\n\" +\r\n        (data.detalle.map(x => {\r\n            return \"```\" + padR(x.cantidad) + \" \" + (x.descripcion || \"\").trim() + \"```\";\r\n        }).join(\"\\n\")) +\r\n        \"\\n\" +\r\n        \"\\n\" +\r\n        (data.nota && (\"NOTAS: \" + \"*\" + data.nota.trim() + \"*\\n\")) +\r\n        \"METODO DE PAGO: \" +\r\n        \"*\" + data.FormaPago + \" $\" + data.total.toFixed(2) + \"*\\n\" +\r\n        \"DIRECCION: \" +\r\n        `*${(data.direccion || \"\").trim()}* *${(data.referencia || \"\").trim()}*\\n` +\r\n        \" https://www.google.com/maps/dir/-\" + data.lat + \",\" + data.lng;\r\n\r\n    //return `https://wa.me/${data.phone}/?text=` + encodeURIComponent(text);\r\n    return \"whatsapp://send?phone=\" + data.phone + \"&text=\" + encodeURIComponent(text);\r\n}\r\n\r\nfunction padR(number, length) {\r\n    var str = number.toString();\r\n    if (str.length === length) return str;\r\n    if (str.length >= length) return str.substr(0, length);\r\n\r\n    var dif = length - str.length;\r\n    for (let i = 0; i < dif; i++) {\r\n        str += \" \";\r\n    }\r\n    return str;\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TableRow, TableCell, TableBody, Checkbox, Typography } from \"@material-ui/core\";\r\nimport { Check } from \"@material-ui/icons\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport { Route, withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        if (props.onMounted) props.onMounted(null, props.estado);\r\n    }\r\n    handleClick(event) {\r\n        event.stopPropagation();\r\n\r\n        const { id } = event.currentTarget;\r\n        // agregar un MODAL\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    render() {\r\n        const { data, onSelect, estado, now, timeCol } = this.props;\r\n        const rows = data.filter(x => x.estado === estado);\r\n        return (<Table component=\"div\" style={{ display: \"flex\", flexDirection: \"column\", height: \"calc(100% - 100px)\" }}>\r\n            <TableHead component=\"div\" style={{ display: \"block\" }}>\r\n                <TableRow component=\"div\" style={{ width: \"20%\" }}>\r\n                    <TableCell component=\"div\" style={{ textAlign: \"center\" }}>\r\n                        <Check />\r\n                    </TableCell>\r\n                    <TableCell component=\"div\" style={{ width: \"20%\" }}>\r\n                        <Typography variant=\"button\">#</Typography>\r\n                    </TableCell>\r\n                    <TableCell component=\"div\" style={{ width: \"60%\" }}>\r\n                        <Typography variant=\"button\">Cliente</Typography>\r\n                    </TableCell>\r\n                    <TableCell component=\"div\" style={{ width: \"20%\" }}>\r\n                        <Typography variant=\"button\">Hora</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            </TableHead>\r\n            <TableBody component=\"div\" style={{ flex: 1, overflow: \"auto\", display: \"block\" }}>\r\n                {rows.map(x => <Row\r\n                    onClick={this.handleClick}\r\n                    onCheck={onSelect}\r\n                    timeCol={timeCol}\r\n                    key={x.id}\r\n                    {...x}\r\n                    now={now}\r\n                />)}\r\n            </TableBody>\r\n            <Route component={OrderDetails} path={`${this.props.match.path}/:id`} />\r\n\r\n        </Table>);\r\n    }\r\n});\r\n\r\n\r\nclass Row extends React.PureComponent {\r\n    render() {\r\n        const { props } = this;\r\n        return (<TableRow\r\n            tabIndex={0}\r\n            style={{ width: \"100%\", cursor: \"pointer\" }}\r\n            onContextMenu={props.onContextMenu}\r\n            selected={props.selected}\r\n            hover\r\n            id={\"\" + props.id}\r\n            onClick={props.onClick}\r\n            component={\"div\"}\r\n        >\r\n            <TableCell component=\"div\" padding=\"checkbox\" style={{ width: \"20%\" }}>\r\n                {props.timeCol === \"deliveredAt\"\r\n                    ? <Check />\r\n                    : <Checkbox checked={props.selected || false}\r\n                        value={\"\" + props.id}\r\n                        onClick={props.onCheck} />\r\n                }\r\n            </TableCell>\r\n            <TableCell style={{ width: \"20%\" }} component=\"div\" scope=\"row\" >{props.numero}</TableCell>\r\n            <TableCell style={{ width: \"60%\" }} component=\"div\">{props.nombre}</TableCell>\r\n            <TableCell style={{ width: \"20%\" }} component=\"div\" title={new Date(props[props.timeCol]).toLocaleString()}>\r\n                {RenderTimeCol(new Date(props[props.timeCol]))}\r\n            </TableCell>\r\n        </TableRow >);\r\n    }\r\n}\r\nfunction RenderTimeCol(value) {\r\n    var day = DayOfYear(value);\r\n    var today = DayOfYear(new Date());\r\n    if (day === today)\r\n        return toHHMM(value);\r\n    if ((day + 1) === today)\r\n        return \"Ayer \" + toHHMM(value);\r\n    if (today > day && (today - day) < 6) {\r\n        return \"Hace \" + (today - day) + \" dias \" + toHHMM(value);\r\n    }\r\n    return value.toLocaleString();\r\n}\r\nfunction DayOfYear(date) {\r\n    var start = new Date(date.getFullYear(), 0, 0);\r\n    var diff = date - start;\r\n    var oneDay = 1000 * 60 * 60 * 24;\r\n    return Math.floor(diff / oneDay);\r\n}\r\nfunction toHHMM(value) {\r\n    var hours = value.getHours();\r\n    var mins = value.getMinutes();\r\n    return `${TwoPlaces(hours)}:${TwoPlaces(mins)}`;\r\n}\r\nfunction TwoPlaces(item) {\r\n    return (item.toString().length === 1 ? \"0\" : \"\") + item.toString();\r\n}","import React from \"react\";\r\nimport { CircularProgress, Typography, Button, Tabs, Tab } from \"@material-ui/core\";\r\nimport { Error } from \"@material-ui/icons\";\r\nimport { withGoogleMap, GoogleMap, withScriptjs } from \"react-google-maps\";\r\nimport { MarkerWithLabel } from \"react-google-maps/lib/components/addons/MarkerWithLabel\";\r\nimport API from \"../../Services/API\";\r\nimport OrdersTable from \"./OrdersTable\";\r\nimport { Route, Link, Switch, Redirect } from \"react-router-dom\";\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        now: new Date().valueOf(),\r\n        data: [],\r\n        loading: true,\r\n        goToCenter: null,\r\n        navigationValue: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleRightClick = this.handleRightClick.bind(this);\r\n        this.handleSelect = this.handleSelect.bind(this);\r\n        this.handleCurrentLocation = this.handleCurrentLocation.bind(this);\r\n        this.handleNavigation = this.handleNavigation.bind(this);\r\n        this.handleChangeState = this.handleChangeState.bind(this);\r\n        this.__updateRecords = this.__updateRecords.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        // por segundo hasta llegar al minuto\r\n        /*this.STOP_TIMER = setMinuteTimer(() => {\r\n            this.setState({ now: new Date().valueOf() })\r\n        });*/\r\n        API.GetOrders()\r\n            .then(data => {\r\n                this.setState({ data, loading: false });\r\n                this.REMOVE_LISTENER = API.ListenOnOrderChange(this.__updateRecords);\r\n            }).catch(error => this.setState({ error, loading: false }));\r\n    }\r\n    componentWillUnmount() {\r\n        this.STOP_TIMER && this.STOP_TIMER();\r\n        this.REMOVE_LISTENER && this.REMOVE_LISTENER();\r\n    }\r\n    handleRightClick(item) {\r\n\r\n    }\r\n    handleSelect(event) {\r\n        event.stopPropagation();\r\n        const { value, checked } = event.target;\r\n        this.setState(function (prev) {\r\n            const state = { ...prev };\r\n            state.data = prev.data;\r\n            const item = state.data.find(x => x.id === +value);\r\n            if (!item) return state;\r\n            item.selected = checked;\r\n            if (item.selected) {\r\n                state.goToCenter = { lat: +item.lat, lng: +item.lng };\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    handleCurrentLocation() {\r\n        this.setState({\r\n            goToCenter: this.props.store.position\r\n        });\r\n    }\r\n    handleNavigation(event, navigationValue) {\r\n        this.setState({ navigationValue });\r\n    }\r\n    handleChangeState() {\r\n        const { data, navigationValue } = this.state;\r\n        const selections = data.filter(x => x.selected && x.estado === navigationValue);\r\n        if (!selections.length) return alert(\"Seleccione al menos un registro\");\r\n        const IDS = selections.map(x => x.id);\r\n        this.setState({ loading: true });\r\n        if (navigationValue === 0) {\r\n            return API.OrdersOnRoute(IDS)\r\n                .then(this.__updateRecords)\r\n                .catch(error => this.setState({ error, loading: false }));\r\n        }\r\n        if (navigationValue === 1) {\r\n            return API.OrdersDelivered(IDS)\r\n                .then(this.__updateRecords)\r\n                .catch(error => this.setState({ error, loading: false }));\r\n        }\r\n        this.setState({ loading: false });\r\n        alert(\"No se encontro el navigationValue=\" + navigationValue);\r\n    }\r\n    __updateRecords(results, addIfNotExists) {\r\n        this.setState(prev => {\r\n            const state = { ...prev, loading: false };\r\n            state.data = prev.data;\r\n            results.forEach(res => {\r\n                const item = state.data.find(x => x.id === res.id);\r\n                if (item) {\r\n                    return state.data[state.data.indexOf(item)] = { ...item, selected: false, ...res };\r\n                }\r\n                if (!item && addIfNotExists) state.data.push(res);\r\n            });\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { now, loading, error, data, goToCenter, navigationValue } = this.state;\r\n\r\n        if (loading) {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", margin: \"auto\", paddingTop: 100 }}>\r\n                <CircularProgress size={70} />\r\n                <Typography variant=\"h4\" >CARGANDO...</Typography>\r\n            </div>);\r\n        }\r\n        if (error) {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", margin: \"auto\", paddingTop: 100 }}>\r\n                <Error size={70} />\r\n                <Typography variant=\"h4\">Ocurri un error</Typography>\r\n                <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                <Typography variant=\"body1\">{error.status} | {error.statusText} | {error.code}</Typography>\r\n            </div>)\r\n        }\r\n\r\n        const G_M_K = (this.props.store && this.props.store.G_M_K) || \"\";\r\n        const selections = data.filter(x => x.selected && x.estado === navigationValue);\r\n\r\n        return (<div style={{ display: \"flex\", flexDirection: \"row\", height: \"100%\" }}>\r\n            <div style={{ flex: 1, overflow: \"auto\", height: \"100%\" }}>\r\n                <Tabs textColor=\"primary\" indicatorColor=\"primary\" style={{ width: \"100%\" }} color=\"primary\" value={navigationValue} onChange={this.handleNavigation}>\r\n                    <Tab style={{ width: \"32%\" }} label=\"Pendientes\" component={Link} to={this.props.match.path + \"/0\"} />\r\n                    <Tab style={{ width: \"32%\" }} label=\"En Ruta\" component={Link} to={this.props.match.path + \"/1\"} />\r\n                    <Tab style={{ width: \"32%\" }} label=\"Entregado\" component={Link} to={this.props.match.path + \"/2\"} />\r\n                </Tabs>\r\n                <Switch>\r\n                    <Route path={this.props.match.path + \"/0\"} render={props =>\r\n                        (<OrdersTable\r\n                            onMounted={this.handleNavigation}\r\n                            {...props}\r\n                            data={data}\r\n                            timeCol={\"fecha\"}\r\n                            selections={selections}\r\n                            onSelect={this.handleSelect}\r\n                            now={now}\r\n                            estado={0}\r\n                        />)} />\r\n                    <Route path={this.props.match.path + \"/1\"} render={props =>\r\n                        (<OrdersTable\r\n                            onMounted={this.handleNavigation}\r\n                            {...props}\r\n                            data={data}\r\n                            timeCol={\"onRouteAt\"}\r\n                            selections={selections}\r\n                            onSelect={this.handleSelect}\r\n                            estado={1}\r\n                        />)} />\r\n                    <Route path={this.props.match.path + \"/2\"} render={props =>\r\n                        (<OrdersTable\r\n                            onMounted={this.handleNavigation}\r\n                            {...props}\r\n                            data={data}\r\n                            timeCol={\"deliveredAt\"}\r\n                            selections={selections}\r\n                            onSelect={this.handleSelect}\r\n                            estado={2}\r\n                        />)} />\r\n                    <Redirect path={this.props.match.path} to={this.props.match.path + \"/0\"} />\r\n                </Switch>\r\n                {navigationValue === 2\r\n                    ? null\r\n                    : (<div style={{ display: \"flex\", flexDirection: \"row\", paddingLeft: 10, paddingRight: 10 }}>\r\n                        <Button disabled={!selections.length} style={{ flex: 1 }} variant=\"outlined\" color=\"primary\" onClick={this.handleChangeState}>{submitText(navigationValue)}</Button>\r\n                        <Button\r\n                            variant=\"outlined\"\r\n                            style={{ marginLeft: 10 }}\r\n                            color=\"secondary\"\r\n                            disabled={!selections.length}\r\n                            target=\"_blank\"\r\n                            href={ruta(this.props.store.position, selections || [])}\r\n                            component=\"a\"\r\n                        >Ruta</Button>\r\n                    </div>)}\r\n            </div>\r\n            <div style={{ flex: 1, overflow: \"auto\", height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n                <div style={{ flex: 1 }}>\r\n                    <Map\r\n                        googleMapURL={`https://maps.googleapis.com/maps/api/js?key=${G_M_K || \"\"}&v=3.exp&libraries=geometry,drawing,places`}\r\n                        containerElement={<div style={{ height: \"100%\" }} />}\r\n                        loadingElement={<div style={{ height: `100%` }} />}\r\n                        mapElement={<div style={{ height: `100%` }} />}\r\n                        selections={selections}\r\n                        store={this.props.store}\r\n                        center={goToCenter || this.props.store.position}\r\n                    >\r\n                    </Map>\r\n                </div>\r\n            </div>\r\n        </div>)\r\n    }\r\n}\r\n\r\nfunction ruta(currentLocation, locations) {\r\n    const rutas = [currentLocation];\r\n    for (let i = 0; i < locations.length; i++) {\r\n        rutas.push(locations[i]);\r\n    }\r\n    if (rutas.length === 1) return \"\";\r\n    return \"https://www.google.com/maps/dir/ \" +\r\n        rutas.map(x => [x.lat, x.lng].join(\",\")).join(\"/\");\r\n}\r\n\r\n/*function setMinuteTimer(Callback) {\r\n    var interval_mins;\r\n    var interval_secs;\r\n    interval_secs = setInterval(() => {\r\n        const secs = new Date().getSeconds();\r\n        if (secs === 0) {\r\n            clearInterval(interval_secs);\r\n            setMinutes();\r\n        }\r\n    }, 1000);\r\n    function setMinutes() {\r\n        interval_mins = setInterval(() => Callback()\r\n            , 1000 * 60);\r\n    }\r\n    return function stop() {\r\n        if (interval_secs !== undefined)\r\n            clearInterval(interval_secs);\r\n        if (interval_mins !== undefined)\r\n            clearInterval(interval_mins);\r\n    }\r\n}\r\n*/\r\nconst Map = withScriptjs(withGoogleMap(props => {\r\n    return (<GoogleMap\r\n        {...props}\r\n        defaultCenter={props.store.position}\r\n        defaultZoom={15}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n    >\r\n        <MarkerWithLabel\r\n            labelAnchor={new window.google.maps.Point(0, 0)}\r\n            position={props.store.position}\r\n            options={{\r\n                icon: \"./store.png\"\r\n            }}\r\n            labelStyle={{ background: \"#fff\", border: \"1px solid #29b6f6\", padding: \"2px 10px\" }}\r\n        >\r\n            <Typography variant=\"body1\" color=\"inherit\">Tu Tienda</Typography>\r\n        </MarkerWithLabel>\r\n        {props.selections && props.selections.map(x => (<MarkerWithLabel\r\n            key={x.id}\r\n            labelAnchor={new window.google.maps.Point(0, 0)}\r\n            position={{ lat: +x.lat, lng: +x.lng }}\r\n            labelStyle={{ background: \"#fff\", border: \"1px solid grey\", padding: \"2px 10px\" }}\r\n\r\n        >\r\n            <Typography variant=\"button\">{x.nombre}</Typography>\r\n        </MarkerWithLabel>))}\r\n    </GoogleMap>)\r\n}));\r\n\r\nfunction submitText(step) {\r\n    if (step === 0) return \"ENVIAR\";\r\n    if (step === 1) return \"ENTREGADO\";\r\n    return step;\r\n}","import React from \"react\";\r\nimport { TextField, InputAdornment, CircularProgress, Typography } from \"@material-ui/core\";\r\nimport { ReportProblem } from \"@material-ui/icons\";\r\n\r\nvar timeout;\r\nexport default function Input(props) {\r\n    function onChange(event) {\r\n        const { type, value } = event.currentTarget;\r\n        props.onChange(event);\r\n        var validated = true;\r\n        if (type === \"number\") {\r\n            validated = (value !== null && value !== undefined) &&\r\n                value.toString().length\r\n                && !isNaN(+value);\r\n        }\r\n        if (timeout) clearTimeout(timeout);\r\n        if (props.onUpdate && validated) {\r\n            timeout = setTimeout(() => {\r\n                props.onUpdate(props.name, type === \"number\" ? parseFloat(value) : value)\r\n            }, 1500);\r\n        }\r\n    }\r\n\r\n    var fb = props.feedback[props.name];\r\n    var error = fb && fb !== \"loading\";\r\n    var visible_props = {\r\n        InputProps: fb && (\r\n            fb === \"loading\"\r\n                ? {\r\n                    endAdornment: (<InputAdornment>\r\n                        <CircularProgress title=\"Guardando...\" color=\"primary\" size={20} />\r\n                    </InputAdornment>)\r\n                }\r\n                : {\r\n                    endAdornment: (<InputAdornment>\r\n                        <ReportProblem color=\"secondary\" />\r\n                    </InputAdornment>)\r\n                }\r\n        )\r\n    }\r\n    if (error) {\r\n        visible_props.helperText = <Typography variant=\"caption\" color=\"secondary\">{fb}</Typography>\r\n    }\r\n    return (\r\n        <TextField\r\n            type={props.type}\r\n            style={{ marginTop: 10, marginBottom: 10 }}\r\n            fullWidth\r\n            onChange={onChange}\r\n            value={props.value}\r\n            label={props.label}\r\n            name={props.name}\r\n            multiline={props.multiline}\r\n            inputProps={props.inputProps}\r\n            {...visible_props}\r\n            color={error ? \"secondary\" : \"primary\"}\r\n        />);\r\n}","import API from \"./API\";\r\n\r\nexport default class {\r\n    static ListenOrderChanges() {\r\n        return API.ListenOnOrderChange(([x]) => {\r\n            let N;\r\n            if (x.estado === 0)\r\n                N = new Notification(\"NUEVO PEDIDO\", {\r\n                    body: x.nombre + \" - Orden #\" + x.numero,\r\n                    icon: \"./favicon.ico\"\r\n                });\r\n            if (x.estado === 1)\r\n                N = new Notification(\"LA ORDEN #\" + x.numero + \" EST EN RUTA\", {\r\n                    body: x.nombre + \" - Orden #\" + x.numero,\r\n                    icon: \"./favicon.ico\"\r\n                });\r\n            if (x.estado === 2)\r\n                N = new Notification(\"LA ORDEN #\" + x.numero + \" FUE ENTREGADA\", {\r\n                    body: x.nombre + \" - Orden #\" + x.numero,\r\n                    icon: \"./favicon.ico\"\r\n                });\r\n            if (x.estado === 3) {\r\n                N = new Notification(\"LA ORDEN #\" + x.numero + \" FUE CANCELADA\", {\r\n                    body: x.nombre + \" - Orden #\" + x.numero,\r\n                    icon: \"./favicon.ico\"\r\n                });\r\n                N = null;\r\n            }\r\n            if (N) N.onclick = () => {\r\n                window.focus();\r\n                window.location.href = \"#/orders/\" + x.estado + \"/\" + x.id;\r\n            }\r\n        });\r\n\r\n    }\r\n}","import React from \"react\";\r\nimport {\r\n    Typography, IconButton,\r\n    Card, CardActionArea, CardMedia, CardContent, CardActions,\r\n    CircularProgress\r\n} from \"@material-ui/core\";\r\nimport {\r\n    Pause, PlayArrow, ArrowLeft, ArrowRight, VisibilityOff\r\n} from \"@material-ui/icons\";\r\n\r\nexport default function (props) {\r\n    const paused_color = props.paused ? \"secondary\" : \"primary\";\r\n    return (<Card\r\n        style={{ display: \"inline-block\", width: 200, margin: 10, height: 285 }}\r\n        id={\"ITEM-CONTAINER-\" + props.id}\r\n        title={props.nombre + (props.habilitado ? \"\" : \" - DESHABILITADO\")}\r\n    >\r\n        <CardActionArea style={{ height: 220, overflow: \"hidden\" }} value={props.id} onClick={props.onItemClick}>\r\n            {props.habilitado\r\n                ? <CardMedia\r\n                    style={{ height: 140 }}\r\n                    image={props.imgSrc || \"https://diegopq95.github.io/img/default.png\"}\r\n                    title={props.nombre}\r\n                />\r\n                : <div style={{ height: 140, display: \"table\", textAlign: \"center\", width: \"100%\" }}>\r\n                    <div style={{ display: \"table-cell\", margin: \"auto\", verticalAlign: \"middle\" }}>\r\n                        <VisibilityOff fontSize=\"large\" />\r\n                    </div>\r\n                </div>}\r\n            <CardContent>\r\n                <Typography variant=\"subtitle2\">{props.nombre}</Typography>\r\n                <Typography variant=\"body1\" style={{ whiteSpace: \"pre-wrap\" }} >{props.descripcion}</Typography>\r\n            </CardContent>\r\n        </CardActionArea>\r\n        {props.habilitado\r\n            && <CardActions style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <IconButton\r\n                    onClick={props.onItemAction}\r\n                    disabled={props.loading === \"pause\"}\r\n                    name=\"pause\"\r\n                    value={props.id}\r\n                    color={paused_color}\r\n                    title={props.paused ? \"No Disponible\" : \"Disponible\"}\r\n                >\r\n                    {props.loading === \"pause\"\r\n                        ? <CircularProgress size={20} color={paused_color} />\r\n                        : (props.paused\r\n                            ? <Pause fontSize=\"small\" color=\"inherit\" />\r\n                            : <PlayArrow fontSize=\"small\" color=\"inherit\" />)\r\n                    }\r\n                </IconButton>\r\n                <div style={{ flex: 1, textAlign: \"right\" }}>\r\n                    {(props.loading === \"left\" || props.loading === \"right\")\r\n                        ? <CircularProgress size={20} style={{ marginRight: 40 }} />\r\n                        : (<React.Fragment>\r\n                            <IconButton onClick={props.onItemAction} value={props.id} name=\"left\" >\r\n                                <ArrowLeft />\r\n                            </IconButton>\r\n                            <IconButton onClick={props.onItemAction} value={props.id} name=\"right\" >\r\n                                <ArrowRight />\r\n                            </IconButton>\r\n                        </React.Fragment>)}\r\n                </div>\r\n            </CardActions>\r\n        }\r\n    </Card>)\r\n}","import React from \"react\";\r\nimport {\r\n    AppBar, Typography, Toolbar, IconButton,\r\n    Card, CardActionArea, CardContent,\r\n    Menu, MenuItem, CircularProgress\r\n} from \"@material-ui/core\";\r\nimport {\r\n    MoreVert, AddCircleOutline,\r\n    ArrowUpward, ArrowDownward\r\n} from \"@material-ui/icons\";\r\nimport Item from \"./Item\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        menuEl: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleMenu = this.handleMenu.bind(this);\r\n        this.handleMenuClose = this.handleMenuClose.bind(this);\r\n    }\r\n    handleMenu(event) {\r\n        this.setState({ menuEl: event.target });\r\n    }\r\n    handleMenuClose() {\r\n        this.setState({ menuEl: null });\r\n    }\r\n    render() {\r\n        const { nombre, items, id, loading, loading_action } = this.props;\r\n        console.info(\"Group \" + id + \" rendered\");\r\n        const { menuEl } = this.state;\r\n\r\n        return (<div style={{ width: \"calc(100% - 40px)\", padding: \"10px 20px\" }} id={\"GROUP-ROOT-\" + id}>\r\n            <AppBar position=\"relative\" color=\"default\">\r\n                <Toolbar>\r\n                    {loading_action\r\n                        ? <div style={{ marginRight: 10 }}>\r\n                            <CircularProgress size={20} />\r\n                        </div>\r\n                        : <div style={{ marginRight: 10 }}>\r\n                            <IconButton onClick={this.props.onGroupAction} name=\"up\" value={id}>\r\n                                <ArrowUpward fontSize=\"small\" />\r\n                            </IconButton>\r\n                            <IconButton onClick={this.props.onGroupAction} name=\"down\" value={id}>\r\n                                <ArrowDownward fontSize=\"small\" />\r\n                            </IconButton>\r\n                        </div>}\r\n                    <Typography variant=\"h6\" color=\"inherit\" style={{ flexGrow: 1 }}>\r\n                        {nombre} ({(items && items.length) || 0} items)\r\n                    </Typography>\r\n                    <IconButton disabled={loading} onClick={this.handleMenu}>\r\n                        {loading ? <CircularProgress size={20} color=\"inherit\" /> : <MoreVert />}\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div style={{ width: \"100%\", overflow: \"auto\", whiteSpace: \"nowrap\", scrollBehavior: \"smooth\" }} id={\"GROUP-CONTAINER-\" + id}>\r\n                <Card style={{ display: \"inline-block\", width: 200, margin: 10 }}>\r\n                    <CardActionArea style={{ height: 285, textAlign: \"center\" }} component=\"button\" value={\"NUEVO~\" + id} onClick={this.props.onItemClick} >\r\n                        <CardContent>\r\n                            <AddCircleOutline fontSize=\"large\" />\r\n                            <Typography variant=\"h6\">NUEVO</Typography>\r\n                        </CardContent>\r\n                    </CardActionArea>\r\n                </Card>\r\n\r\n                {items && items.sort((a, b) => a.orden - b.orden)\r\n                    .map(p => (<Item\r\n                        {...p}\r\n                        onItemClick={this.props.onItemClick}\r\n                        onItemAction={this.props.onItemAction}\r\n                        key={p.id}\r\n                    />))}\r\n            </div>\r\n            <Menu\r\n                anchorEl={menuEl}\r\n                anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                open={Boolean(menuEl)}\r\n                onClose={this.handleMenuClose}\r\n                onClick={this.handleMenuClose}\r\n            >\r\n                <MenuItem value={id} onClick={this.props.onGroupEdit}>Editar</MenuItem>\r\n                <MenuItem value={id} onClick={this.props.onGroupDelete}>Eliminar</MenuItem>\r\n            </Menu >\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport { Button, Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { AddAPhoto } from \"@material-ui/icons\";\r\n\r\nexport default function (props) {\r\n    function onClick() {\r\n        var input = document.getElementById(\"img-src-input-hidden\");\r\n        input.click();\r\n    }\r\n    const IMG_STYLE = { maxHeight: props.height, maxWidth: \"100%\", cursor: \"pointer\" };\r\n    if (props.border) IMG_STYLE.border = \"1px dotted #949494\";\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <input type=\"file\" id=\"img-src-input-hidden\" onChange={props.onChange} hidden accept=\"image/*\" />\r\n            {props.loading\r\n                ? (<div style={{ height: props.height, maxWidth: \"100%\", margin: \"auto\", display: \"table\" }}>\r\n                    <div style={{ display: \"table-cell\", verticalAlign: \"middle\", height: \"100%\" }}>\r\n                        <CircularProgress color=\"primary\" size={100} />\r\n                    </div>\r\n                </div>)\r\n                : (props.src\r\n                    ? (<img\r\n                        onClick={onClick}\r\n                        title=\"Click para cambiar la foto. O arrastra tu imagen.\"\r\n                        src={props.src}\r\n                        alt={props.name}\r\n                        style={IMG_STYLE}\r\n                    />)\r\n                    : (<div style={{ height: props.height, maxWidth: \"100%\", margin: \"auto\", display: \"table\" }}>\r\n                        <Button\r\n                            variant={props.border ? \"outlined\" : \"text\"}\r\n                            type=\"button\"\r\n                            onClick={onClick}\r\n                            style={{ display: \"table-cell\", verticalAlign: \"middle\", height: \"100%\" }}\r\n                        >\r\n                            <AddAPhoto fontSize=\"large\" />\r\n                            <Typography variant=\"h6\">Agrega una foto</Typography>\r\n                        </Button>\r\n                    </div>))\r\n            }\r\n        </React.Fragment >);\r\n}","import React from \"react\";\r\nimport {\r\n    Dialog, DialogContent, TextField, FormControlLabel, Switch,\r\n    Button, CircularProgress, Checkbox, Typography, InputAdornment,\r\n    DialogActions, withStyles\r\n} from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { ReadImgAsUrl, ImgFileToObject } from \"../../Services/ImageReader\";\r\nimport UploadImage from \"../UploadImage\";\r\n\r\nexport default withStyles({\r\n    paper: {\r\n        maxHeight: \"calc(100% - 20px)\"\r\n    }\r\n})(class extends React.PureComponent {\r\n    state = {\r\n        id: null,\r\n        idGrupo: null,\r\n        nombre: \"\",\r\n        descripcion: \"\",\r\n        pvp: \"\",\r\n        imgSrc: \"\",\r\n        pagaIva: false,\r\n        habilitado: true,\r\n\r\n        error: null,\r\n        loading: \"INITIAL\"\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleCheck = this.handleCheck.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n\r\n        this.handlePhotoChange = this.handlePhotoChange.bind(this);\r\n        this.handlePhotoDrop = this.handlePhotoDrop.bind(this);\r\n        this.handlePhotoOver = this.handlePhotoOver.bind(this);\r\n\r\n        const { info } = this.props.match.params;\r\n        if (info.indexOf(\"~\") >= 0) {\r\n            var [id, idGrupo] = info.split(\"~\");\r\n            this.state.id = id;\r\n            this.state.idGrupo = +idGrupo;\r\n        } else {\r\n            this.state.id = info;\r\n        }\r\n        if (this.state.id === \"NUEVO\") this.state.loading = false;\r\n    }\r\n    componentWillMount() {\r\n        if (this.state.id === \"NUEVO\") return;\r\n        API.GetProduct(this.state.id).then(item => {\r\n            this.setState({ ...item, loading: false });\r\n        }).catch(error => this.setState({ error, loading: \"INITIAL-FAILED\" }));\r\n    }\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck(event) {\r\n        const { name, checked } = event.currentTarget;\r\n        this.setState({\r\n            [name]: checked\r\n        });\r\n    }\r\n    handleClick() {\r\n        if (this.state.loading) return;\r\n        if (!(this.state.pvp && !isNaN(this.state.pvp))) return alert(\"Digite un Precio valido\");\r\n        if (!this.state.nombre) return alert(\"Agregue el nombre\");\r\n        if (!this.state.idGrupo) return alert(\"Seleccione un grupo\");\r\n        if (!this.state.imgSrc) {\r\n            var confirm = window.confirm(\"Este item no tiene una imagen, est seguro de continuar?\");\r\n            if (!confirm) return;\r\n        }\r\n        this.setState({ loading: true, error: null });\r\n        if (this.state.imgFile) {\r\n            ImgFileToObject(this.state.imgFile).\r\n                then(this._save.bind(this))\r\n                .catch(error => this.setState({ error, loading: false }))\r\n        } else {\r\n            this._save();\r\n        }\r\n    }\r\n    _save(imgFile) {\r\n        API.SaveProduct({ ...this.state, imgFile })\r\n            .then(x => {\r\n                try {\r\n                    this.setState({ loading: false, error: null });\r\n                    this.props.onClose({ ...this.state, ...x });\r\n                } catch (ex) { }\r\n            }).catch(error => this.setState({ error, loading: false }));\r\n    }\r\n    handleDelete() {\r\n        if (this.state.loading) return;\r\n        var confirmed = window.confirm(\"Esta seguro de eliminar este registro?\");\r\n        if (!confirmed) return;\r\n        this.setState({ loading: true, error: null });\r\n        API.DeleteProduct(this.state)\r\n            .then(x => {\r\n                this.props.onClose({\r\n                    id: this.state.id,\r\n                    delete: true\r\n                })\r\n            }).catch(error =>\r\n                this.setState({ error, loading: false })\r\n            );\r\n    }\r\n    handleClose(event) {\r\n        if (this.state.loading && event) return event.preventDefault();\r\n        this.props.onClose();\r\n    }\r\n    handlePhotoChange(event) {\r\n        const { files } = event.currentTarget;\r\n        if (!(files && files.length)) return;\r\n        const imgFile = files[0];\r\n        ReadImgAsUrl(imgFile)\r\n            .then(imgSrc => this.setState({ imgSrc, imgFile }))\r\n            .catch(ex => alert(\"Ocurrio un problema al cargar tu imagen: \" + ex.message));\r\n    }\r\n    handlePhotoDrop(event) {\r\n        event.preventDefault();\r\n        const { files } = event.dataTransfer;\r\n        if (!(files && files.length)) return;\r\n        const imgFile = files[0];\r\n        ReadImgAsUrl(imgFile)\r\n            .then(imgSrc => this.setState({ imgSrc, imgFile }))\r\n            .catch(ex => alert(\"Ocurrio un problema al cargar tu imagen: \" + ex.message));\r\n        const div = document.getElementById(\"product-dialog-container\");\r\n        div.classList.remove(\"with-drop-view\");\r\n    }\r\n    handlePhotoEnter(e) {\r\n        var div = document.getElementById(\"product-dialog-container\");\r\n        div.classList.add(\"with-drop-view\");\r\n        e.preventDefault();\r\n    }\r\n    handlePhotoLeave(e) {\r\n        e.preventDefault();\r\n    }\r\n    handlePhotoOver(e) {\r\n        e.dataTransfer.dropEffect = \"copy\";\r\n        e.preventDefault();\r\n        if (this.timeout !== undefined) clearTimeout(this.timeout);\r\n        this.timeout = setTimeout(() => {\r\n            var div = document.getElementById(\"product-dialog-container\");\r\n            div.classList.remove(\"with-drop-view\")\r\n        }, 200);\r\n        console.info(\"dragenter\");\r\n    }\r\n    render() {\r\n        const { state } = this;\r\n        console.info(\"product dialog rendered\");\r\n        let pvp = isNaN(this.state.pvp) ? 0 : +this.state.pvp;\r\n        const precioFinal = pvp\r\n            ? (pvp + (state.pagaIva\r\n                ? ((pvp * (this.props.porcentajeIVA || 12)) / 100)\r\n                : 0)).round(2)\r\n            : 0;\r\n\r\n        if (state.loading === \"INITIAL\")\r\n            return (<Dialog open={true}>\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 150, width: 500, height: 300 }}>\r\n                    <CircularProgress size={70} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n        if (state.loading === \"INITIAL-FAILED\")\r\n            return (<Dialog onClose={event => this.handleClose()} open={true}>\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 150, width: 500, height: 300 }}>\r\n                    <Typography color=\"secondary\" variant=\"h5\">Hubo un error al cargar la informacin</Typography>\r\n                    <Typography color=\"secondary\" variant=\"h6\">{state.error.message}</Typography>\r\n                    <Typography color=\"secondary\" variant=\"body1\">{state.error.code} {state.error.status}</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n\r\n        return (<Dialog\r\n            id=\"product-dialog-container\"\r\n            onDrop={this.handlePhotoDrop}\r\n            onDragOver={this.handlePhotoOver}\r\n            onDragEnter={this.handlePhotoEnter}\r\n            onDragLeave={this.handlePhotoLeave}\r\n            open={true}\r\n            onClose={this.handleClose}\r\n            classes={{\r\n                paper: this.props.classes.paper\r\n            }}\r\n        >\r\n            <DialogContent style={{ textAlign: \"center\", paddingTop: 0, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n                <TextField\r\n                    autoFocus={true}\r\n                    value={state.nombre}\r\n                    name=\"nombre\"\r\n                    onChange={this.handleInput}\r\n                    label=\"Nombre\"\r\n                    variant=\"standard\"\r\n                    fullWidth\r\n                    style={style.textField}\r\n                />\r\n                <UploadImage\r\n                    onChange={this.handlePhotoChange}\r\n                    src={state.imgSrc}\r\n                    name={state.nombre}\r\n                    height={\"calc(100vh - 430px)\"}\r\n                />\r\n                <TextField\r\n                    value={(state.descripcion === undefined || state.descripcion === null)\r\n                        ? \"\"\r\n                        : state.descripcion}\r\n                    name=\"descripcion\"\r\n                    onChange={this.handleInput}\r\n                    inputProps={{\r\n                        rows: 3\r\n                    }}\r\n                    label=\"Descripcion\"\r\n                    variant=\"outlined\"\r\n                    multiline\r\n                    fullWidth\r\n                    style={style.textField}\r\n                />\r\n\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <TextField\r\n                        value={state.pvp}\r\n                        name=\"pvp\"\r\n                        type=\"number\"\r\n                        label=\"Precio sin impuestos\"\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                        onChange={this.handleInput}\r\n                        style={{ ...style.textField, flex: 1 }}\r\n                        InputProps={{\r\n                            endAdornment: <InputAdornment position=\"end\">\r\n                                <FormControlLabel\r\n                                    control={<Checkbox\r\n                                        color=\"primary\"\r\n                                        name=\"pagaIva\"\r\n                                        checked={state.pagaIva}\r\n                                        onChange={this.handleCheck}\r\n                                    />}\r\n                                    label=\"IVA\"\r\n                                />\r\n                            </InputAdornment>\r\n                        }}\r\n                    />\r\n                    <Typography variant=\"body2\" style={{ marginLeft: 15, paddingTop: 15, width: 130, paddingLeft: 5, paddingRight: 5 }}>\r\n                        PRECIO FINAL: ${precioFinal.toFixed(2)}\r\n                    </Typography>\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <TextField\r\n                        style={{ ...style.textField, flex: 1 }}\r\n                        value={state.idGrupo || 1}\r\n                        onChange={this.handleInput}\r\n                        name=\"idGrupo\"\r\n                        label=\"Grupo\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                    >\r\n                        {this.props.grupos && this.props.grupos.map(g => <option key={g.id} value={g.id}>\r\n                            {g.nombre}\r\n                        </option>)}\r\n                    </TextField>\r\n\r\n                    <FormControlLabel\r\n                        style={{ marginLeft: 15, marginRight: 0, width: 130 }}\r\n                        label={state.habilitado ? \"Habilitado\" : \"Deshabilitado\"}\r\n                        control={<Switch\r\n                            checked={state.habilitado}\r\n                            onChange={this.handleCheck}\r\n                            name=\"habilitado\" />}\r\n                    />\r\n                </div>\r\n            </DialogContent>\r\n\r\n            {state.error && <Typography style={{ width: \"100%\", marginTop: 10, textAlign: \"center\" }} color=\"secondary\">{state.error.message}</Typography>}\r\n\r\n            <DialogActions>\r\n                <Button\r\n                    fullWidth\r\n                    style={{ ...style.textField, flex: 1 }}\r\n                    disabled={state.loading}\r\n                    variant=\"outlined\"\r\n                    type=\"button\"\r\n                    onClick={this.handleClick} color=\"primary\">\r\n                    {state.loading\r\n                        ? <CircularProgress size={30} color=\"primary\" />\r\n                        : \"GUARDAR\"}\r\n                </Button>\r\n\r\n                {state.id !== \"NUEVO\"\r\n                    ? <Button disabled={state.loading} variant=\"outlined\" type=\"button\" onClick={this.handleDelete} color=\"secondary\">\r\n                        {state.loading\r\n                            ? <CircularProgress size={30} color=\"secondary\" />\r\n                            : \"ELIMINAR\"}\r\n                    </Button>\r\n                    : null}\r\n            </DialogActions>\r\n        </Dialog >)\r\n    }\r\n})\r\n\r\nconst style = {\r\n    textField: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, CircularProgress, TextField, Button, Typography } from \"@material-ui/core\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        input: \"\",\r\n        inputLabel: \"\"\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n\r\n        this.state.input = props.value || \"\";\r\n        this.state.inputLabel = props.label || \"\";\r\n    }\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        if (!this.state.input) return this.setState({error : \"El texto no puede estar vaco.\"});\r\n            this.setState({ loading: true });\r\n        if (!this.props.onSubmit) return alert(\"You Must especify TextPrompt.onSubmit event\");\r\n        this.props.onSubmit(this.state.input, error => {\r\n            this.setState({ error, loading: false });\r\n        });\r\n    }\r\n    handleClose(event) {\r\n        if (this.state.loading) return event.preventDefault();\r\n        this.props.onSubmit(undefined, error => {\r\n            this.setState({ error, loading: false });\r\n        });\r\n    }\r\n    render() {\r\n        console.info(\"TextPrompt rendering\");\r\n        const { state } = this;\r\n\r\n        return (<Dialog maxWidth=\"lg\" open={true} onClose={this.handleClose} >\r\n            <DialogContent style={{ width: 300 }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <TextField\r\n                        value={state.input}\r\n                        name=\"input\"\r\n                        onChange={this.handleInput}\r\n                        label={state.inputLabel}\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                        style={style.textField}\r\n                        autoFocus={true}\r\n                    />\r\n                    {state.error && <Typography color=\"secondary\" variant=\"body2\">{state.error}</Typography>}\r\n                    <Button\r\n                        fullWidth\r\n                        variant=\"outlined\"\r\n                        disabled={state.loading}\r\n                        type=\"submit\"\r\n                        color=\"primary\">\r\n                        {state.loading\r\n                            ? <CircularProgress size={30} color=\"primary\" />\r\n                            : \"GUARDAR\"}\r\n                    </Button>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>)\r\n    }\r\n}\r\n\r\nconst style = {\r\n    textField: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n}","import React from \"react\";\r\nimport Group from \"./Group\";\r\nimport API from \"../../Services/API\";\r\nimport { Toolbar, AppBar, Typography, CardActionArea, CircularProgress } from \"@material-ui/core\";\r\nimport { AddCircleOutline } from \"@material-ui/icons\";\r\nimport { Route } from \"react-router-dom\";\r\nimport ProductDialog from \"./ProductDialog\";\r\nimport TextPrompt from \"../TextPrompt\";\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        grupos: [],\r\n        loading: true,\r\n        // Habilita/deshabilita TextPrompt del grupo\r\n        currentGroup: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n\r\n        this.deleteGroup = this.deleteGroup.bind(this);\r\n        this.editGroup = this.editGroup.bind(this);\r\n        this.editGroupEnding = this.editGroupEnding.bind(this);\r\n        this.updateGrupo = this.updateGrupo.bind(this);\r\n        this.handleGroupAction = this.handleGroupAction.bind(this);\r\n\r\n        this.handleItemClick = this.handleItemClick.bind(this);\r\n        this.handleItemAction = this.handleItemAction.bind(this);\r\n        this.editItemEnd = this.editItemEnd.bind(this);\r\n        this.updateProduct = this.updateProduct.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        API.GetGroups().then(rawGroups => {\r\n            var grupos = rawGroups.sort((a, b) => a.orden - b.orden)\r\n                .map(x => {\r\n                    if (!x.items) x.items = [];\r\n                    x.items = x.items.sort((a, b) => a.orden - b.orden);\r\n                    return x;\r\n                });\r\n            this.setState({ grupos, loading: false });\r\n        }).catch(error => {\r\n            this.setState({ loading: false, error });\r\n        });\r\n    }\r\n\r\n    handleItemAction(event) {\r\n        const id = +event.currentTarget.value;\r\n        const action = event.currentTarget.name;\r\n        this.updateProduct(\"loading\", { id, loading: action });\r\n        API.RequestActionProduct({ id, action })\r\n            .then(items => {\r\n                for (let i = 0; i < items.length; i++) {\r\n                    const item = items[i];\r\n                    this.updateProduct(null, { ...item, loading: null });\r\n                }\r\n            }).catch(ex => {\r\n                alert(ex.message);\r\n                this.updateProduct(\"loading\", { id, loading: null });\r\n            });\r\n    }\r\n    handleItemClick(event) {\r\n        const id = event.currentTarget.value;\r\n        if (id.indexOf(\"NUEVO\") >= 0) {\r\n            this.updateProduct(\"loading\", { id: +id, loading: true })\r\n        }\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    editItemEnd(product) {\r\n        if (product) {\r\n            this.updateProduct(null, product);\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    updateProduct(prop_name, product) {\r\n        this.setState(prev => {\r\n            product.idGrupo = +product.idGrupo;\r\n            const state = { ...prev };\r\n            state.grupos = prev.grupos;\r\n            var grupo = state.grupos.find(x => x.items && x.items.find(i => i.id === product.id));\r\n            var grupo_a_actualizar;\r\n\r\n            if (product.delete) {\r\n                if (grupo) {\r\n                    let index = grupo.items.indexOf(\r\n                        grupo.items.find(x => x.id === product.id)\r\n                    );\r\n                    grupo.items.splice(index, 1);\r\n                    grupo.items = [...grupo.items].sort((a, b) => a.orden - b.orden);\r\n                }\r\n                return state;\r\n            }\r\n\r\n            if (grupo) {\r\n                let item = grupo.items.find(x => x.id === product.id);\r\n                let index = grupo.items.indexOf(item);\r\n                if (product.idGrupo && product.idGrupo !== grupo.id) {\r\n                    // CAMBIO DE GRUPO\r\n                    grupo.items.splice(index, 1);\r\n                    grupo.items = [...grupo.items].sort((a, b) => a.orden - b.orden);\r\n                    grupo_a_actualizar = state.grupos.find(x => x.id === product.idGrupo);\r\n                    if (grupo_a_actualizar) {\r\n                        grupo_a_actualizar.items.push(product);\r\n                        this.scrollGroupToItem(grupo_a_actualizar.id, product.id);\r\n                    }\r\n                } else {\r\n                    grupo_a_actualizar = grupo;\r\n                    if (prop_name) {\r\n                        item[prop_name] = product[prop_name];\r\n                    } else {\r\n                        var new_element = { ...item };\r\n                        for (const key in product) {\r\n                            if (product.hasOwnProperty(key)) {\r\n                                new_element[key] = product[key];\r\n                            }\r\n                        }\r\n                        grupo.items[index] = new_element;\r\n                    }\r\n                }\r\n            } else {\r\n                // ITEM NO EXISTE\r\n                grupo_a_actualizar = state.grupos.find(x => x.id === product.idGrupo);\r\n                if (grupo_a_actualizar) {\r\n                    grupo_a_actualizar.items.push(product);\r\n                    this.scrollGroupToItem(grupo_a_actualizar.id, product.id);\r\n                }\r\n            }\r\n            if (grupo_a_actualizar) {\r\n                grupo_a_actualizar.items = [...grupo_a_actualizar.items].sort((a, b) => a.orden - b.orden);\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n\r\n    deleteGroup(event) {\r\n        const id = +event.currentTarget.value;\r\n        if (!id) return;\r\n        var confirmed = window.confirm(\"Esta seguro de borrar este registro?\");\r\n        if (!confirmed) return;\r\n        this.updateGrupo(\"loading\", { id, loading: true });\r\n        API.DeleteGroup({ id })\r\n            .then(x => {\r\n                this.setState(prev => {\r\n                    const state = { ...prev };\r\n                    state.grupos = prev.grupos;\r\n                    var exists = state.grupos.find(x => x.id === id);\r\n                    if (exists) state.grupos.splice(state.grupos.indexOf(exists), 1);\r\n                    return state.grupos;\r\n                });\r\n            }).catch(ex => {\r\n                alert(ex.message);\r\n                this.updateGrupo(\"loading\", { id, loading: false });\r\n            });\r\n    }\r\n    editGroup(event) {\r\n        const { value } = event.currentTarget;\r\n        if (value === \"NUEVO\")\r\n            return this.setState({ currentGroup: {} });\r\n        var group = this.state.grupos.find(x => x.id === (+value));\r\n        this.setState({\r\n            currentGroup: {\r\n                id: group.id,\r\n                value: group.nombre\r\n            }\r\n        });\r\n    }\r\n    handleGroupAction(event) {\r\n        const id = +event.currentTarget.value;\r\n        const action = event.currentTarget.name;\r\n        this.updateGrupo(\"loading_action\", { id, loading_action: true });\r\n\r\n        API.RequestActionGroup({ id, action })\r\n            .then(results => {\r\n                results.forEach(g => {\r\n                    this.updateGrupo(null, { ...g, loading_action: null });\r\n                });\r\n                this.scrollToGroupId(id);\r\n            }).catch(ex => {\r\n                this.updateGrupo(\"loading_action\", { id, loading_action: null });\r\n                alert(ex.message);\r\n            })\r\n    }\r\n    editGroupEnding(nombre, onError) {\r\n        if (!nombre) return this.setState({ currentGroup: null });\r\n        const grupo = this.state.currentGroup;\r\n        if (grupo.value === nombre) return this.setState({ currentGroup: null });\r\n\r\n        var exists = this.state.grupos.find(a =>\r\n            a.id !== grupo.id &&\r\n            a.nombre.toUpperCase() === nombre.toUpperCase()\r\n        );\r\n        if (exists) return onError(\"Este nombre ya existe\");\r\n        API.SaveGroup({ id: grupo.id, nombre })\r\n            .then(this.updateGrupo.bind(this, \"nombre\"))\r\n            .catch(err => onError(err.message));\r\n    }\r\n    scrollToGroupId(ID, then) {\r\n        setTimeout(() => {\r\n            window.requestAnimationFrame(() => {\r\n                var div = document.getElementById(\"product-div\");\r\n                var groupDIV = document.getElementById(\"GROUP-ROOT-\" + ID);\r\n                if (!groupDIV) return;\r\n                var scrollTop = groupDIV.offsetTop - 70;\r\n                div.scrollTop = scrollTop;\r\n                if (then) then();\r\n            })\r\n        });\r\n    }\r\n    scrollGroupToItem(idGrupo, idProducto) {\r\n        this.scrollToGroupId(idGrupo, () => {\r\n            setTimeout(() => {\r\n                window.requestAnimationFrame(() => {\r\n                    var div = document.getElementById(\"GROUP-CONTAINER-\" + idGrupo);\r\n                    var item = document.getElementById(\"ITEM-CONTAINER-\" + idProducto);\r\n                    if (!item) return;\r\n                    div.scrollLeft = item.offsetLeft;\r\n                });\r\n            }, 300);\r\n        })\r\n    }\r\n    updateGrupo(changed_prop, group) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.grupos = prev.grupos;\r\n            var exists = state.grupos.find(x => x.id === group.id);\r\n            if (exists) {\r\n                if (changed_prop) {\r\n                    var props = changed_prop.split(\",\");\r\n                    props.forEach(changed_prop => {\r\n                        exists[changed_prop] = group[changed_prop];\r\n                    });\r\n                } else {\r\n                    group.items = exists.items;\r\n                    state.grupos[state.grupos.indexOf(exists)] = { ...exists, ...group };\r\n                }\r\n            } else {\r\n                state.grupos.push(group);\r\n                this.scrollToGroupId(group.id);\r\n            }\r\n            state.currentGroup = null;\r\n            return state;\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        console.info(\"Product view rendered\");\r\n\r\n        const {\r\n            grupos, loading, error,\r\n            currentGroup\r\n        } = this.state;\r\n\r\n\r\n        if (loading) {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\">CARGANDO...</Typography>\r\n            </div>)\r\n        }\r\n\r\n\r\n        if (error) {\r\n            return (<div style={{ textAlign: \"center\", paddingTop: 200 }}>\r\n                <Typography variant=\"subtitle1\"> Ocurrio un error</Typography>\r\n                <Typography variant=\"body1\">{error.message}</Typography>\r\n                <Typography variant=\"caption\">{error.code} {error.status}</Typography>\r\n            </div>)\r\n        }\r\n\r\n\r\n        return (<div style={{ height: \"100%\", overflow: \"auto\", scrollBehavior: \"smooth\" }} id=\"product-div\">\r\n\r\n            <div style={{ width: \"calc(100% - 40px)\", padding: 20 }} >\r\n                <AppBar position=\"relative\" color=\"default\">\r\n                    <CardActionArea onClick={this.editGroup} value=\"NUEVO\">\r\n                        <Toolbar>\r\n                            <AddCircleOutline style={{ marginRight: 10 }} />\r\n                            <Typography variant=\"h6\" color=\"inherit\" style={{ flexGrow: 1 }}>\r\n                                NUEVO GRUPO\r\n                        </Typography>\r\n                        </Toolbar>\r\n                    </CardActionArea>\r\n                </AppBar>\r\n            </div>\r\n\r\n\r\n            {grupos && grupos.length\r\n                ? grupos.sort((a, b) => a.orden - b.orden).map(x => (<Group\r\n                    onGroupAction={this.handleGroupAction}\r\n                    onGroupEdit={this.editGroup}\r\n                    onGroupDelete={this.deleteGroup}\r\n\r\n                    onItemAction={this.handleItemAction}\r\n                    onItemClick={this.handleItemClick}\r\n                    key={x.id}\r\n                    {...x}\r\n                />))\r\n                : null}\r\n\r\n            <Route path={this.props.match.path + \"/:info\"}\r\n                render={props => <ProductDialog\r\n                    porcentajeIVA={12}\r\n                    grupos={grupos.map(d => ({ id: d.id, nombre: d.nombre }))}\r\n                    onClose={this.editItemEnd}\r\n                    {...props}\r\n                />}\r\n            />\r\n\r\n            {currentGroup && <TextPrompt label=\"Nombre del Grupo\" {...currentGroup} onSubmit={this.editGroupEnding} />}\r\n\r\n        </div>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport UploadImage from \"../UploadImage\";\r\nimport { ReadImgAsUrl, ImgFileToObject } from \"../../Services/ImageReader\";\r\nimport UpdateableInput from \"./UpdateableInput\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        // {key : \"cargando\" | errMessage}\r\n        feedback: {}\r\n    }\r\n    // aqui almaceno los timeouts\r\n    timeouts = {}\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleUpdateProp = this.handleUpdateProp.bind(this);\r\n        this.handleLogo = this.handleLogo.bind(this);\r\n        const { configuracion } = props;\r\n        if (configuracion) {\r\n            for (const key in configuracion) {\r\n                if (configuracion.hasOwnProperty(key)) {\r\n                    this.state[key] = configuracion[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        if (this.state.feedback[name] === \"loading\") return;\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n    handleUpdateProp(name, value, avoidCatch) {\r\n        if (this.state.feedback[name] === \"loading\") return;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.feedback = { ...state.feedback, [name]: \"loading\" };\r\n            return state;\r\n        });\r\n        var promise = API.setConfigInfo({\r\n            [name]: value || this.state[name]\r\n        }).then(x =>\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.feedback = { ...state.feedback, [name]: \"loading\" };\r\n                delete state.feedback[name];\r\n                return state;\r\n            })\r\n        )\r\n        if (avoidCatch) return promise;\r\n        promise.catch(err =>\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.feedback = { ...state.feedback, [name]: err.message };\r\n                return state;\r\n            })\r\n        );\r\n    }\r\n    handleLogo(event) {\r\n        if (this.state.feedback.logoSrc === \"loading\") return;\r\n        const { files } = event.currentTarget;\r\n        if (!(files && files.length)) return;\r\n        const logoFile = files[0];\r\n        Promise.all([\r\n            ImgFileToObject(logoFile).then(file => this.handleUpdateProp(\"logoFile\", file, true))\r\n            , ReadImgAsUrl(logoFile)\r\n        ]).then(([, logoSrc]) => {\r\n            this.setState({ logoSrc });\r\n        }).catch(ex => {\r\n            alert(\"Ocurrio un problema al cargar tu imagen: \" + ex.message);\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.feedback = { ...state.feedback };\r\n                delete state.feedback.logoSrc;\r\n                return state;\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { titulo, slogan, logoSrc,\r\n            direccion, telefono,\r\n            whatsAppMessage, whatsAppPhone,\r\n            feedback } = this.state;\r\n        return (<div>\r\n            <Grid container>\r\n                <Grid item xs={6} style={{ padding: 10 }}>\r\n\r\n                    <UpdateableInput\r\n                        label=\"Nombre de la Tienda\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={titulo || \"\"}\r\n                        name={\"titulo\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        inputProps={{ maxLength: 100 }}\r\n                    />\r\n                    <div style={{ textAlign: \"center\", padding: 10 }}>\r\n                        <UploadImage\r\n                            loading={feedback.logoSrc}\r\n                            onChange={this.handleLogo}\r\n                            src={logoSrc}\r\n                            border={true}\r\n                            name=\"Logo de la Tienda\"\r\n                            height=\"calc(100vh - 400px)\"\r\n                        />\r\n                    </div>\r\n\r\n                    <UpdateableInput\r\n                        label=\"Slogan de la Tienda\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={slogan || \"\"}\r\n                        name={\"slogan\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        inputProps={{ maxLength: 100 }}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={6} style={{ padding: 10 }}>\r\n\r\n                    <UpdateableInput\r\n                        label=\"Direccion de la Tienda\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={direccion || \"\"}\r\n                        name={\"direccion\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        multiline={true}\r\n                        inputProps={{ rows: 2, maxLength: 300 }}\r\n\r\n                    />\r\n\r\n                    <UpdateableInput\r\n                        label=\"Telefono\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={telefono || \"\"}\r\n                        name={\"telefono\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        type=\"phone\"\r\n                        inputProps={{ maxLength: 50 }}\r\n                    />\r\n\r\n                    <UpdateableInput\r\n                        label=\"Numero en Whatsapp\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={whatsAppPhone || \"\"}\r\n                        name={\"whatsAppPhone\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        type=\"phone\"\r\n                        inputProps={{ maxLength: 20 }}\r\n                    />\r\n\r\n                    <UpdateableInput\r\n                        label=\"Escribe el mensaje de Whatsapp que quieres recibir cuando seas contactado\"\r\n                        onUpdate={this.handleUpdateProp}\r\n                        value={whatsAppMessage || \"\"}\r\n                        name={\"whatsAppMessage\"}\r\n                        onChange={this.handleInput}\r\n                        feedback={feedback}\r\n                        multiline={true}\r\n                        inputProps={{ rows: 3, maxLength: 300 }}\r\n                    />\r\n\r\n\r\n                </Grid>\r\n            </Grid>\r\n        </div>)\r\n    }\r\n}","export default class {\r\n    static currentPosition() {\r\n        return new Promise((resolve, reject) => {\r\n            console.info(\"obteniendo posicion actual con navigator.geolocation.getCurrentPosition\");\r\n            if (!navigator.geolocation) {\r\n                console.info(\"navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()\");\r\n                return PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            navigator.geolocation.getCurrentPosition(\r\n                geoLocation => resolve({\r\n                    lat: geoLocation.coords.latitude,\r\n                    lng: geoLocation.coords.longitude\r\n                }), () => {\r\n                    console.info(\"navigator.geolocation.getCurrentPosition fall, intentando con PositionByIP()\");\r\n                    PositionByIP().then(resolve).catch(reject);\r\n                }\r\n            );\r\n        });\r\n    }\r\n    static QUITO_BOUNDS = {\r\n        west: -78.85300,\r\n        north: -0.04875,\r\n        east: -78.17184,\r\n        south: -0.39207\r\n    }\r\n    static QUITO = {\r\n        lat: -0.189515,\r\n        lng: -78.488167\r\n    }\r\n}\r\n\r\nfunction PositionByIP() {\r\n    return fetch(\"https://ipapi.co/json/\").then(x => x.json())\r\n        .then(info => ({ lat: info.latitude, lng: info.longitude }));\r\n}","import React from \"react\";\r\nimport { withScriptjs, GoogleMap, withGoogleMap, Polygon } from \"react-google-maps\";\r\nimport { MarkerWithLabel } from \"react-google-maps/lib/components/addons/MarkerWithLabel\";\r\nimport { Typography, Card, CardContent } from \"@material-ui/core\";\r\nimport DrawingManager from \"react-google-maps/lib/components/drawing/DrawingManager\";\r\n\r\nexport default function (props) {\r\n    const { API_KEY, ...mapProps } = props;\r\n    return (<Map\r\n        googleMapURL={`https://maps.googleapis.com/maps/api/js?key=${API_KEY || \"\"}&v=3.exp&libraries=geometry,drawing,places`}\r\n        containerElement={<div style={{ height: \"100%\" }} />}\r\n        loadingElement={<div style={{ height: `100%` }} />}\r\n        mapElement={<div style={{ height: `100%` }} />}\r\n        defaultZoom={15}\r\n        {...mapProps}\r\n    />)\r\n}\r\n\r\nconst Map = withScriptjs(withGoogleMap(props => {\r\n    const google = window.google;\r\n    const { marker, polygons, enableDrawingManager\r\n        , onPolygonComplete, onMapMounted, onPolygonClick, onPolygonMouseUp,\r\n        ...mapProps } = props;\r\n    return (<GoogleMap\r\n        {...mapProps}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n        ref={onMapMounted}\r\n    >\r\n        {marker && <MarkerWithLabel\r\n            labelAnchor={new google.maps.Point(0, 0)}\r\n            position={marker.position}\r\n        >\r\n            <Card elevation={3} color=\"secondary\" style={{ margin: 5 }}>\r\n                <CardContent style={{ maxWidth: 200, padding: 5 }}>\r\n                    <Typography variant=\"button\">{marker.label}</Typography>\r\n                </CardContent>\r\n            </Card>\r\n        </MarkerWithLabel>}\r\n\r\n        {enableDrawingManager &&\r\n            <DrawingManager\r\n                onPolygonComplete={onPolygonComplete}\r\n                defaultDrawingMode={google.maps.drawing.OverlayType.POLYGON}\r\n                defaultOptions={{\r\n                    drawingControl: true,\r\n                    drawingControlOptions: {\r\n                        position: google.maps.ControlPosition.TOP_CENTER,\r\n                        drawingModes: [\"polygon\"]\r\n                    }\r\n                }}\r\n                polygonOptions={{\r\n                    strokeColor: '#007bff',\r\n                    strokeOpacity: 0.8,\r\n                    strokeWeight: 2,\r\n                    fillColor: '#007bff',\r\n                    fillOpacity: 0.35\r\n                }}\r\n            />}\r\n\r\n        {polygons && polygons.map((p, index) => (\r\n            <Polygon\r\n                key={index}\r\n                path={p.path}\r\n                editable={p.editable}\r\n                onClick={onPolygonClick}\r\n                onMouseUp={function (event) { onPolygonMouseUp && onPolygonMouseUp(this, event, index) }}\r\n                options={{\r\n                    strokeColor: '#007bff',\r\n                    strokeOpacity: 0.8,\r\n                    strokeWeight: 2,\r\n                    fillColor: '#007bff',\r\n                    fillOpacity: 0.35\r\n                }}\r\n            />\r\n        ))}\r\n    </GoogleMap >)\r\n}));","import React from \"react\";\r\nimport { Typography, CircularProgress, Tabs, Tab, FormControlLabel, Checkbox, Menu, MenuItem } from \"@material-ui/core\";\r\nimport Geo from \"../../Services/Geo\";\r\nimport Map from \"../Map\";\r\nimport UpdateableInput from \"./UpdateableInput\";\r\nimport API from \"../../Services/API\";\r\nimport { ReportProblem, Layers, LocationOn } from \"@material-ui/icons\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        position: null,\r\n        baseTransporte: 0,\r\n        kmBaseTransporte: 0,\r\n        recargoPorKm: 0,\r\n        google_maps_key: \"\",\r\n        cobrarTransporte: false,\r\n\r\n        coberturas: [],\r\n        // esto es el modo de edicion del mapa (0=UBICACION o 1=COBERTURA)\r\n        editMode: 0,\r\n        loading: true,\r\n        defaultCenter: null,\r\n        feedback: {}\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleUpdateProp = this.handleUpdateProp.bind(this);\r\n        this.handleCheck = this.handleCheck.bind(this);\r\n\r\n        this.handleMapMounted = this.handleMapMounted.bind(this);\r\n        this.handleNewPolygon = this.handleNewPolygon.bind(this);\r\n        this.handlePolygonMouseUp = this.handlePolygonMouseUp.bind(this);\r\n        this.handleEditMode = this.handleEditMode.bind(this);\r\n        this.handleMapClick = this.handleMapClick.bind(this);\r\n\r\n\r\n        const { configuracion } = props;\r\n        if (configuracion) {\r\n            for (const k in this.state) {\r\n                if (configuracion.hasOwnProperty(k)) {\r\n                    this.state[k] = configuracion[k];\r\n                }\r\n            }\r\n        }\r\n        if (this.state.position) this.state.defaultCenter = this.state.position;\r\n        if (this.state.defaultCenter) {\r\n            this.state.loading = null;\r\n            this.state.editMode = 1;\r\n        }\r\n    }\r\n\r\n    handleUpdateProp(name, value, avoidCatch) {\r\n        if (this.state.feedback[name] === \"loading\") return;\r\n        this.updateFeedback(name, \"loading\");\r\n        var promise = API.setConfigInfo({\r\n            [name]: value === undefined ? this.state[name] : value\r\n        }).then(() => this.updateFeedback(name, null))\r\n        if (avoidCatch) return promise;\r\n        return promise.catch(err => this.updateFeedback(name, err.message));\r\n    }\r\n    updateFeedback(name, feedback) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.feedback = { ...state.feedback, [name]: feedback };\r\n            return state;\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.state.defaultCenter) {\r\n            Geo.currentPosition()\r\n                .then(defaultCenter => this.setState({ defaultCenter, loading: null }))\r\n                .catch(error => this.setState({ error, loading: \"ERROR\" }));\r\n        }\r\n    }\r\n    handleInput(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck(event) {\r\n        event.preventDefault();\r\n        const { name, checked } = event.currentTarget;\r\n        var promise = this.handleUpdateProp(name, checked, true)\r\n        if (promise) promise.then(x => {\r\n            this.setState({ [name]: checked })\r\n        }).catch(ex => {\r\n            alert(ex.message);\r\n            this.updateFeedback(name, null);\r\n        });\r\n    }\r\n    handleNewPolygon(Polygon) {\r\n        var path = [];\r\n        var vertices = Polygon.getPath();\r\n        for (var i = 0; i < vertices.getLength(); i++) {\r\n            path.push(vertices.getAt(i).toJSON());\r\n        }\r\n        const coberturas = [...this.state.coberturas, { path }];\r\n        var promise = this.handleUpdateProp(\"coberturas\", coberturas, true);\r\n        if (promise) {\r\n            promise\r\n                .then(() => {\r\n                    this.setState({ coberturas });\r\n                    Polygon.setMap(null);\r\n                }).catch(ex => {\r\n                    this.updateFeedback(\"coberturas\", ex.message);\r\n                    Polygon.setMap(null);\r\n                });\r\n        }\r\n    }\r\n    handleMapClick(event) {\r\n        const position = event.latLng.toJSON();\r\n        if (this.state.editMode === 0) {\r\n            var promise = this.handleUpdateProp(\"position\", position, true);\r\n            if (promise) {\r\n                promise.then(() => this.setState({ position }))\r\n                    .catch(ex => this.updateFeedback(\"position\", ex.message));\r\n                this.setState({ position });\r\n            }\r\n        }\r\n    }\r\n    handlePolygonMouseUp(Polygon, event, index) {\r\n        // en caso de que se aplaste el mouse sobre el Poligono, pero\r\n        // sea para situar la Ubicacin. \r\n        if (this.state.editMode !== 1) return;\r\n        var path = [];\r\n        var vertices = Polygon.getPath();\r\n        for (var i = 0; i < vertices.getLength(); i++) {\r\n            path.push(vertices.getAt(i).toJSON());\r\n        }\r\n        const coberturas = JSON.parse(JSON.stringify(this.state.coberturas));\r\n        var has_changed = false;\r\n        var previous = coberturas[index];\r\n        // esto es solo de seguridad\r\n        if (previous) {\r\n            for (let i = 0; i < path.length; i++) {\r\n                const coord = path[i];\r\n                var prev_coord = previous.path[i];\r\n                if (!prev_coord) {\r\n                    has_changed = true;\r\n                    break;\r\n                }\r\n                var isDifferent = (prev_coord.lat !== coord.lat || prev_coord.lng !== coord.lng);\r\n                if (isDifferent) {\r\n                    has_changed = true;\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            has_changed = true;\r\n        }\r\n        if (!has_changed) return;\r\n        coberturas[index] = { path };\r\n        var promise = this.handleUpdateProp(\"coberturas\", coberturas, true);\r\n        if (promise) {\r\n            if (!this.LAST_COBERTURAS) {\r\n                this.LAST_COBERTURAS = JSON.parse(JSON.stringify(this.state.coberturas));\r\n            }\r\n            promise\r\n                .then(() => {\r\n                    //this.setState({ coberturas })\r\n                    this.LAST_COBERTURAS = coberturas;\r\n                }).catch(ex => {\r\n                    this.updateFeedback(\"coberturas\", ex.message);\r\n                    this.setState(\r\n                        { coberturas: [] }, () =>\r\n                        this.setState({ coberturas: this.LAST_COBERTURAS })\r\n                    )\r\n                });\r\n        }\r\n    }\r\n    handleMapMounted(map) {\r\n        this.mapRef = map;\r\n        this._fitBoundsToPolygon();\r\n    }\r\n    handleEditMode(_, value) {\r\n        this.setState({ editMode: value });\r\n    }\r\n    // pone el recangulo de visualizacion, en el lugar correcto\r\n    // para abarcar todo/s el/los poligono/s\r\n    _fitBoundsToPolygon() {\r\n        if (!this.mapRef) return;\r\n        if (!this.state.coberturas.length) return;\r\n        const google = window.google;\r\n        const bounds = new google.maps.LatLngBounds();\r\n        for (let i = 0; i < this.state.coberturas.length; i++) {\r\n            const c = this.state.coberturas[i];\r\n            c.path.forEach(coords => bounds.extend(coords));\r\n        }\r\n        var current_bounds = this.mapRef.getBounds();\r\n        if (current_bounds) bounds.union(current_bounds);\r\n        this.mapRef.fitBounds(bounds);\r\n    }\r\n\r\n    handleTabContext = (event) => {\r\n        event.preventDefault();\r\n        this.setState({ tabContextEl: event.currentTarget });\r\n    }\r\n    handleTabContextClose = () => {\r\n        this.setState({ tabContextEl: null });\r\n    }\r\n    handleDeleteAllCoberturas = () => {\r\n        this.handleUpdateProp(\"coberturas\", [], true)\r\n            .then(() => {\r\n                this.setState({ coberturas: [] })\r\n            }).catch(err => this.updateFeedback(\"coberturas\", err.message));\r\n        this.setState({ tabContextEl: null });\r\n    }\r\n\r\n    render() {\r\n        const { loading, error, editMode,\r\n            baseTransporte, kmBaseTransporte, recargoPorKm, feedback, cobrarTransporte,\r\n            defaultCenter, position, google_maps_key,\r\n            coberturas, tabContextEl\r\n        } = this.state;\r\n        var hay_coberturas = coberturas && coberturas.length;\r\n\r\n        var MAP_OPTIONS = {\r\n            defaultCenter: defaultCenter,\r\n            API_KEY: google_maps_key,\r\n            enableDrawingManager: !hay_coberturas && editMode === 1\r\n        }\r\n        if (position) MAP_OPTIONS.marker = {\r\n            position: position,\r\n            label: \"Tu Tienda\"\r\n        };\r\n        if (coberturas && coberturas.length)\r\n            MAP_OPTIONS.polygons = coberturas.map(x => ({ ...x, editable: editMode === 1 }));\r\n\r\n        if (loading === \"ERROR\")\r\n            return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\">Ocurri un error</Typography>\r\n                <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                <Typography variant=\"body1\">{error.code} {error.status}</Typography>\r\n            </div>);\r\n\r\n        if (loading)\r\n            return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\">CARGANDO EL MAPA...</Typography>\r\n            </div>);\r\n\r\n        return (<div style={{ display: \"flex\", flexDirection: \"row\", height: \"calc(100% - 100px)\" }}>\r\n\r\n            <Menu anchorEl={tabContextEl}\r\n                anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n                transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n                open={Boolean(tabContextEl)}\r\n                onClose={this.handleTabContextClose}\r\n            >\r\n                <MenuItem onClick={this.handleDeleteAllCoberturas}>Borrar areas</MenuItem>\r\n            </Menu>\r\n\r\n            <div style={{ flex: 1, padding: 10 }}>\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Typography style={{ marginLeft: 10, flex: 1, paddingTop: 5 }} variant=\"h6\">Ubicacin de la Tienda</Typography>\r\n                    <Tabs onChange={this.handleEditMode} value={editMode}>\r\n                        <Tab\r\n                            title={feedback[\"position\"]}\r\n                            label={(position ? \"Cambiar\" : \"Agregar\") + \" Ubicacin\"}\r\n                            icon={(\r\n                                feedback[\"position\"] && (feedback[\"position\"] === \"loading\"\r\n                                    ? < CircularProgress size={20} color=\"primary\" />\r\n                                    : <ReportProblem color=\"secondary\" />)\r\n                            ) || <LocationOn />}\r\n                        />\r\n                        <Tab\r\n                            title={feedback[\"coberturas\"]}\r\n                            label={(hay_coberturas ? \"Cambiar\" : \"Agregar\") + \" Cobertura\"}\r\n                            icon={(\r\n                                feedback[\"coberturas\"] && (feedback[\"coberturas\"] === \"loading\"\r\n                                    ? < CircularProgress size={20} color=\"primary\" />\r\n                                    : <ReportProblem color=\"secondary\" />)\r\n                            ) || <Layers />}\r\n                            disabled={!position}\r\n                            onContextMenu={this.handleTabContext}\r\n                        />\r\n                    </Tabs>\r\n                </div>\r\n\r\n                {defaultCenter && <Map\r\n                    onMapMounted={this.handleMapMounted}\r\n                    onClick={this.handleMapClick}\r\n                    defaultZoom={12}\r\n                    onPolygonComplete={this.handleNewPolygon}\r\n                    onPolygonClick={this.handleMapClick}\r\n                    onPolygonMouseUp={this.handlePolygonMouseUp}\r\n                    {...MAP_OPTIONS}\r\n                />}\r\n            </div>\r\n\r\n            <div style={{ width: 300, padding: 10, textAlign: \"center\" }}>\r\n                <Typography style={{ margin: 10 }} variant=\"h6\">Tarifa de Transporte</Typography>\r\n\r\n                <FormControlLabel\r\n                    label=\"Cobrar Servicio de Transporte\"\r\n                    control={feedback[\"cobrarTransporte\"]\r\n                        ? <CircularProgress size={20} color=\"primary\" style={{ margin: 12 }} />\r\n                        : <Checkbox checked={cobrarTransporte} onChange={this.handleCheck} name=\"cobrarTransporte\" />}\r\n                />\r\n                {cobrarTransporte && (<React.Fragment>\r\n                    <UpdateableInput\r\n                        value={baseTransporte}\r\n                        onChange={this.handleInput}\r\n                        onUpdate={this.handleUpdateProp}\r\n                        label=\"Tarifa base\"\r\n                        name=\"baseTransporte\"\r\n                        type=\"number\"\r\n                        feedback={feedback}\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                    />\r\n                    <UpdateableInput\r\n                        value={kmBaseTransporte}\r\n                        onChange={this.handleInput}\r\n                        onUpdate={this.handleUpdateProp}\r\n                        label=\"Kms que cubre la tarifa base\"\r\n                        name=\"kmBaseTransporte\"\r\n                        type=\"number\"\r\n                        feedback={feedback}\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                    />\r\n                    <UpdateableInput\r\n                        value={recargoPorKm}\r\n                        onChange={this.handleInput}\r\n                        onUpdate={this.handleUpdateProp}\r\n                        label=\"Recargo por km adicional\"\r\n                        name=\"recargoPorKm\"\r\n                        type=\"number\"\r\n                        feedback={feedback}\r\n                        inputProps={{\r\n                            step: \"0.01\"\r\n                        }}\r\n                    />\r\n                </React.Fragment>)}\r\n\r\n            </div>\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport {\r\n    Dialog, DialogContent,\r\n    Select, FormControlLabel,\r\n    Checkbox, DialogActions, Button,\r\n    Typography,\r\n    DialogTitle\r\n} from \"@material-ui/core\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        dias: [],\r\n        desde: [0, 0],\r\n        hasta: [0, 0]\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleDays = this.handleDays.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        if (props.data && props.data !== \"NUEVO\") {\r\n            this.state = { ...props.data };\r\n        }\r\n    }\r\n    handleChange(event) {\r\n        const { value, name } = event.currentTarget;\r\n        if (name.indexOf(\".\") >= 0) {\r\n            var parts = name.split(\".\");\r\n            this.setState(prev => {\r\n                const state = JSON.parse(JSON.stringify(prev));\r\n                state[parts[0]][parts[1]] = value;\r\n                return state;\r\n            });\r\n        } else {\r\n            this.setState({ [name]: value });\r\n        }\r\n    }\r\n    handleDays(event) {\r\n        const { value } = event.currentTarget;\r\n        this.setState(prev => {\r\n            const state = JSON.parse(JSON.stringify(prev));\r\n            state.dias = [...state.dias];\r\n            var INDEX = state.dias.indexOf(+value);\r\n            if (INDEX >= 0) {\r\n                state.dias.splice(INDEX, 1);\r\n            } else {\r\n                state.dias.push(+value);\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    handleClick() {\r\n        const { loading, dias, desde, hasta } = this.state;\r\n        if (loading) return;\r\n        if (!dias.length) return alert(\"Selecciona al menos un dia\");\r\n        if (desde[0] === hasta[0] && desde[1] === hasta[1]) return alert(\"Las horas de inicio y fin no pueden ser iguales\");\r\n        this.setState({ loading: true });\r\n        this.props.guardar(this.state)\r\n            .catch(ex => {\r\n                alert(ex.message);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.onClose && this.props.onClose();\r\n    }\r\n    render() {\r\n        const { desde, hasta, dias, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"lg\">\r\n            <DialogTitle>HORARIO</DialogTitle>\r\n            <DialogContent>\r\n                <div style={{ display: \"table\" }}>\r\n                    <div style={{ display: \"table-cell\", width: 150 }}>\r\n                        <Typography variant=\"subtitle1\">INICIO</Typography>\r\n                        <div>\r\n                            <TimeSelect label=\"Horas\" length={23} name=\"desde.0\" value={desde[0]} onChange={this.handleChange} />\r\n                            <Typography style={{ display: \"inline\", width: \"auto\", marginLeft: 5, marginRight: 5 }} variant=\"subtitle1\" >:</Typography>\r\n                            <TimeSelect label=\"Minutos\" items={[0, 15, 30, 45]} name=\"desde.1\" value={desde[1]} onChange={this.handleChange} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: \"table-cell\", width: 150 }}>\r\n                        <Typography variant=\"subtitle1\">FIN</Typography>\r\n                        <div>\r\n                            <TimeSelect label=\"Horas\" length={23} name=\"hasta.0\" value={hasta[0]} onChange={this.handleChange} />\r\n                            <Typography style={{ display: \"inline\", width: \"auto\", marginLeft: 5, marginRight: 5 }} variant=\"subtitle1\" >:</Typography>\r\n                            <TimeSelect label=\"Minutos\" items={[0, 15, 30, 45]} name=\"hasta.1\" value={hasta[1]} onChange={this.handleChange} />\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ display: \"table-cell\" }}>\r\n                        <Typography variant=\"subtitle1\">SELECCIONA LOS DIAS</Typography>\r\n                        <DaysSelect value={dias} onChange={this.handleDays} />\r\n                    </div>\r\n                </div>\r\n                <DialogActions >\r\n                    <Button disabled={loading} style={{ flex: 1 }} color=\"primary\" variant=\"outlined\" onClick={this.handleClick}>\r\n                        GUARDAR\r\n                        </Button>\r\n                </DialogActions>\r\n            </DialogContent>\r\n        </Dialog>)\r\n    }\r\n}\r\nfunction TimeSelect(props) {\r\n    const { length, items, ...selectProps } = props;\r\n    var options = [];\r\n    if (items) {\r\n        options = items.map(i => ({\r\n            value: i,\r\n            label: i.toString().length === 1 ? `0${i}` : i\r\n        }))\r\n    } else {\r\n        for (let i = 0; i <= length; i++) {\r\n            options.push({\r\n                value: i,\r\n                label: i.toString().length === 1 ? `0${i}` : i\r\n            });\r\n        }\r\n    }\r\n    return (<Select native={true} {...selectProps}>\r\n        {options.map(o => <option key={o.value} value={o.value}>{o.label}</option>)}\r\n    </Select>);\r\n}\r\nfunction DaysSelect(props) {\r\n    const value = props.value || [];\r\n    return (<div style={props.style}>\r\n        <FormControlLabel\r\n            label=\"Lun\"\r\n            control={<Checkbox value={\"1\"} checked={value.indexOf(1) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Mar\"\r\n            control={<Checkbox value={\"2\"} checked={value.indexOf(2) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Mie\"\r\n            control={<Checkbox value={\"3\"} checked={value.indexOf(3) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Jue\"\r\n            control={<Checkbox value={\"4\"} checked={value.indexOf(4) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Vie\"\r\n            control={<Checkbox value={\"5\"} checked={value.indexOf(5) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Sab\"\r\n            control={<Checkbox value={\"6\"} checked={value.indexOf(6) >= 0} onChange={props.onChange} />}\r\n        />\r\n        <FormControlLabel\r\n            label=\"Dom\"\r\n            control={<Checkbox value={\"0\"} checked={value.indexOf(0) >= 0} onChange={props.onChange} />}\r\n        />\r\n    </div>)\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TableRow, TableCell, TableBody, IconButton, CircularProgress } from \"@material-ui/core\";\r\nimport { Delete, Edit, Add } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport HorarioDialog from \"./HorarioDialog\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        horarios: [],\r\n        selected: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.configuracion && props.configuracion.horarios) {\r\n            this.state.horarios = [...props.configuracion.horarios];\r\n        }\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleEdit = this.handleEdit.bind(this);\r\n        this.guardar = this.guardar.bind(this);\r\n    }\r\n    handleDelete(event) {\r\n        const index = event.currentTarget.value;\r\n        if (this.state.horarios.length <= 1) return alert(\"No se puede borrar: Debe existir al menos un horario\");\r\n        var item = this.state.horarios[+index];\r\n        if (!item) return;\r\n        if (item.loading) return;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.horarios = [...state.horarios];\r\n            state.horarios[index].loading = true;\r\n            return state;\r\n        })\r\n        const horarios = [...this.state.horarios];\r\n        horarios.splice(index, 1);\r\n        API.setConfigInfo({ horarios })\r\n            .then(() => {\r\n                this.setState({ horarios });\r\n            }).catch(ex => {\r\n                alert(\"Ocurrio un error: \" + ex.message);\r\n                this.setState(prev => {\r\n                    const state = { ...prev };\r\n                    state.horarios = [...state.horarios];\r\n                    state.horarios[index].loading = false;\r\n                    return state;\r\n                });\r\n            });\r\n    }\r\n    guardar(horario) {\r\n        const horarios = JSON.parse(JSON.stringify(this.state.horarios));\r\n        var exists;\r\n        if (horario.id) exists = horarios.find(x => x.id === horario.id);\r\n        if (exists) {\r\n            horarios[horarios.indexOf(exists)] = horario;\r\n        } else {\r\n            horarios.push(horario);\r\n        }\r\n        return API.setConfigInfo({ horarios })\r\n            .then(x => {\r\n                this.setState({ horarios, selected: null });\r\n            });\r\n    }\r\n    handleEdit(event) {\r\n        const index = event.currentTarget.value;\r\n        if (index === \"NUEVO\") return this.setState({ selected: \"NUEVO\" });\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.horarios = [...state.horarios];\r\n            var item = state.horarios[+index];\r\n            if (!item) return state;\r\n            state.selected = item;\r\n            return state;\r\n        });\r\n    }\r\n    handleClose() {\r\n        this.setState({ selected: null });\r\n    }\r\n    render() {\r\n        const { horarios, selected } = this.state;\r\n        return (<div>\r\n            {selected && <HorarioDialog data={selected} onClose={this.handleClose} guardar={this.guardar} />}\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell style={{ width: 40 }}>\r\n                        </TableCell>\r\n                        <TableCell component=\"th\">HORA</TableCell>\r\n                        <TableCell component=\"th\">DIAS</TableCell>\r\n                        <TableCell component=\"th\" style={{ width: 40 }}>\r\n                            <IconButton onClick={this.handleEdit} value=\"NUEVO\" >\r\n                                <Add color=\"primary\" />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {horarios && horarios.map((item, index) =>\r\n                        (<TableRow key={index}>\r\n                            <TableCell scope=\"row\" component=\"th\">\r\n                                <IconButton disabled={item.loading} value={index} onClick={this.handleDelete}>\r\n                                    {item.loading ? <CircularProgress size={20} color=\"secondary\" /> : <Delete />}\r\n                                </IconButton>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                {TimeToString(item.desde, item.tz) + \" - \" + TimeToString(item.hasta, item.tz)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                {item.dias.map(ToDayString).join(\", \")}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <IconButton disabled={item.loading} value={index} onClick={this.handleEdit}>\r\n                                    <Edit />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                        </TableRow>)\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n        </div>)\r\n    }\r\n}\r\n\r\n\r\nfunction ToDayString(d) {\r\n    if (d === 1) return \"Lun\";\r\n    if (d === 2) return \"Mar\";\r\n    if (d === 3) return \"Mie\";\r\n    if (d === 4) return \"Jue\";\r\n    if (d === 5) return \"Vie\";\r\n    if (d === 6) return \"Sab\";\r\n    if (d === 0) return \"Dom\";\r\n    return \"UNDEFINED\";\r\n}\r\nfunction TimeToString(minHour, tz) {\r\n    const [hour, min] = minHour;\r\n    return (\r\n        (hour.toString().length === 1 ? \"0\" : \" \") + hour\r\n    ) + \":\" + (\r\n            (min.toString().length === 1 ? \"0\" : \" \") + min\r\n        )\r\n}","import React from \"react\";\r\nimport { Input, Table, TableBody, TableRow, TableCell, IconButton, TableHead, Typography, TableFooter, Button } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { ArrowDownward, Delete } from \"@material-ui/icons\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        // {key : \"cargando\" | errMessage}\r\n        contactos: [],\r\n        telefono_contacto: \"\",\r\n        nombre_contacto: \"\"\r\n    }\r\n    // aqui almaceno los timeouts\r\n    timeouts = {}\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        const { configuracion } = props;\r\n        if (configuracion) {\r\n            for (const key in configuracion) {\r\n                if (configuracion.hasOwnProperty(key)) {\r\n                    this.state[key] = configuracion[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleInput = (event) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleNew = event => {\r\n        var { telefono_contacto, nombre_contacto } = this.state;\r\n\r\n        var telefono = (telefono_contacto || \"\").trim();\r\n        var nombre = (nombre_contacto || \"\").trim();\r\n\r\n        if (!(nombre && nombre.trim())) {\r\n            alert(\"Digita el Nombre de la persona\");\r\n            return document.getElementById(\"nombre_contacto\").focus();\r\n        };\r\n\r\n        if (!telefono) {\r\n            alert(\"Digita el nmero de telfono\");\r\n            return document.getElementById(\"telefono_contacto\").focus();\r\n        }\r\n        if (telefono.length !== 12) {\r\n            alert(\"El nmero de telfono debe tener 12 digitos\");\r\n            return document.getElementById(\"telefono_contacto\").focus();\r\n        }\r\n\r\n        var digits = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\r\n        for (let i = 0; i < telefono.length; i++) {\r\n            var digit = telefono[i];\r\n            if (digits.indexOf(digit) < 0) {\r\n                alert(\"El nmero de telfono solo puede contener digitos.\");\r\n                return document.getElementById(\"telefono_contacto\").focus();\r\n            }\r\n        }\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.contactos = [...state.contactos];\r\n            state.contactos.push({ telefono, nombre });\r\n            state.telefono_contacto = \"\";\r\n            state.nombre_contacto = \"\";\r\n            return state;\r\n        });\r\n    }\r\n    handleRemove = event => {\r\n        const index = +event.currentTarget.value;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.contactos = [...state.contactos];\r\n            if (!state.contactos[index]) return state;\r\n            state.contactos.splice(index, 1);\r\n            return state;\r\n        });\r\n    }\r\n    handleSave = event => {\r\n        if (this.state.loading) return;\r\n        this.setState({ loading: \"contactos\" });\r\n        API.setConfigInfo({ contactos: this.state.contactos })\r\n            .then(x => {\r\n                this.setState({ loading: false });\r\n            }).catch(ex => {\r\n                alert(ex.message);\r\n                this.setState({ loading: false });\r\n                console.dir(ex);\r\n            });\r\n    }\r\n    render() {\r\n        const { contactos, nombre_contacto, telefono_contacto, loading } = this.state;\r\n        return (<div>\r\n            <Typography variant=\"h6\" style={{ textAlign: \"center\", margin: 10 }}>PUEDES ENVIAR TUS PEDIDOS POR WHATSAPP A ESTAS PERSONAS:</Typography>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                        <TableCell></TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>\r\n                            <Input\r\n                                inputProps={{ id: \"nombre_contacto\", maxLength: 50 }}\r\n                                fullWidth\r\n                                margin=\"none\"\r\n                                disabled={loading}\r\n                                value={nombre_contacto}\r\n                                name=\"nombre_contacto\"\r\n                                onChange={this.handleInput}\r\n                                placeholder=\"Nombre...\"\r\n                            />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <Input\r\n                                inputProps={{ id: \"telefono_contacto\", maxLength: 20 }}\r\n                                fullWidth\r\n                                disabled={loading}\r\n                                value={telefono_contacto}\r\n                                margin=\"none\"\r\n                                name=\"telefono_contacto\"\r\n                                onChange={this.handleInput}\r\n                                placeholder=\"Telefono (Ej:5939939579)\"\r\n                                title=\"Nmero de telfono incluyendo el cdigo internacional, sin signos\"\r\n                            />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <IconButton disabled={loading} title=\"Agregar\" onClick={this.handleNew}>\r\n                                <ArrowDownward />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {contactos.map((c, index) => <TableRow key={index}>\r\n                        <TableCell scope=\"row\" component=\"th\" >{c.nombre}</TableCell>\r\n                        <TableCell>{c.telefono}</TableCell>\r\n                        <TableCell>\r\n                            <IconButton disabled={loading} onClick={this.handleRemove} value={index}>\r\n                                <Delete />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                    </TableRow>)}\r\n                </TableBody>\r\n                <TableFooter>\r\n                    <TableRow>\r\n                        <TableCell colSpan={3} >\r\n                            <Button\r\n                                onClick={this.handleSave}\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                diabled={loading}\r\n                            >\r\n                                {loading === \"contactos\" ? \"GUARDANDO...\" : \"GUARDAR\"}\r\n                            </Button>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableFooter>\r\n            </Table>\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, CircularProgress, Typography } from \"@material-ui/core\";\r\nimport Informacion from \"./Informacion\";\r\nimport Cobertura from \"./Cobertura\";\r\nimport Horarios from \"./Horarios\";\r\nimport API from \"../../Services/API\";\r\nimport WhatsappConfig from \"./Parametros\";\r\nimport Parametros from \"./Parametros\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        // toda la configuracion\r\n        currentTab: 0,\r\n        defaultConfiguracion: null,\r\n        loading: true,\r\n        error: null,\r\n        // aqui almaceno los Tabs que ya se han cargado.para no cargar todo de golpe!\r\n        openedTabs: {}\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleTabChange = this.handleTabChange.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetConfigInfo()\r\n            .then(configuracion => {\r\n                this.setState(prev => {\r\n                    const state = { ...prev };\r\n                    state.configuracion = configuracion;\r\n                    state.loading = null;\r\n                    state.openedTabs[state.currentTab] = true;\r\n                    return state;\r\n                });\r\n            }).catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    handleTabChange(_, currentTab) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.openedTabs[currentTab] = true;\r\n            state.currentTab = currentTab;\r\n            return state;\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { currentTab, openedTabs, error, loading, configuracion } = this.state;\r\n        if (loading)\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h4\" >CARGANDO...</Typography>\r\n            </div>);\r\n\r\n        if (error)\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 200 }}>\r\n                <Typography variant=\"h6\" >Ocurri un error al cargar tu configuracin</Typography>\r\n                <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                <Typography variant=\"body1\" >{error.code} {error.status}</Typography>\r\n            </div>);\r\n\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\", height: \"100%\" }}>\r\n            <Tabs variant=\"fullWidth\" onChange={this.handleTabChange} value={currentTab} indicatorColor=\"primary\" textColor=\"primary\">\r\n                <Tab label=\"Informacin\" />\r\n                <Tab label=\"Parametros\" />\r\n                <Tab label=\"Cobertura y Tarifas\" />\r\n                <Tab label=\"Horarios de Atencin\" />\r\n            </Tabs>\r\n            <div style={{ display: currentTab === 0 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[0] && <Informacion configuracion={configuracion} />}\r\n            </div>\r\n\r\n            <div style={{ display: currentTab === 1 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[1] && <Parametros configuracion={configuracion} />}\r\n            </div>\r\n\r\n            <div style={{ display: currentTab === 2 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[2] && <Cobertura configuracion={configuracion} />}\r\n            </div>\r\n\r\n            <div style={{ display: currentTab === 3 ? \"block\" : \"none\", flex: 1 }}>\r\n                {openedTabs[3] && <Horarios configuracion={configuracion} />}\r\n            </div>\r\n        </div>);\r\n    }\r\n}","import React from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport { Typography, Paper } from \"@material-ui/core\";\nimport { Inbox, Category, Settings, Assessment } from \"@material-ui/icons\";\nimport AppBar from \"./Layouts/AppBar\";\nimport AppMenu from \"./Layouts/AppMenu\";\nimport Orders from \"./Components/Orders\";\nimport API from \"./Services/API\";\nimport Notifications from \"./Services/Notifications\";\nimport Products from \"./Components/Products\";\nimport Config from \"./Components/Config\";\nimport StoreContext from \"./Contexts/StoreContext\";\n\nconst STEPS = [\n  { id: \"orders\", title: \"Pedidos\", Icon: Inbox },\n  { id: \"products\", title: \"Productos\", Icon: Category },\n  //{ id: \"dashboard\", title: \"Dashboard\", Icon: Assessment },\n  { id: \"config\", title: \"Configuracin\", Icon: Settings, addDividerBefore: true }\n];\nexport default class extends React.Component {\n  state = {\n    current_step: \"\"\n  }\n  constructor(props) {\n    super(props);\n    this.handleMounted = this.handleMounted.bind(this);\n    API.storeID = props.store.nombre;\n    API.START_LISTENING();\n  }\n  componentDidMount() {\n    if (!window.Notification) {\n      console.log('Browser does not support notifications.');\n    } else {\n      // check if permission is already granted\n      if (Notification.permission === 'granted') {\n        this.REMOVE_LISTENER = Notifications.ListenOrderChanges();\n      } else {\n        // request permission from user\n        Notification.requestPermission().then(function (p) {\n          if (p === 'granted') {\n            this.REMOVE_LISTENER = Notifications.ListenOrderChanges();\n          } else {\n            console.log('User blocked notifications.');\n          }\n        }).catch(function (err) {\n          console.error(err);\n        });\n      }\n    }\n  }\n  componentWillUnmount() {\n    this.REMOVE_LISTENER && this.REMOVE_LISTENER();\n  }\n  handleMounted(current_step) {\n    this.setState({ current_step });\n  }\n  render() {\n    const { current_step } = this.state;\n    const { title } = current_step && STEPS.find(x => x.id === current_step);\n    return (<HashRouter>\n      <StoreContext.Provider value={this.props.store}>\n        <Paper style={{ height: \"100vh\", width: \"100%\" }}>\n          <AppBar user={this.props.user} store={this.props.store} title={title} onLogOut={this.props.onLogOut} />\n          <AppMenu STEPS={STEPS} current_step={current_step} />\n          <div style={{ height: \"calc(100% - 60px)\", width: \"calc(100% - 205px)\", paddingLeft: 205, paddingTop: 60, overflow: \"hidden\" }}>\n            <Switch>\n\n              <Route path=\"/orders\" render={props => (<Orders\n                {...props}\n                store={this.props.store}\n                onMounted={this.handleMounted}\n                stepID={\"orders\"}\n              />)} />\n\n              <Route path=\"/products\" render={props => (<Products\n                {...props}\n                store={this.props.store}\n                onMounted={this.handleMounted}\n                stepID={\"products\"}\n              />)} />\n\n              <Route path=\"/config\" render={props => (<Config\n                {...props}\n                onMounted={this.handleMounted}\n                stepID={\"config\"}\n              />)} />\n\n              <Route exact path=\"/\" >\n                <div style={{ paddingTop: 100, width: \"100%\", textAlign: \"center\" }}>\n                  <Typography variant=\"h4\">BIENVENIDO!</Typography>\n                  <Typography variant=\"subtitle2\">RunFood Orders - Administrador</Typography>\n                </div>\n              </Route>\n            </Switch>\n          </div>\n        </Paper>\n      </StoreContext.Provider>\n    </HashRouter>)\n  }\n}","import React from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    TextField,\r\n    Typography,\r\n    InputAdornment,\r\n    Button,\r\n    CircularProgress,\r\n    IconButton\r\n} from \"@material-ui/core\";\r\nimport { AccountCircle, Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport API from \"./Services/API\";\r\n\r\nconst styles = {\r\n    control: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n}\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        user: \"\",\r\n        pdw: \"\",\r\n        showPassword: false,\r\n        loading: false,\r\n        store: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleTogglePassword = this.handleTogglePassword.bind(this);\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { loading, user, pwd } = this.state;\r\n        if (loading) return;\r\n        if (!user) return this.setState({ error: { message: \"Digite el usuario\" } });\r\n        if (!pwd) return this.setState({ error: { message: \"Digite la contrasea\" } });\r\n        this.setState({ loading: true });\r\n        API.LogIn({\r\n            user: user,\r\n            pwd: pwd,\r\n            withStoresInfo: true\r\n        }).then(userInfo =>\r\n            this.props.onLogged({\r\n                user,\r\n                token: userInfo.token,\r\n                store: userInfo.store\r\n            })\r\n        ).catch(error => this.setState({ error, loading: false }));\r\n    }\r\n    handleTogglePassword() {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.showPassword = !state.showPassword;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { showPassword, loading, error, user, pwd } = this.state;\r\n        return (<div style={{ padding: 40, overflow: \"auto\" }}>\r\n            <Card style={{ width: 400, margin: \"auto\" }}>\r\n                <CardContent style={{ padding: 0 }}><form onSubmit={this.handleSubmit} style={{ padding: 20 }}>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h5\">INICIO DE SESION</Typography>\r\n                    <TextField\r\n                        autoFocus={true}\r\n                        disabled={loading}\r\n                        required\r\n                        style={{ ...styles.control }}\r\n                        fullWidth\r\n                        label=\"USUARIO\"\r\n                        value={user || \"\"}\r\n                        name={\"user\"}\r\n                        onChange={this.handleChange}\r\n                        type=\"email\"\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <AccountCircle />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        fullWidth\r\n                        style={{ ...styles.control }}\r\n                        value={pwd || \"\"}\r\n                        label=\"CONTRASEA\"\r\n                        name={\"pwd\"}\r\n                        onChange={this.handleChange}\r\n                        type={showPassword ? \"text\" : \"password\"}\r\n                        InputProps={{\r\n                            endAdornment: (\r\n                                <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handleTogglePassword}>\r\n                                        {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    {error && <div style={{ width: \"100%\" }}>\r\n                        <Typography color=\"secondary\" variant=\"body2\">{error.message} {error.code && error.code}</Typography>\r\n                        <Typography color=\"secondary\" variant=\"body1\">{error.status} | {error.statusText}</Typography>\r\n                    </div>}\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth style={{ ...styles.control }}\r\n                        variant=\"outlined\"\r\n                        disabled={loading}\r\n                        color=\"primary\"\r\n                    >\r\n                        {loading ? <CircularProgress size={20} color=\"inherit\" /> : \"ENTRAR\"}\r\n                    </Button>\r\n                </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div >)\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n *\r\n    handleStore(event) {\r\n        const { id } = event.currentTarget;\r\n        const store = this.state.stores[+id];\r\n        this.setState({ store });\r\n        this.props.onLogged({\r\n            user: this.state.user,\r\n            token: this.state.token,\r\n            store\r\n        });\r\n    }\r\n                    {stores\r\n                        ? (<div>\r\n                            <Typography variant=\"h5\" style={{ margin: 10, textAlign: \"center\" }}>SELECCIONA LA TIENDA</Typography>\r\n                            <List style={{ ...styles.control, padding: 0 }}>\r\n                                {stores.map((x, index) => (\r\n                                    <ListItem\r\n                                        style={{ padding: 10 }}\r\n                                        button\r\n                                        onClick={this.handleStore}\r\n                                        key={index}\r\n                                        id={index}\r\n                                        disabled={Boolean(store)}>\r\n                                        <ListItemText>{x.titulo}</ListItemText>\r\n                                        <ListItemIcon><img alt={x.titulo} style={{ maxWidth: 100, maxHeight: 100 }} src={x.logoSrc}></img></ListItemIcon>\r\n                                    </ListItem>))}\r\n                            </List>\r\n                        </div>)\r\n                        : (\r\n                            )\r\n                    }\r\n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Login from './Login';\nimport API, { viewLoginData, storeLoginData } from \"./Services/API\";\n\nfunction LaunchApp(data) {\n    // uso viewLoginData porque pone por default la position en quito\n    // en caso de que position sea NULL\n    if (!data) data = viewLoginData();\n    ReactDOM.render(<App user={data.user} store={data.store} onLogOut={LoggedOut} />, document.getElementById('app'));\n}\nfunction LaunchLogin() {\n    ReactDOM.render(<Login onLogged={Logged} />, document.getElementById('app'));\n}\nfunction Logged(data) {\n    storeLoginData(data);\n    LaunchApp();\n}\nfunction LoggedOut() {\n    API.STOP_LISTENING();\n    storeLoginData();\n    LaunchLogin();\n}\n//LaunchLogin();\n\nviewLoginData()\n    ? LaunchApp()\n    : LaunchLogin();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();"],"sourceRoot":""}
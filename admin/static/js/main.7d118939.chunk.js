(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5594:function(e,t,n){e.exports=n(5989)},5986:function(e,t){},5989:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),l=n(327),c=n(30),s=n(31),d=n(33),u=n(32),h=n(34),m=n(10),p=n(44),E=n(185),f=n(2),g=n(25),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={menuEl:null},n.handleMenu=n.handleMenu.bind(Object(m.a)(Object(m.a)(n))),n.handleClose=n.handleClose.bind(Object(m.a)(Object(m.a)(n))),n.handleLogOut=n.handleLogOut.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleMenu",value:function(e){this.setState({menuEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({menuEl:null})}},{key:"handleLogOut",value:function(){window.confirm("Est\xe1 seguro de cerrar sesi\xf3n?")&&this.props.onLogOut(),this.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.store,a=e.user,o=this.state.menuEl,i=Boolean(o);return r.a.createElement(f.a,{position:"fixed",style:{zIndex:1201}},r.a.createElement(f.C,{style:{display:"flex",flexDirection:"row"}},r.a.createElement(f.D,{style:{flexGrow:1},variant:"h4",color:"inherit"},t||""),r.a.createElement("div",{style:{display:"block",textAlign:"right"}},r.a.createElement(f.D,{color:"inherit",variant:"button"},(n.titulo||"").toUpperCase()),r.a.createElement(f.D,{color:"inherit",variant:"caption"},a)),r.a.createElement("div",null,r.a.createElement(f.l,{title:n.titulo,"aria-owns":i?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},r.a.createElement(g.a,null)),r.a.createElement(f.r,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:this.handleClose},r.a.createElement(f.s,{style:{minWidth:150},autoFocus:!0,onClick:this.handleClose},"Cuenta"),r.a.createElement(f.s,{style:{minWidth:150},onClick:this.handleLogOut},"Salir")))))}}]),t}(r.a.PureComponent),v=function(e){var t=e.STEPS,n=e.current_step;return r.a.createElement(f.k,{variant:"permanent",style:{maxWidth:200}},r.a.createElement("div",{style:{paddingTop:70,width:200}},r.a.createElement(f.n,null,t.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e.addDividerBefore&&r.a.createElement(f.j,null),r.a.createElement(f.o,{component:p.b,to:"/"+e.id,selected:e.id===n,button:!0},r.a.createElement(f.q,null,e.title),r.a.createElement(f.p,null,r.a.createElement(e.Icon,null))))}))))},y=n(28),O=n(125),w=n(189),D=n(326),C=n.n(D),S="https://orders.runfoodapp.com",j={lat:-.180653,lng:-78.467834},x=(new Date).toString()+":"+Math.floor(1e5+9e5*Math.random());function k(e){e?window.localStorage.setItem("__",JSON.stringify(e)):window.localStorage.removeItem("__")}function T(){var e=window.localStorage.getItem("__");if(e)return(e=JSON.parse(e)).position||(e.position=j),e}function N(){var e=T();if(!e)throw window.location.reload(),{message:"Necesitas iniciar sesi\xf3n para entrar aqu\xed."};return e.token+"+"+x}var R,A={ON_ORDERS_CHANGED:[]};function _(e,t){var n={method:"GET",cache:"reload",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};if(t.headers){for(var a in t.headers)n.headers[a]=t.headers[a];delete t.headers}return fetch(e,Object(y.a)({},n,t)).then(function(e){return e.ok?e.json():e.clone().json().catch(function(){return e.text().then(function(t){throw{message:t,status:e.status,statusText:e.statusText}})}).then(function(t){throw Object(y.a)({},t,{status:e.status,statusText:e.statusText})})}).catch(function(e){if("Failed to fetch"===e.message)throw{message:"Este servicio no se encuentra disponible por el momento. Intentelo m\xe1s tarde.",status:0};throw e.message||(e.message=e.statusText),e})}var I={LogIn:function(e){return _("".concat(S,"/login"),{body:JSON.stringify(e),method:"POST"}).catch(function(e){if(400===e.status)throw Object(y.a)({},e,{message:"Usuario o contrase\xf1a incorrectos."});if(401===e.status)throw Object(y.a)({},e);if(401===e.status)throw Object(y.a)({},e)})},GetOrders:function(e){return _("".concat(S,"/data/").concat(this.storeID,"/order?").concat(new URLSearchParams(e).toString()),{headers:{Authorization:"Basic "+btoa(N())}})},GetOrder:function(e){return _("".concat(S,"/data/").concat(this.storeID,"/order/").concat(e),{headers:{Authorization:"Basic "+btoa(N())}})},OrdersOnRoute:function(e){return _("".concat(S,"/data/").concat(this.storeID,"/order-actions/ON-ROUTE"),{method:"POST",body:JSON.stringify({orders:e}),headers:{Authorization:"Basic "+btoa(N())}})},OrdersDelivered:function(e){return _("".concat(S,"/data/").concat(this.storeID,"/order-actions/DELIVERED"),{method:"POST",body:JSON.stringify({orders:e}),headers:{Authorization:"Basic "+btoa(N())}})},ListenOnOrderChange:function(e){return A.ON_ORDERS_CHANGED.push(e),function(){return A.ON_ORDERS_CHANGED.splice(A.ON_ORDERS_CHANGED.indexOf(e),1)}},START_LISTENING:function(){R=C()(S,{query:{token:btoa(N())}}),console.info("SOCKET CONNECTED"),R.on("ORDERS_CHANGED",function(e){e.origin!==btoa(N())&&A.ON_ORDERS_CHANGED.forEach(function(t){return t(e.payload,!e.deletedAt)})})},STOP_LISTENING:function(){R&&R.disconnect(),console.info("SOCKET DISCONNECTED")}},L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={data:null,error:null},n.close=n.close.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;I.GetOrder(this.props.match.params.id).then(function(t){return e.setState({data:t})}).catch(function(t){return e.setState({error:t})})}},{key:"close",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.error;if(!t)return r.a.createElement(f.g,{open:!0,onClose:this.close},r.a.createElement(f.i,{style:{minWidth:400,height:400}},n?r.a.createElement("div",{style:{textAlign:"center",padding:20}},r.a.createElement(f.D,{variant:"h6"},"Ocurri\xf3 un error"),r.a.createElement(f.D,{variant:"body2"},n.message),r.a.createElement(f.D,{variant:"button"},n.status," ",n.statusText)):r.a.createElement("div",{style:{textAlign:"center",padding:100}},r.a.createElement(f.f,{size:100}),r.a.createElement(f.D,{variant:"h6"},"CARGANDO..."))));var a=t.documento_factura&&t.identificacion_factura,o=t.detalle.reduce(function(e,t){return e.neto+=t.pvp*t.cantidad,e.cantidad+=t.cantidad,t.pagaIva&&(e.iva+=12*e.neto/100),e},{cantidad:0,neto:0,iva:0});return o.total=(o.neto+o.iva).round(2),r.a.createElement(f.g,{open:!0,onClose:this.close},r.a.createElement(f.i,{style:{minWidth:400,height:400}},r.a.createElement(f.D,{style:{textAlign:"center"},variant:"h5"},"ORDEN #",t.numero),r.a.createElement(f.j,{style:{marginTop:10}}),r.a.createElement("div",null,r.a.createElement(f.D,{style:{display:"inline-block",width:80},variant:"body2"},"FECHA: "),r.a.createElement(f.D,{style:{display:"inline-block"},variant:"body1"},t.createdAt&&new Date(t.createdAt).toLocaleString())),r.a.createElement("div",null,r.a.createElement(f.D,{style:{display:"inline-block",width:80},variant:"body2"},"CLIENTE: "),r.a.createElement(f.D,{style:{display:"inline-block"},variant:"body1"},t.nombre)),(t.Documento||t.identificacion)&&r.a.createElement("div",null,r.a.createElement(f.D,{style:{display:"inline-block",width:80},variant:"body2"},t.Documento||"C.I. / RUC",": "),r.a.createElement(f.D,{style:{display:"inline-block"},variant:"body1"},t.identificacion)),r.a.createElement("div",null,r.a.createElement(f.D,{style:{display:"inline-block",width:80},variant:"body2"},"TLF: "),r.a.createElement(f.D,{style:{display:"inline-block"},variant:"body1"},t.telefono)),r.a.createElement("div",null,r.a.createElement(f.D,{style:{display:"inline-block",width:80},variant:"body2"},"DIRECCION: "),r.a.createElement(f.D,{style:{display:"inline-block"},variant:"body1"},t.direccion)),r.a.createElement(f.j,{style:{marginTop:10}}),r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row"}},r.a.createElement(f.D,{style:{flex:1,marginRight:10},variant:"h6"},"PRODUCTO"),r.a.createElement(f.D,{style:{width:60,marginRight:10},variant:"h6"},"CANT"),r.a.createElement(f.D,{style:{width:70,textAlign:"right"},variant:"h6"},"TOTAL")),t.detalle.map(function(e,t){return r.a.createElement(M,Object.assign({},e,{key:t}))}),r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginTop:10}},r.a.createElement(f.D,{variant:"h6",style:{flex:1,marginRight:10}},"Filas: ",t.detalle.length),r.a.createElement(f.D,{style:{marginRight:10,width:60},variant:"h6"},o.cantidad.round(4)),r.a.createElement(f.D,{style:{width:70,textAlign:"right"},variant:"h6"},"$ ",o.total.toFixed(2))),r.a.createElement(f.j,{style:{marginTop:10}}),r.a.createElement(f.D,null,"PAGO : ",t.FormaPago),r.a.createElement(f.D,null,"NOTAS: ",t.nota),a&&r.a.createElement("div",null,r.a.createElement(f.j,{style:{marginTop:10}}),r.a.createElement(f.D,{style:{textAlign:"center",width:"100%"},variant:"h6"},"DATOS DE FACTURACI\xd3N"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(f.D,{variant:"body2"},t.Documento_factura,":"),r.a.createElement(f.D,{variant:"body2",style:{flex:1,marginLeft:10}},t.identificacion_factura)),r.a.createElement(P,{title:"Razon Social",icon:g.b,text:t.razonsocial_factura}),r.a.createElement(P,{title:"Telefono",icon:g.g,text:t.telefono_factura}),r.a.createElement(P,{title:"Direcci\xf3n",icon:g.f,text:t.direccion_factura}))),r.a.createElement(f.h,null,r.a.createElement(f.b,{variant:"outlined",color:"secondary",onClick:this.close},"SALIR")))}}]),t}(r.a.Component);function M(e){var t=e.pvp*e.cantidad,n=e.pagaIva?12*t/100:0;return r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{flex:1,marginRight:10}},r.a.createElement(f.D,{variant:"subtitle2"},e.descripcion),r.a.createElement(f.D,{variant:"body1"},e.nota)),r.a.createElement(f.D,{style:{marginRight:10,width:60},variant:"subtitle2"},e.cantidad.round(4)),r.a.createElement(f.D,{style:{width:70,textAlign:"right"},variant:"subtitle2"},"$ ",(t+n).round(2)))}function P(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"},title:e.title},r.a.createElement(e.icon,null),r.a.createElement(f.D,{style:{padding:3,flex:1}},e.text))}var G=Object(E.g)(function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(m.a)(Object(m.a)(n))),e.onMounted&&e.onMounted(null,e.estado),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){e.stopPropagation();var t=e.currentTarget.id;this.props.history.push(this.props.match.path+"/"+t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.onSelect,o=t.estado,i=t.now,l=t.timeCol,c=n.filter(function(e){return e.estado===o});return r.a.createElement(f.v,{component:"div",style:{display:"flex",flexDirection:"column",height:"calc(100% - 100px)"}},r.a.createElement(f.y,{component:"div",style:{display:"block"}},r.a.createElement(f.z,{component:"div",style:{width:"20%"}},r.a.createElement(f.x,{component:"div",style:{textAlign:"center"}},r.a.createElement(g.c,null)),r.a.createElement(f.x,{component:"div",style:{width:"20%"}},r.a.createElement(f.D,{variant:"button"},"#")),r.a.createElement(f.x,{component:"div",style:{width:"60%"}},r.a.createElement(f.D,{variant:"button"},"Cliente")),r.a.createElement(f.x,{component:"div",style:{width:"20%"}},r.a.createElement(f.D,{variant:"button"},"Hora")))),r.a.createElement(f.w,{component:"div",style:{flex:1,overflow:"auto",display:"block"}},c.map(function(t){return r.a.createElement(U,Object.assign({onClick:e.handleClick,onCheck:a,timeCol:l,key:t.id},t,{now:i}))})),r.a.createElement(E.b,{component:L,path:"".concat(this.props.match.path,"/:id")}))}}]),t}(r.a.PureComponent)),U=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props;return r.a.createElement(f.z,{tabIndex:0,style:{width:"100%",cursor:"pointer"},onContextMenu:e.onContextMenu,selected:e.selected,hover:!0,id:""+e.id,onClick:e.onClick,component:"div"},r.a.createElement(f.x,{component:"div",padding:"checkbox",style:{width:"20%"}},"deliveredAt"===e.timeCol?r.a.createElement(g.c,null):r.a.createElement(f.e,{checked:e.selected||!1,value:""+e.id,onClick:e.onCheck})),r.a.createElement(f.x,{style:{width:"20%"},component:"div",scope:"row"},e.numero),r.a.createElement(f.x,{style:{width:"60%"},component:"div"},e.nombre),r.a.createElement(f.x,{style:{width:"20%"},component:"div",title:new Date(e[e.timeCol]).toLocaleString()},function(e){var t=z(e),n=z(new Date);if(t===n)return e.toLocaleTimeString();if(t+1===n)return"Ayer "+e.toLocaleTimeString();if(n>t&&n-t<6)return"Hace "+(n-t)+" dias "+e.toLocaleTimeString();return e.toLocaleString()}(new Date(e[e.timeCol]))))}}]),t}(r.a.PureComponent);function z(e){var t=new Date(e.getFullYear(),0,0),n=e-t;return Math.floor(n/864e5)}var V=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={now:(new Date).valueOf(),data:[],loading:!0,goToCenter:null,navigationValue:0},e.onMounted&&e.onMounted(e.stepID),n.handleRightClick=n.handleRightClick.bind(Object(m.a)(Object(m.a)(n))),n.handleSelect=n.handleSelect.bind(Object(m.a)(Object(m.a)(n))),n.handleCurrentLocation=n.handleCurrentLocation.bind(Object(m.a)(Object(m.a)(n))),n.handleNavigation=n.handleNavigation.bind(Object(m.a)(Object(m.a)(n))),n.handleChangeState=n.handleChangeState.bind(Object(m.a)(Object(m.a)(n))),n.__updateRecords=n.__updateRecords.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;I.GetOrders().then(function(t){e.setState({data:t,loading:!1}),e.REMOVE_LISTENER=I.ListenOnOrderChange(e.__updateRecords)}).catch(function(t){return e.setState({error:t,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.STOP_TIMER&&this.STOP_TIMER(),this.REMOVE_LISTENER&&this.REMOVE_LISTENER()}},{key:"handleRightClick",value:function(e){}},{key:"handleSelect",value:function(e){e.stopPropagation();var t=e.target,n=t.value,a=t.checked;this.setState(function(e){var t=Object(y.a)({},e);t.data=e.data;var r=t.data.find(function(e){return e.id===+n});return r?(r.selected=a,r.selected&&(t.goToCenter={lat:+r.lat,lng:+r.lng}),t):t})}},{key:"handleCurrentLocation",value:function(){this.setState({goToCenter:this.props.store.position})}},{key:"handleNavigation",value:function(e,t){this.setState({navigationValue:t})}},{key:"handleChangeState",value:function(){var e=this,t=this.state,n=t.data,a=t.navigationValue,r=n.filter(function(e){return e.selected&&e.estado===a});if(!r.length)return alert("Seleccione al menos un registro");var o=r.map(function(e){return e.id});return this.setState({loading:!0}),0===a?I.OrdersOnRoute(o).then(this.__updateRecords).catch(function(t){return e.setState({error:t,loading:!1})}):1===a?I.OrdersDelivered(o).then(this.__updateRecords).catch(function(t){return e.setState({error:t,loading:!1})}):(this.setState({loading:!1}),void alert("No se encontro el navigationValue="+a))}},{key:"__updateRecords",value:function(e,t){this.setState(function(n){var a=Object(y.a)({},n,{loading:!1});return a.data=n.data,e.forEach(function(e){var n=a.data.find(function(t){return t.id===e.id});if(n)return a.data[a.data.indexOf(n)]=Object(y.a)({},n,{selected:!1},e);!n&&t&&a.data.push(e)}),a})}},{key:"render",value:function(){var e=this,t=this.state,n=t.now,a=t.loading,o=t.error,i=t.data,l=t.goToCenter,c=t.navigationValue;if(a)return r.a.createElement("div",{style:{width:"100%",textAlign:"center",margin:"auto",paddingTop:100}},r.a.createElement(f.f,{size:70}),r.a.createElement(f.D,{variant:"h4"},"CARGANDO..."));if(o)return r.a.createElement("div",{style:{width:"100%",textAlign:"center",margin:"auto",paddingTop:100}},r.a.createElement(g.d,{size:70}),r.a.createElement(f.D,{variant:"h4"},"Ocurri\xf3 un error"),r.a.createElement(f.D,{variant:"subtitle1"},o.message),r.a.createElement(f.D,{variant:"body1"},o.status," | ",o.statusText," | ",o.code));var s,d=this.props.store&&this.props.store.G_M_K||"",u=i.filter(function(e){return e.selected&&e.estado===c});return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"100%"}},r.a.createElement("div",{style:{flex:1,overflow:"auto",height:"100%"}},r.a.createElement(f.A,{textColor:"primary",indicatorColor:"primary",style:{width:"100%"},color:"primary",value:c,onChange:this.handleNavigation},r.a.createElement(f.u,{style:{width:"32%"},label:"Pendientes",component:p.b,to:this.props.match.path+"/0"}),r.a.createElement(f.u,{style:{width:"32%"},label:"En Ruta",component:p.b,to:this.props.match.path+"/1"}),r.a.createElement(f.u,{style:{width:"32%"},label:"Entregado",component:p.b,to:this.props.match.path+"/2"})),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:this.props.match.path+"/0",render:function(t){return r.a.createElement(G,Object.assign({onMounted:e.handleNavigation},t,{data:i,timeCol:"createdAt",selections:u,onSelect:e.handleSelect,now:n,estado:0}))}}),r.a.createElement(E.b,{path:this.props.match.path+"/1",render:function(t){return r.a.createElement(G,Object.assign({onMounted:e.handleNavigation},t,{data:i,timeCol:"onRouteAt",selections:u,onSelect:e.handleSelect,estado:1}))}}),r.a.createElement(E.b,{path:this.props.match.path+"/2",render:function(t){return r.a.createElement(G,Object.assign({onMounted:e.handleNavigation},t,{data:i,timeCol:"deliveredAt",selections:u,onSelect:e.handleSelect,estado:2}))}}),r.a.createElement(E.a,{path:this.props.match.path,to:this.props.match.path+"/0"})),2===c?null:r.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,paddingRight:10}},r.a.createElement(f.b,{disabled:!u.length,style:{flex:1},variant:"outlined",color:"primary",onClick:this.handleChangeState},0===(s=c)?"ENVIAR":1===s?"ENTREGADO":s),r.a.createElement(f.b,{variant:"outlined",style:{marginLeft:10},color:"secondary",disabled:!u.length,target:"_blank",href:function(e,t){for(var n=[e],a=0;a<t.length;a++)n.push(t[a]);return 1===n.length?"":"https://www.google.com/maps/dir/ "+n.map(function(e){return[e.lat,e.lng].join(",")}).join("/")}(this.props.store.position,u||[]),component:"a"},"Ruta"))),r.a.createElement("div",{style:{flex:1,overflow:"auto",height:"100%",display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{flex:1}},r.a.createElement(B,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(d||"","&v=3.exp&libraries=geometry,drawing,places"),containerElement:r.a.createElement("div",{style:{height:"100%"}}),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),selections:u,store:this.props.store,center:l||this.props.store.position}))))}}]),t}(r.a.Component);var B=Object(O.withScriptjs)(Object(O.withGoogleMap)(function(e){return r.a.createElement(O.GoogleMap,Object.assign({},e,{defaultCenter:e.store.position,defaultZoom:15,options:{disableDefaultUI:!0,zoomControl:!0,clickableIcons:!1}}),r.a.createElement(w.MarkerWithLabel,{labelAnchor:new window.google.maps.Point(0,0),position:e.store.position,options:{icon:"./store.png"},labelStyle:{background:"#fff",border:"1px solid #29b6f6",padding:"2px 10px"}},r.a.createElement(f.D,{variant:"body1",color:"inherit"},e.store.titulo.toUpperCase())),e.selections&&e.selections.map(function(e){return r.a.createElement(w.MarkerWithLabel,{key:e.id,labelAnchor:new window.google.maps.Point(0,0),position:{lat:+e.lat,lng:+e.lng},labelStyle:{background:"#fff",border:"1px solid grey",padding:"2px 10px"}},r.a.createElement(f.D,{variant:"button"},e.nombre))}))}));var F=[{id:"orders",title:"Pedidos",Icon:g.e}],W=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={current_step:""},n.handleMounted=n.handleMounted.bind(Object(m.a)(Object(m.a)(n))),I.storeID=e.store.nombre,I.START_LISTENING(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.Notification?"granted"===Notification.permission?this.REMOVE_LISTENER=this.__setListener():Notification.requestPermission().then(function(e){"granted"===e?this.REMOVE_LISTENER=this.__setListener():console.log("User blocked notifications.")}).catch(function(e){console.error(e)}):console.log("Browser does not support notifications.")}},{key:"componentWillUnmount",value:function(){this.REMOVE_LISTENER&&this.REMOVE_LISTENER()}},{key:"__setListener",value:function(){I.ListenOnOrderChange(function(e){var t,n=Object(l.a)(e,1)[0];0===n.estado&&(t=new Notification("NUEVO PEDIDO",{body:n.nombre+" - Orden #"+n.numero,icon:"./favicon.ico"})),1===n.estado&&(t=new Notification("LA ORDEN #"+n.numero+" EST\xc1 EN RUTA",{body:n.nombre+" - Orden #"+n.numero,icon:"./favicon.ico"})),2===n.estado&&(t=new Notification("LA ORDEN #"+n.numero+" FUE ENTREGADA",{body:n.nombre+" - Orden #"+n.numero,icon:"./favicon.ico"})),3===n.estado&&(t=new Notification("LA ORDEN #"+n.numero+" FUE CANCELADA",{body:n.nombre+" - Orden #"+n.numero,icon:"./favicon.ico"}),t=null),t&&(t.onclick=function(){window.focus(),window.location.href="#/orders/"+n.estado+"/"+n.id})})}},{key:"handleMounted",value:function(e){this.setState({current_step:e})}},{key:"render",value:function(){var e=this,t=this.state.current_step,n=(t&&F.find(function(e){return e.id===t})).title;return r.a.createElement(p.a,null,r.a.createElement(f.t,{style:{height:"100vh",width:"100%"}},r.a.createElement(b,{user:this.props.user,store:this.props.store,title:n,onLogOut:this.props.onLogOut}),r.a.createElement(v,{STEPS:F,current_step:t}),r.a.createElement("div",{style:{height:"calc(100% - 60px)",width:"calc(100% - 205px)",paddingLeft:205,paddingTop:60,overflow:"hidden"}},r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/orders",render:function(t){return r.a.createElement(V,Object.assign({},t,{store:e.props.store,onMounted:e.handleMounted,stepID:"orders"}))}}),r.a.createElement(E.b,{exact:!0,path:"/"},r.a.createElement("div",{style:{paddingTop:20,width:"100%",textAlign:"center"}},r.a.createElement(f.D,{variant:"h4"},"BIENVENIDO!"),r.a.createElement(f.D,{variant:"subtitle2"},"RunFood - Take Orders ADMIN")))))))}}]),t}(r.a.Component),H=n(124),J={marginTop:10,marginBottom:10},q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={user:"",pdw:"",showPassword:!1,loading:!1,store:null},n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(Object(m.a)(n))),n.handleTogglePassword=n.handleTogglePassword.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(H.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state,a=n.loading,r=n.user,o=n.pwd;if(!a){if(!r)return this.setState({error:{message:"Digite el usuario"}});if(!o)return this.setState({error:{message:"Digite la contrase\xf1a"}});this.setState({loading:!0}),I.LogIn({user:r,pwd:o,withStoresInfo:!0}).then(function(e){return t.props.onLogged({user:r,token:e.token,store:e.store})}).catch(function(e){return t.setState({error:e,loading:!1})})}}},{key:"handleTogglePassword",value:function(){this.setState(function(e){var t=Object(y.a)({},e);return t.showPassword=!t.showPassword,t})}},{key:"render",value:function(){var e=this.state,t=e.showPassword,n=e.loading,a=e.error,o=e.user,i=e.pwd;return r.a.createElement("div",{style:{padding:40,overflow:"auto"}},r.a.createElement(f.c,{style:{width:400,margin:"auto"}},r.a.createElement(f.d,{style:{padding:0}},r.a.createElement("form",{onSubmit:this.handleSubmit,style:{padding:20}},r.a.createElement(f.D,{style:{textAlign:"center"},variant:"h5"},"INICIO DE SESION"),r.a.createElement(f.B,{disabled:n,required:!0,style:Object(y.a)({},J),fullWidth:!0,label:"USUARIO",value:o||"",name:"user",onChange:this.handleChange,type:"email",InputProps:{startAdornment:r.a.createElement(f.m,{position:"start"},r.a.createElement(g.a,null))}}),r.a.createElement(f.B,{required:!0,fullWidth:!0,style:Object(y.a)({},J),value:i||"",label:"CONTRASE\xd1A",name:"pwd",onChange:this.handleChange,type:t?"text":"password",InputProps:{endAdornment:r.a.createElement(f.m,{position:"end"},r.a.createElement(f.l,{onClick:this.handleTogglePassword},t?r.a.createElement(g.h,null):r.a.createElement(g.i,null)))}}),a&&r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(f.D,{color:"secondary",variant:"body2"},a.message," ",a.code&&a.code),r.a.createElement(f.D,{color:"secondary",variant:"body1"},a.status," | ",a.statusText)),r.a.createElement(f.b,{type:"submit",fullWidth:!0,style:Object(y.a)({},J),variant:"outlined",disabled:n,color:"primary"},n?r.a.createElement(f.f,{size:20,color:"inherit"}):"ENTRAR")))))}}]),t}(r.a.Component);function K(e){e||(e=T()),i.a.render(r.a.createElement(W,{user:e.user,store:e.store,onLogOut:Z}),document.getElementById("app"))}function $(){i.a.render(r.a.createElement(q,{onLogged:Y}),document.getElementById("app"))}function Y(e){k(e),K()}function Z(){I.STOP_LISTENING(),k(),$()}T()?K():$()}},[[5594,2,1]]]);
//# sourceMappingURL=main.7d118939.chunk.js.map
{"version":3,"sources":["Layouts/AppBar.js","Layouts/AppMenu.js","Services/API.js","Components/OrderDetails.js","Components/OrdersTable.js","Components/Orders.js","App.js","Login.js","index.js"],"names":["_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","menuEl","handleMenu","bind","assertThisInitialized","handleClose","handleLogOut","event","setState","currentTarget","window","confirm","onLogOut","_this$props","title","store","user","open","Boolean","react_default","a","createElement","index_es","position","style","zIndex","display","flexDirection","flexGrow","variant","color","textAlign","titulo","toUpperCase","aria-owns","undefined","aria-haspopup","onClick","icons_index_es","id","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","onClose","minWidth","autoFocus","React","PureComponent","AppMenu","STEPS","current_step","maxWidth","paddingTop","width","map","step","index","Fragment","key","addDividerBefore","component","Link","to","selected","button","Icon","URL","QUITO","lat","lng","session","Date","toString","Math","floor","random","storeLoginData","info","localStorage","setItem","JSON","stringify","removeItem","viewLoginData","getItem","parse","getToken","location","reload","message","token","socket","LISTENERS","ON_ORDERS_CHANGED","Feth","URI","options","DEFAULTS","method","cache","mode","headers","Content-Type","Access-Control-Allow-Origin","fetch","objectSpread","then","response","ok","json","clone","catch","text","x","status","statusText","obj","ex","API","LogIn","data","concat","body","GetOrders","storeID","URLSearchParams","Authorization","btoa","GetOrder","ID","OrdersOnRoute","orders","OrdersDelivered","ListenOnOrderChange","fn","push","splice","indexOf","START_LISTENING","io","query","console","on","origin","forEach","payload","deletedAt","STOP_LISTENING","disconnect","error","close","_this2","match","params","history","goBack","_this$state","height","padding","size","facturaConDatos","documento_factura","identificacion_factura","TOTALES","detalle","reduce","neto","pvp","cantidad","pagaIva","iva","total","round","numero","marginTop","createdAt","toLocaleString","nombre","Documento","identificacion","telefono","direccion","flex","marginRight","item","RowDet","assign","length","toFixed","FormaPago","nota","Documento_factura","marginLeft","DatosFacturaItem","icon","BusinessOutlined","razonsocial_factura","PhoneOutlined","telefono_factura","LocationOnOutlined","direccion_factura","Component","descripcion","withRouter","_React$PureComponent","_class","handleClick","onMounted","estado","inherits","createClass","value","stopPropagation","path","onSelect","now","timeCol","rows","filter","overflow","OrdersTable_Row","onCheck","react_router","OrderDetails","Row","tabIndex","cursor","onContextMenu","hover","checked","scope","day","DayOfYear","today","toLocaleTimeString","RenderTimeCol","date","start","getFullYear","diff","valueOf","loading","goToCenter","navigationValue","stepID","handleRightClick","handleSelect","handleCurrentLocation","handleNavigation","handleChangeState","__updateRecords","REMOVE_LISTENER","STOP_TIMER","_event$target","target","prev","find","_this3","selections","alert","IDS","results","addIfNotExists","res","_this4","_this$state2","margin","code","G_M_K","textColor","indicatorColor","onChange","label","render","OrdersTable","paddingLeft","paddingRight","disabled","href","currentLocation","locations","rutas","i","join","ruta","Map","googleMapURL","containerElement","loadingElement","mapElement","center","withScriptjs","withGoogleMap","lib","defaultCenter","defaultZoom","disableDefaultUI","zoomControl","clickableIcons","MarkerWithLabel","labelAnchor","google","maps","Point","labelStyle","background","border","Inbox","handleMounted","Notification","permission","__setListener","requestPermission","p","log","err","_ref","N","slicedToArray","onclick","focus","react_router_dom","AppBar_default","Orders_default","exact","styles","marginBottom","pdw","showPassword","handleChange","handleSubmit","handleTogglePassword","name","defineProperty","preventDefault","pwd","withStoresInfo","userInfo","onLogged","onSubmit","required","fullWidth","type","InputProps","startAdornment","endAdornment","LaunchApp","ReactDOM","App_default","LoggedOut","document","getElementById","LaunchLogin","Login_default","Logged"],"mappings":"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","file":"static/js/main.7d118939.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { AppBar, Toolbar, Typography, IconButton, Menu, MenuItem } from \"@material-ui/core\";\r\nimport { AccountCircle } from \"@material-ui/icons\";\r\n\r\nexport default class extends React.PureComponent {\r\n    state = {\r\n        menuEl: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleMenu = this.handleMenu.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleLogOut = this.handleLogOut.bind(this);\r\n    }\r\n    handleMenu(event) {\r\n        this.setState({ menuEl: event.currentTarget });\r\n    }\r\n    handleClose() {\r\n        this.setState({ menuEl: null });\r\n    }\r\n    handleLogOut() {\r\n        var ok = window.confirm(\"Está seguro de cerrar sesión?\");\r\n        if (ok) this.props.onLogOut();\r\n        this.handleClose();\r\n    }\r\n    render() {\r\n        const { title, store, user } = this.props;\r\n        const { menuEl } = this.state;\r\n        const open = Boolean(menuEl);\r\n        return (<AppBar position=\"fixed\" style={{ zIndex: 1201 }}>\r\n            <Toolbar style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <Typography style={{ flexGrow: 1 }} variant=\"h4\" color=\"inherit\" >{title || \"\"}</Typography>\r\n                <div style={{ display: \"block\", textAlign: \"right\" }}>\r\n                    <Typography color=\"inherit\" variant=\"button\">{(store.titulo || \"\").toUpperCase()}</Typography>\r\n                    <Typography color=\"inherit\" variant=\"caption\">{user}</Typography>\r\n                </div>\r\n                <div>\r\n                    <IconButton\r\n                        title={store.titulo}\r\n                        aria-owns={open ? 'menu-appbar' : undefined}\r\n                        aria-haspopup=\"true\"\r\n                        onClick={this.handleMenu}\r\n                        color=\"inherit\"\r\n                    >\r\n                        <AccountCircle />\r\n                    </IconButton>\r\n                    <Menu\r\n                        id=\"menu-appbar\"\r\n                        anchorEl={menuEl}\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={open}\r\n                        onClose={this.handleClose}\r\n                    >\r\n                        <MenuItem style={{ minWidth: 150 }} autoFocus={true} onClick={this.handleClose}>Cuenta</MenuItem>\r\n                        <MenuItem style={{ minWidth: 150 }} onClick={this.handleLogOut}>Salir</MenuItem>\r\n                    </Menu>\r\n                </div>\r\n            </Toolbar>\r\n        </AppBar>)\r\n    }\r\n};","import React from \"react\";\r\nimport { Drawer, List, ListItem, ListItemText, ListItemIcon, Divider } from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\nexport default function (props) {\r\n    const { STEPS, current_step } = props;\r\n    return (<Drawer variant=\"permanent\" style={{ maxWidth: 200 }}>\r\n        <div style={{ paddingTop: 70, width: 200 }}>\r\n            <List>\r\n                {STEPS.map((step, index) => (<React.Fragment key={index}>\r\n                    {step.addDividerBefore && <Divider />}\r\n                    <ListItem\r\n                        component={Link}\r\n                        to={\"/\" + step.id}\r\n                        selected={step.id === current_step}\r\n                        button\r\n                    >\r\n                        <ListItemText>{step.title}</ListItemText>\r\n                        <ListItemIcon>{<step.Icon />}</ListItemIcon>\r\n                    </ListItem>\r\n                </React.Fragment>\r\n                ))}\r\n            </List>\r\n        </div>\r\n    </Drawer>)\r\n}","import io from \"socket.io-client\";\r\n/*const URL = (window.location.href.indexOf(\"http://localhost\") === 0)\r\n    ? \"http://localhost:10000/data/\"\r\n    : (window.location.protocol === \"https:\"\r\n        ? \"https://orders-runfoodapp.rj.r.appspot.com/data/\"\r\n        : \"http://runfoodapp.ddns.net:10000/data/\");*/\r\nconst URL = \"https://orders.runfoodapp.com\";\r\n\r\nconst QUITO = { lat: -0.180653, lng: -78.467834 };\r\n\r\nconst session = new Date().toString() + \":\" + Math.floor(100000 + Math.random() * 900000);\r\n\r\nexport function storeLoginData(info) {\r\n    if (info) {\r\n        window.localStorage.setItem(\"__\", JSON.stringify(info));\r\n    } else {\r\n        window.localStorage.removeItem(\"__\");\r\n    }\r\n}\r\nexport function viewLoginData() {\r\n    let info = window.localStorage.getItem(\"__\");\r\n    if (!info) return;\r\n    info = JSON.parse(info);\r\n    if (!info.position) info.position = QUITO;\r\n    return info;\r\n}\r\nfunction getToken() {\r\n    const info = viewLoginData();\r\n    if (!info) {\r\n        window.location.reload();\r\n        throw { message: \"Necesitas iniciar sesión para entrar aquí.\" };\r\n    }\r\n    return info.token + \"+\" + session;\r\n}\r\n\r\nconst LISTENERS = {\r\n    ON_ORDERS_CHANGED: []\r\n};\r\nlet socket;\r\nconst API = {\r\n    LogIn(data) {\r\n        return Feth(`${URL}/login`, {\r\n            body: JSON.stringify(data),\r\n            method: \"POST\"\r\n        }).catch(x => {\r\n            if (x.status === 400) throw { ...x, message: \"Usuario o contraseña incorrectos.\" };\r\n            if (x.status === 401) throw { ...x };\r\n            if (x.status === 401) throw { ...x };\r\n        });\r\n    },\r\n    GetOrders(body) {\r\n        return Feth(`${URL}/data/${this.storeID}/order?${new URLSearchParams(body).toString()}`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    GetOrder(ID) {\r\n        return Feth(`${URL}/data/${this.storeID}/order/${ID}`, {\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    OrdersOnRoute(orders) {\r\n        return Feth(`${URL}/data/${this.storeID}/order-actions/ON-ROUTE`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ orders }),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    OrdersDelivered(orders) {\r\n        return Feth(`${URL}/data/${this.storeID}/order-actions/DELIVERED`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ orders }),\r\n            headers: {\r\n                \"Authorization\": \"Basic \" + btoa(getToken())\r\n            }\r\n        });\r\n    },\r\n    ListenOnOrderChange(fn) {\r\n        LISTENERS.ON_ORDERS_CHANGED.push(fn);\r\n        return () => LISTENERS.ON_ORDERS_CHANGED.splice(LISTENERS.ON_ORDERS_CHANGED.indexOf(fn), 1);\r\n    },\r\n    START_LISTENING() {\r\n        socket = io(URL, {\r\n            query: {\r\n                token: btoa(getToken())\r\n            }\r\n        });\r\n        console.info(\"SOCKET CONNECTED\");\r\n        socket.on(\"ORDERS_CHANGED\", data => {\r\n            if (data.origin === btoa(getToken())) return;\r\n            LISTENERS.ON_ORDERS_CHANGED.forEach(fn => fn(data.payload, !data.deletedAt));\r\n        });\r\n    },\r\n    STOP_LISTENING() {\r\n        socket && socket.disconnect();\r\n        console.info(\"SOCKET DISCONNECTED\");\r\n    }\r\n}\r\n\r\nfunction Feth(URI, options) {\r\n    const DEFAULTS = {\r\n        method: \"GET\",\r\n        cache: \"reload\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Access-Control-Allow-Origin': '*'\r\n        }\r\n    };\r\n    // headers\r\n    if (options.headers) {\r\n        for (const key in options.headers) {\r\n            DEFAULTS.headers[key] = options.headers[key];\r\n        }\r\n        delete options.headers;\r\n    }\r\n    return fetch(URI, { ...DEFAULTS, ...options }).then(response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        } else {\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }\r\n    }).catch(ex => {\r\n        if (ex.message === \"Failed to fetch\") {\r\n            throw {\r\n                message: \"Este servicio no se encuentra disponible por el momento. Intentelo más tarde.\",\r\n                status: 0\r\n            }\r\n        }\r\n        if (!ex.message) ex.message = ex.statusText;\r\n        throw ex;\r\n    });\r\n}\r\nexport default API;\r\n\r\n","import React from \"react\";\r\nimport { DialogContent, Dialog, CircularProgress, Typography, Divider, DialogActions, Button } from \"@material-ui/core\";\r\nimport { PhoneOutlined, BusinessOutlined, LocationOnOutlined } from \"@material-ui/icons\";\r\nimport API from \"../Services/API\";\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        data: null,\r\n        error: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.close = this.close.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        API.GetOrder(this.props.match.params.id)\r\n            .then(\r\n                data => this.setState({ data })\r\n            ).catch(error => this.setState({ error }));\r\n    }\r\n    close() {\r\n        this.props.history.goBack();\r\n    }\r\n    render() {\r\n        const { data, error } = this.state;\r\n        if (!data) return (<Dialog open={true} onClose={this.close} >\r\n            <DialogContent style={{ minWidth: 400, height: 400 }}>\r\n                {error\r\n                    ? (<div style={{ textAlign: \"center\", padding: 20 }}>\r\n                        <Typography variant=\"h6\">Ocurrió un error</Typography>\r\n                        <Typography variant=\"body2\">{error.message}</Typography>\r\n                        <Typography variant=\"button\">{error.status} {error.statusText}</Typography>\r\n                    </div>)\r\n                    : (<div style={{ textAlign: \"center\", padding: 100 }}>\r\n                        <CircularProgress size={100} />\r\n                        <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                    </div>)}\r\n            </DialogContent>\r\n        </Dialog>);\r\n\r\n        const facturaConDatos = data.documento_factura && data.identificacion_factura;\r\n        const TOTALES = data.detalle.reduce((a, x) => {\r\n            a.neto += (x.pvp * x.cantidad);\r\n            a.cantidad += x.cantidad;\r\n            if (x.pagaIva) a.iva += (a.neto * 12) / 100;\r\n            return a;\r\n        }, {\r\n            cantidad: 0,\r\n            neto: 0,\r\n            iva: 0\r\n        });\r\n        TOTALES.total = (TOTALES.neto + TOTALES.iva).round(2);\r\n\r\n        return (<Dialog open={true} onClose={this.close}>\r\n            <DialogContent style={{ minWidth: 400, height: 400 }}>\r\n                <Typography style={{ textAlign: \"center\" }} variant=\"h5\">ORDEN #{data.numero}</Typography>\r\n                <Divider style={{ marginTop: 10 }} />\r\n\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 80 }} variant=\"body2\">FECHA: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.createdAt && new Date(data.createdAt).toLocaleString()}</Typography>\r\n                </div>\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 80 }} variant=\"body2\">CLIENTE: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.nombre}</Typography>\r\n                </div>\r\n                {(data.Documento || data.identificacion) && <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 80 }} variant=\"body2\">{data.Documento || \"C.I. / RUC\"}: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.identificacion}</Typography>\r\n                </div>}\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 80 }} variant=\"body2\">TLF: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.telefono}</Typography>\r\n                </div>\r\n                <div>\r\n                    <Typography style={{ display: \"inline-block\", width: 80 }} variant=\"body2\">DIRECCION: </Typography>\r\n                    <Typography style={{ display: \"inline-block\" }} variant=\"body1\">{data.direccion}</Typography>\r\n                </div>\r\n                <Divider style={{ marginTop: 10 }} />\r\n\r\n                <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Typography style={{ flex: 1, marginRight: 10 }} variant=\"h6\">PRODUCTO</Typography>\r\n                    <Typography style={{ width: 60, marginRight: 10 }} variant=\"h6\">CANT</Typography>\r\n                    <Typography style={{ width: 70, textAlign: \"right\" }} variant=\"h6\">TOTAL</Typography>\r\n                </div>\r\n\r\n                {data.detalle.map((item, index) => <RowDet {...item} key={index} />)}\r\n\r\n                <div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginTop: 10 }}>\r\n                    <Typography variant=\"h6\" style={{ flex: 1, marginRight: 10 }} >Filas: {data.detalle.length}</Typography>\r\n                    <Typography style={{ marginRight: 10, width: 60 }} variant=\"h6\">{TOTALES.cantidad.round(4)}</Typography>\r\n                    <Typography style={{ width: 70, textAlign: \"right\" }} variant=\"h6\">$ {TOTALES.total.toFixed(2)}</Typography>\r\n                </div>\r\n\r\n                <Divider style={{ marginTop: 10 }} />\r\n                <Typography>PAGO : {data.FormaPago}</Typography>\r\n                <Typography>NOTAS: {data.nota}</Typography>\r\n\r\n                {facturaConDatos && <div>\r\n                    <Divider style={{ marginTop: 10 }} />\r\n                    <Typography style={{ textAlign: \"center\", width: \"100%\" }} variant=\"h6\">DATOS DE FACTURACIÓN</Typography>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                        <Typography variant=\"body2\">{data.Documento_factura}:</Typography>\r\n                        <Typography variant=\"body2\" style={{ flex: 1, marginLeft: 10 }}>{data.identificacion_factura}</Typography>\r\n                    </div>\r\n                    <DatosFacturaItem title=\"Razon Social\" icon={BusinessOutlined} text={data.razonsocial_factura} />\r\n                    <DatosFacturaItem title=\"Telefono\" icon={PhoneOutlined} text={data.telefono_factura} />\r\n                    <DatosFacturaItem title=\"Dirección\" icon={LocationOnOutlined} text={data.direccion_factura} />\r\n                </div>}\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"outlined\" color=\"secondary\" onClick={this.close}>SALIR</Button>\r\n            </DialogActions>\r\n        </Dialog>)\r\n    }\r\n}\r\n\r\nfunction RowDet(props) {\r\n    var neto = props.pvp * props.cantidad;\r\n    var iva = props.pagaIva ? ((neto * 12) / 100) : 0;\r\n    return (<div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\" }}>\r\n        <div style={{ flex: 1, marginRight: 10 }}>\r\n            <Typography variant=\"subtitle2\">{props.descripcion}</Typography>\r\n            <Typography variant=\"body1\">{props.nota}</Typography>\r\n        </div>\r\n        <Typography style={{ marginRight: 10, width: 60 }} variant=\"subtitle2\">{props.cantidad.round(4)}</Typography>\r\n        <Typography style={{ width: 70, textAlign: \"right\" }} variant=\"subtitle2\">$ {(neto + iva).round(2)}</Typography>\r\n    </div>)\r\n}\r\n\r\nfunction DatosFacturaItem(props) {\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"row\" }} title={props.title}>\r\n            <props.icon />\r\n            <Typography style={{ padding: 3, flex: 1 }}>{props.text}</Typography>\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TableRow, TableCell, TableBody, Checkbox, Typography } from \"@material-ui/core\";\r\nimport { Check } from \"@material-ui/icons\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport { Route, withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        if (props.onMounted) props.onMounted(null, props.estado);\r\n    }\r\n    handleClick(event) {\r\n        event.stopPropagation();\r\n\r\n        const { id } = event.currentTarget;\r\n        // agregar un MODAL\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    render() {\r\n        const { data, onSelect, estado, now, timeCol } = this.props;\r\n        const rows = data.filter(x => x.estado === estado);\r\n        return (<Table component=\"div\" style={{ display: \"flex\", flexDirection: \"column\", height: \"calc(100% - 100px)\" }}>\r\n            <TableHead component=\"div\" style={{ display: \"block\" }}>\r\n                <TableRow component=\"div\" style={{ width: \"20%\" }}>\r\n                    <TableCell component=\"div\" style={{ textAlign: \"center\" }}>\r\n                        <Check />\r\n                    </TableCell>\r\n                    <TableCell component=\"div\" style={{ width: \"20%\" }}>\r\n                        <Typography variant=\"button\">#</Typography>\r\n                    </TableCell>\r\n                    <TableCell component=\"div\" style={{ width: \"60%\" }}>\r\n                        <Typography variant=\"button\">Cliente</Typography>\r\n                    </TableCell>\r\n                    <TableCell component=\"div\" style={{ width: \"20%\" }}>\r\n                        <Typography variant=\"button\">Hora</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            </TableHead>\r\n            <TableBody component=\"div\" style={{ flex: 1, overflow: \"auto\", display: \"block\" }}>\r\n                {rows.map(x => <Row\r\n                    onClick={this.handleClick}\r\n                    onCheck={onSelect}\r\n                    timeCol={timeCol}\r\n                    key={x.id}\r\n                    {...x}\r\n                    now={now}\r\n                />)}\r\n            </TableBody>\r\n            <Route component={OrderDetails} path={`${this.props.match.path}/:id`} />\r\n\r\n        </Table>);\r\n    }\r\n});\r\n\r\n\r\nclass Row extends React.PureComponent {\r\n    render() {\r\n        const { props } = this;\r\n        return (<TableRow\r\n            tabIndex={0}\r\n            style={{ width: \"100%\", cursor: \"pointer\" }}\r\n            onContextMenu={props.onContextMenu}\r\n            selected={props.selected}\r\n            hover\r\n            id={\"\" + props.id}\r\n            onClick={props.onClick}\r\n            component={\"div\"}\r\n        >\r\n            <TableCell component=\"div\" padding=\"checkbox\" style={{ width: \"20%\" }}>\r\n                {props.timeCol === \"deliveredAt\"\r\n                    ? <Check />\r\n                    : <Checkbox checked={props.selected || false}\r\n                        value={\"\" + props.id}\r\n                        onClick={props.onCheck} />\r\n                }\r\n            </TableCell>\r\n            <TableCell style={{ width: \"20%\" }} component=\"div\" scope=\"row\" >{props.numero}</TableCell>\r\n            <TableCell style={{ width: \"60%\" }} component=\"div\">{props.nombre}</TableCell>\r\n            <TableCell style={{ width: \"20%\" }} component=\"div\" title={new Date(props[props.timeCol]).toLocaleString()}>\r\n                {RenderTimeCol(new Date(props[props.timeCol]))}\r\n            </TableCell>\r\n        </TableRow >);\r\n    }\r\n}\r\nfunction RenderTimeCol(value) {\r\n    var day = DayOfYear(value);\r\n    var today = DayOfYear(new Date());\r\n    if (day === today)\r\n        return value.toLocaleTimeString();\r\n    if ((day + 1) === today)\r\n        return \"Ayer \" + value.toLocaleTimeString();\r\n    if (today > day && (today - day) < 6) {\r\n        return \"Hace \" + (today - day) + \" dias \" + value.toLocaleTimeString();\r\n    }\r\n    return value.toLocaleString();\r\n}\r\nfunction DayOfYear(date) {\r\n    var start = new Date(date.getFullYear(), 0, 0);\r\n    var diff = date - start;\r\n    var oneDay = 1000 * 60 * 60 * 24;\r\n    return Math.floor(diff / oneDay);\r\n}","import React from \"react\";\r\nimport { CircularProgress, Typography, Button, Tabs, Tab } from \"@material-ui/core\";\r\nimport { Error } from \"@material-ui/icons\";\r\nimport { withGoogleMap, GoogleMap, withScriptjs } from \"react-google-maps\";\r\nimport { MarkerWithLabel } from \"react-google-maps/lib/components/addons/MarkerWithLabel\";\r\nimport API from \"../Services/API\";\r\nimport OrdersTable from \"./OrdersTable\";\r\nimport { Route, Link, Switch, Redirect } from \"react-router-dom\";\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        now: new Date().valueOf(),\r\n        data: [],\r\n        loading: true,\r\n        goToCenter: null,\r\n        navigationValue: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.stepID);\r\n        this.handleRightClick = this.handleRightClick.bind(this);\r\n        this.handleSelect = this.handleSelect.bind(this);\r\n        this.handleCurrentLocation = this.handleCurrentLocation.bind(this);\r\n        this.handleNavigation = this.handleNavigation.bind(this);\r\n        this.handleChangeState = this.handleChangeState.bind(this);\r\n        this.__updateRecords = this.__updateRecords.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        // por segundo hasta llegar al minuto\r\n        /*this.STOP_TIMER = setMinuteTimer(() => {\r\n            this.setState({ now: new Date().valueOf() })\r\n        });*/\r\n        API.GetOrders()\r\n            .then(data => {\r\n                this.setState({ data, loading: false });\r\n                this.REMOVE_LISTENER = API.ListenOnOrderChange(this.__updateRecords);\r\n            }).catch(error => this.setState({ error, loading: false }));\r\n    }\r\n    componentWillUnmount() {\r\n        this.STOP_TIMER && this.STOP_TIMER();\r\n        this.REMOVE_LISTENER && this.REMOVE_LISTENER();\r\n    }\r\n    handleRightClick(item) {\r\n\r\n    }\r\n    handleSelect(event) {\r\n        event.stopPropagation();\r\n        const { value, checked } = event.target;\r\n        this.setState(function (prev) {\r\n            const state = { ...prev };\r\n            state.data = prev.data;\r\n            const item = state.data.find(x => x.id === +value);\r\n            if (!item) return state;\r\n            item.selected = checked;\r\n            if (item.selected) {\r\n                state.goToCenter = { lat: +item.lat, lng: +item.lng };\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    handleCurrentLocation() {\r\n        this.setState({\r\n            goToCenter: this.props.store.position\r\n        });\r\n    }\r\n    handleNavigation(event, navigationValue) {\r\n        this.setState({ navigationValue });\r\n    }\r\n    handleChangeState() {\r\n        const { data, navigationValue } = this.state;\r\n        const selections = data.filter(x => x.selected && x.estado === navigationValue);\r\n        if (!selections.length) return alert(\"Seleccione al menos un registro\");\r\n        const IDS = selections.map(x => x.id);\r\n        this.setState({ loading: true });\r\n        if (navigationValue === 0) {\r\n            return API.OrdersOnRoute(IDS)\r\n                .then(this.__updateRecords)\r\n                .catch(error => this.setState({ error, loading: false }));\r\n        }\r\n        if (navigationValue === 1) {\r\n            return API.OrdersDelivered(IDS)\r\n                .then(this.__updateRecords)\r\n                .catch(error => this.setState({ error, loading: false }));\r\n        }\r\n        this.setState({ loading: false });\r\n        alert(\"No se encontro el navigationValue=\" + navigationValue);\r\n    }\r\n    __updateRecords(results, addIfNotExists) {\r\n        this.setState(prev => {\r\n            const state = { ...prev, loading: false };\r\n            state.data = prev.data;\r\n            results.forEach(res => {\r\n                const item = state.data.find(x => x.id === res.id);\r\n                if (item) {\r\n                    return state.data[state.data.indexOf(item)] = { ...item, selected: false, ...res };\r\n                }\r\n                if (!item && addIfNotExists) state.data.push(res);\r\n            });\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { now, loading, error, data, goToCenter, navigationValue } = this.state;\r\n\r\n        if (loading) {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", margin: \"auto\", paddingTop: 100 }}>\r\n                <CircularProgress size={70} />\r\n                <Typography variant=\"h4\" >CARGANDO...</Typography>\r\n            </div>);\r\n        }\r\n        if (error) {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", margin: \"auto\", paddingTop: 100 }}>\r\n                <Error size={70} />\r\n                <Typography variant=\"h4\">Ocurrió un error</Typography>\r\n                <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                <Typography variant=\"body1\">{error.status} | {error.statusText} | {error.code}</Typography>\r\n            </div>)\r\n        }\r\n\r\n        const G_M_K = (this.props.store && this.props.store.G_M_K) || \"\";\r\n        const selections = data.filter(x => x.selected && x.estado === navigationValue);\r\n\r\n        return (<div style={{ display: \"flex\", flexDirection: \"row\", height: \"100%\" }}>\r\n            <div style={{ flex: 1, overflow: \"auto\", height: \"100%\" }}>\r\n                <Tabs textColor=\"primary\" indicatorColor=\"primary\" style={{ width: \"100%\" }} color=\"primary\" value={navigationValue} onChange={this.handleNavigation}>\r\n                    <Tab style={{ width: \"32%\" }} label=\"Pendientes\" component={Link} to={this.props.match.path + \"/0\"} />\r\n                    <Tab style={{ width: \"32%\" }} label=\"En Ruta\" component={Link} to={this.props.match.path + \"/1\"} />\r\n                    <Tab style={{ width: \"32%\" }} label=\"Entregado\" component={Link} to={this.props.match.path + \"/2\"} />\r\n                </Tabs>\r\n                <Switch>\r\n                    <Route path={this.props.match.path + \"/0\"} render={props =>\r\n                        (<OrdersTable\r\n                            onMounted={this.handleNavigation}\r\n                            {...props}\r\n                            data={data}\r\n                            timeCol={\"createdAt\"}\r\n                            selections={selections}\r\n                            onSelect={this.handleSelect}\r\n                            now={now}\r\n                            estado={0}\r\n                        />)} />\r\n                    <Route path={this.props.match.path + \"/1\"} render={props =>\r\n                        (<OrdersTable\r\n                            onMounted={this.handleNavigation}\r\n                            {...props}\r\n                            data={data}\r\n                            timeCol={\"onRouteAt\"}\r\n                            selections={selections}\r\n                            onSelect={this.handleSelect}\r\n                            estado={1}\r\n                        />)} />\r\n                    <Route path={this.props.match.path + \"/2\"} render={props =>\r\n                        (<OrdersTable\r\n                            onMounted={this.handleNavigation}\r\n                            {...props}\r\n                            data={data}\r\n                            timeCol={\"deliveredAt\"}\r\n                            selections={selections}\r\n                            onSelect={this.handleSelect}\r\n                            estado={2}\r\n                        />)} />\r\n                    <Redirect path={this.props.match.path} to={this.props.match.path + \"/0\"} />\r\n                </Switch>\r\n                {navigationValue === 2\r\n                    ? null\r\n                    : (<div style={{ display: \"flex\", flexDirection: \"row\", paddingLeft: 10, paddingRight: 10 }}>\r\n                        <Button disabled={!selections.length} style={{ flex: 1 }} variant=\"outlined\" color=\"primary\" onClick={this.handleChangeState}>{submitText(navigationValue)}</Button>\r\n                        <Button\r\n                            variant=\"outlined\"\r\n                            style={{ marginLeft: 10 }}\r\n                            color=\"secondary\"\r\n                            disabled={!selections.length}\r\n                            target=\"_blank\"\r\n                            href={ruta(this.props.store.position, selections || [])}\r\n                            component=\"a\"\r\n                        >Ruta</Button>\r\n                    </div>)}\r\n            </div>\r\n            <div style={{ flex: 1, overflow: \"auto\", height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n                <div style={{ flex: 1 }}>\r\n                    <Map\r\n                        googleMapURL={`https://maps.googleapis.com/maps/api/js?key=${G_M_K || \"\"}&v=3.exp&libraries=geometry,drawing,places`}\r\n                        containerElement={<div style={{ height: \"100%\" }} />}\r\n                        loadingElement={<div style={{ height: `100%` }} />}\r\n                        mapElement={<div style={{ height: `100%` }} />}\r\n                        selections={selections}\r\n                        store={this.props.store}\r\n                        center={goToCenter || this.props.store.position}\r\n                    >\r\n                    </Map>\r\n                </div>\r\n            </div>\r\n        </div>)\r\n    }\r\n}\r\n\r\nfunction ruta(currentLocation, locations) {\r\n    const rutas = [currentLocation];\r\n    for (let i = 0; i < locations.length; i++) {\r\n        rutas.push(locations[i]);\r\n    }\r\n    if (rutas.length === 1) return \"\";\r\n    return \"https://www.google.com/maps/dir/ \" +\r\n        rutas.map(x => [x.lat, x.lng].join(\",\")).join(\"/\");\r\n}\r\n\r\n/*function setMinuteTimer(Callback) {\r\n    var interval_mins;\r\n    var interval_secs;\r\n    interval_secs = setInterval(() => {\r\n        const secs = new Date().getSeconds();\r\n        if (secs === 0) {\r\n            clearInterval(interval_secs);\r\n            setMinutes();\r\n        }\r\n    }, 1000);\r\n    function setMinutes() {\r\n        interval_mins = setInterval(() => Callback()\r\n            , 1000 * 60);\r\n    }\r\n    return function stop() {\r\n        if (interval_secs !== undefined)\r\n            clearInterval(interval_secs);\r\n        if (interval_mins !== undefined)\r\n            clearInterval(interval_mins);\r\n    }\r\n}\r\n*/\r\nconst Map = withScriptjs(withGoogleMap(props => {\r\n    return (<GoogleMap\r\n        {...props}\r\n        defaultCenter={props.store.position}\r\n        defaultZoom={15}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n    >\r\n        <MarkerWithLabel\r\n            labelAnchor={new window.google.maps.Point(0, 0)}\r\n            position={props.store.position}\r\n            options={{\r\n                icon: \"./store.png\"\r\n            }}\r\n            labelStyle={{ background: \"#fff\", border: \"1px solid #29b6f6\", padding: \"2px 10px\" }}\r\n        >\r\n            <Typography variant=\"body1\" color=\"inherit\">{props.store.titulo.toUpperCase()}</Typography>\r\n        </MarkerWithLabel>\r\n        {props.selections && props.selections.map(x => (<MarkerWithLabel\r\n            key={x.id}\r\n            labelAnchor={new window.google.maps.Point(0, 0)}\r\n            position={{ lat: +x.lat, lng: +x.lng }}\r\n            labelStyle={{ background: \"#fff\", border: \"1px solid grey\", padding: \"2px 10px\" }}\r\n\r\n        >\r\n            <Typography variant=\"button\">{x.nombre}</Typography>\r\n        </MarkerWithLabel>))}\r\n    </GoogleMap>)\r\n}));\r\n\r\nfunction submitText(step) {\r\n    if (step === 0) return \"ENVIAR\";\r\n    if (step === 1) return \"ENTREGADO\";\r\n    return step;\r\n}","import React from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport { Typography, Paper } from \"@material-ui/core\";\nimport { Inbox/*, Category, Layers, Assessment*/ } from \"@material-ui/icons\";\nimport AppBar from \"./Layouts/AppBar\";\nimport AppMenu from \"./Layouts/AppMenu\";\nimport Orders from \"./Components/Orders\";\nimport API from \"./Services/API\";\n\nconst STEPS = [\n  { id: \"orders\", title: \"Pedidos\", Icon: Inbox }/*,\n  { id: \"products\", title: \"Productos\", Icon: Category },\n  { id: \"fees\", title: \"Tarifas\", Icon: Layers },\n  { id: \"reports\", title: \"Reportes\", Icon: Assessment, addDividerBefore: true }*/\n];\nexport default class extends React.Component {\n  state = {\n    current_step: \"\"\n  }\n  constructor(props) {\n    super(props);\n    this.handleMounted = this.handleMounted.bind(this);\n    API.storeID = props.store.nombre;\n    API.START_LISTENING();\n  }\n  componentDidMount() {\n    if (!window.Notification) {\n      console.log('Browser does not support notifications.');\n    } else {\n      // check if permission is already granted\n      if (Notification.permission === 'granted') {\n        this.REMOVE_LISTENER = this.__setListener();\n      } else {\n        // request permission from user\n        Notification.requestPermission().then(function (p) {\n          if (p === 'granted') {\n            this.REMOVE_LISTENER = this.__setListener();\n          } else {\n            console.log('User blocked notifications.');\n          }\n        }).catch(function (err) {\n          console.error(err);\n        });\n      }\n    }\n  }\n  componentWillUnmount() {\n    this.REMOVE_LISTENER && this.REMOVE_LISTENER();\n  }\n  __setListener() {\n    API.ListenOnOrderChange(([x]) => {\n      let N;\n      if (x.estado === 0)\n        N = new Notification(\"NUEVO PEDIDO\", {\n          body: x.nombre + \" - Orden #\" + x.numero,\n          icon: \"./favicon.ico\"\n        });\n      if (x.estado === 1)\n        N = new Notification(\"LA ORDEN #\" + x.numero + \" ESTÁ EN RUTA\", {\n          body: x.nombre + \" - Orden #\" + x.numero,\n          icon: \"./favicon.ico\"\n        });\n      if (x.estado === 2)\n        N = new Notification(\"LA ORDEN #\" + x.numero + \" FUE ENTREGADA\", {\n          body: x.nombre + \" - Orden #\" + x.numero,\n          icon: \"./favicon.ico\"\n        });\n      if (x.estado === 3) {\n        N = new Notification(\"LA ORDEN #\" + x.numero + \" FUE CANCELADA\", {\n          body: x.nombre + \" - Orden #\" + x.numero,\n          icon: \"./favicon.ico\"\n        });\n        N = null;\n      }\n      if (N) N.onclick = () => {\n        window.focus();\n        window.location.href = \"#/orders/\" + x.estado + \"/\" + x.id;\n      }\n    });\n  }\n  handleMounted(current_step) {\n    this.setState({ current_step });\n  }\n  render() {\n    const { current_step } = this.state;\n    const { title } = current_step && STEPS.find(x => x.id === current_step);\n    return (<HashRouter>\n      <Paper style={{ height: \"100vh\", width: \"100%\" }}>\n        <AppBar user={this.props.user} store={this.props.store} title={title} onLogOut={this.props.onLogOut} />\n        <AppMenu STEPS={STEPS} current_step={current_step} />\n        <div style={{ height: \"calc(100% - 60px)\", width: \"calc(100% - 205px)\", paddingLeft: 205, paddingTop: 60, overflow: \"hidden\" }}>\n          <Switch>\n\n            <Route path=\"/orders\" render={props => (<Orders\n              {...props}\n              store={this.props.store}\n              onMounted={this.handleMounted}\n              stepID={\"orders\"}\n            />)} />\n\n            <Route exact path=\"/\" >\n              <div style={{ paddingTop: 20, width: \"100%\", textAlign: \"center\" }}>\n                <Typography variant=\"h4\">BIENVENIDO!</Typography>\n                <Typography variant=\"subtitle2\">RunFood - Take Orders ADMIN</Typography>\n              </div>\n            </Route>\n          </Switch>\n        </div>\n      </Paper>\n    </HashRouter>)\n  }\n}","import React from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    TextField,\r\n    Typography,\r\n    InputAdornment,\r\n    Button,\r\n    CircularProgress,\r\n    IconButton\r\n} from \"@material-ui/core\";\r\nimport { AccountCircle, Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport API from \"./Services/API\";\r\n\r\nconst styles = {\r\n    control: {\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n}\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        user: \"\",\r\n        pdw: \"\",\r\n        showPassword: false,\r\n        loading: false,\r\n        store: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleTogglePassword = this.handleTogglePassword.bind(this);\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { loading, user, pwd } = this.state;\r\n        if (loading) return;\r\n        if (!user) return this.setState({ error: { message: \"Digite el usuario\" } });\r\n        if (!pwd) return this.setState({ error: { message: \"Digite la contraseña\" } });\r\n        this.setState({ loading: true });\r\n        API.LogIn({\r\n            user: user,\r\n            pwd: pwd,\r\n            withStoresInfo: true\r\n        }).then(userInfo =>\r\n            this.props.onLogged({\r\n                user,\r\n                token: userInfo.token,\r\n                store: userInfo.store\r\n            })\r\n        ).catch(error => this.setState({ error, loading: false }));\r\n    }\r\n    handleTogglePassword() {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.showPassword = !state.showPassword;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { showPassword, loading, error, user, pwd } = this.state;\r\n        return (<div style={{ padding: 40, overflow: \"auto\" }}>\r\n            <Card style={{ width: 400, margin: \"auto\" }}>\r\n                <CardContent style={{ padding: 0 }}><form onSubmit={this.handleSubmit} style={{ padding: 20 }}>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h5\">INICIO DE SESION</Typography>\r\n                    <TextField\r\n                        disabled={loading}\r\n                        required\r\n                        style={{ ...styles.control }}\r\n                        fullWidth\r\n                        label=\"USUARIO\"\r\n                        value={user || \"\"}\r\n                        name={\"user\"}\r\n                        onChange={this.handleChange}\r\n                        type=\"email\"\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <AccountCircle />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        fullWidth\r\n                        style={{ ...styles.control }}\r\n                        value={pwd || \"\"}\r\n                        label=\"CONTRASEÑA\"\r\n                        name={\"pwd\"}\r\n                        onChange={this.handleChange}\r\n                        type={showPassword ? \"text\" : \"password\"}\r\n                        InputProps={{\r\n                            endAdornment: (\r\n                                <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handleTogglePassword}>\r\n                                        {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    {error && <div style={{ width: \"100%\" }}>\r\n                        <Typography color=\"secondary\" variant=\"body2\">{error.message} {error.code && error.code}</Typography>\r\n                        <Typography color=\"secondary\" variant=\"body1\">{error.status} | {error.statusText}</Typography>\r\n                    </div>}\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth style={{ ...styles.control }}\r\n                        variant=\"outlined\"\r\n                        disabled={loading}\r\n                        color=\"primary\"\r\n                    >\r\n                        {loading ? <CircularProgress size={20} color=\"inherit\" /> : \"ENTRAR\"}\r\n                    </Button>\r\n                </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div >)\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * \r\n    handleStore(event) {\r\n        const { id } = event.currentTarget;\r\n        const store = this.state.stores[+id];\r\n        this.setState({ store });\r\n        this.props.onLogged({\r\n            user: this.state.user,\r\n            token: this.state.token,\r\n            store\r\n        });\r\n    }\r\n                    {stores\r\n                        ? (<div>\r\n                            <Typography variant=\"h5\" style={{ margin: 10, textAlign: \"center\" }}>SELECCIONA LA TIENDA</Typography>\r\n                            <List style={{ ...styles.control, padding: 0 }}>\r\n                                {stores.map((x, index) => (\r\n                                    <ListItem\r\n                                        style={{ padding: 10 }}\r\n                                        button\r\n                                        onClick={this.handleStore}\r\n                                        key={index}\r\n                                        id={index}\r\n                                        disabled={Boolean(store)}>\r\n                                        <ListItemText>{x.titulo}</ListItemText>\r\n                                        <ListItemIcon><img alt={x.titulo} style={{ maxWidth: 100, maxHeight: 100 }} src={x.logoSrc}></img></ListItemIcon>\r\n                                    </ListItem>))}\r\n                            </List>\r\n                        </div>)\r\n                        : (\r\n                            )\r\n                    }\r\n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Login from './Login';\nimport API, { viewLoginData, storeLoginData } from \"./Services/API\";\n\nfunction LaunchApp(data) {\n    // uso viewLoginData porque pone por default la position en quito\n    // en caso de que position sea NULL\n    if (!data) data = viewLoginData();\n    ReactDOM.render(<App user={data.user} store={data.store} onLogOut={LoggedOut} />, document.getElementById('app'));\n}\nfunction LaunchLogin() {\n    ReactDOM.render(<Login onLogged={Logged} />, document.getElementById('app'));\n}\nfunction Logged(data) {\n    storeLoginData(data);\n    LaunchApp();\n}\nfunction LoggedOut() {\n    API.STOP_LISTENING();\n    storeLoginData();\n    LaunchLogin();\n}\n//LaunchLogin();\n\nviewLoginData()\n    ? LaunchApp()\n    : LaunchLogin();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();"],"sourceRoot":""}
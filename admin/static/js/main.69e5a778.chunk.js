(this["webpackJsonpadmin-store"]=this["webpackJsonpadmin-store"]||[]).push([[0],{267:function(e,t,a){e.exports=a(505)},306:function(e,t){},505:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),i=a.n(o),l=a(11),c=a(12),s=a(7),d=a(18),u=a(17),h=a(19),m=a(79),p=a(23),g=a(5),f=a(171),v=a(71),b=a(598),E=a(599),y=a(600),O=a(541),C=a(545),k=a(603),S=a(506),j=a(257),I=a(548),T=a(546),w=a(250),A=a.n(w),P=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={menuEl:null},n.handleMenu=n.handleMenu.bind(Object(s.a)(n)),n.handleClose=n.handleClose.bind(Object(s.a)(n)),n.handleLogOut=n.handleLogOut.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"handleMenu",value:function(e){this.setState({menuEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({menuEl:null})}},{key:"handleLogOut",value:function(){window.confirm("Est\xe1 seguro de cerrar sesi\xf3n?")&&this.props.onLogOut(),this.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.store,n=e.user,o=e.onMenuClick,i=this.state.menuEl,l=Boolean(i);return r.a.createElement(O.a,{position:"fixed",style:{zIndex:1201}},r.a.createElement(C.a,{style:{display:"flex",flexDirection:"row"}},r.a.createElement(k.a,{smUp:!0,implementation:"css"},r.a.createElement(S.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:o},r.a.createElement(A.a,null))),r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(k.a,{xsDown:!0,implementation:"css"},r.a.createElement(v.a,{style:{textTransform:"uppercase"},variant:"h4",color:"inherit"},t||"")),r.a.createElement(k.a,{smUp:!0,implementation:"css"},r.a.createElement(v.a,{style:{textTransform:"uppercase"},variant:"h6",color:"inherit"},t||""))),r.a.createElement(k.a,{smDown:!0,implementation:"css"},r.a.createElement("div",{style:{display:"block",textAlign:"right"}},r.a.createElement(v.a,{style:{display:"block"},color:"inherit",variant:"button"},(a.titulo||"").toUpperCase()),r.a.createElement(v.a,{style:{display:"block"},color:"inherit",variant:"caption"},n))),r.a.createElement("div",null,r.a.createElement(S.a,{title:a.titulo,"aria-owns":l?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},r.a.createElement(T.a,null)),r.a.createElement(j.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:this.handleClose},r.a.createElement(I.a,{style:{minWidth:150},onClick:this.handleLogOut},"Salir")))))}}]),a}(r.a.PureComponent),x=a(547),D=a(549),N=a(507),R=a(550),M=a(551),G=a(608),U=a(552),L=function(e){var t=e.STEPS,a=e.current_step,n=e.classes,o=e.window,i=e.onCloseMenu,l=e.isMenuOpen,c=void 0!==o?function(){return o().document.body}:void 0,s=r.a.createElement(x.a,null,t.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e.addDividerBefore&&r.a.createElement(D.a,null),r.a.createElement(N.a,{component:m.b,to:"/"+e.id,selected:e.id===a,button:!0},r.a.createElement(R.a,null,e.title),r.a.createElement(M.a,null,r.a.createElement(e.Icon,null))))})));return r.a.createElement("nav",{className:n.drawer},r.a.createElement(k.a,{smUp:!0,implementation:"css"},r.a.createElement(G.a,{container:c,variant:"temporary",anchor:"left",open:l,onClose:i,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement("div",{className:n.toolbar,style:{textAlign:"right"}},r.a.createElement(S.a,{onClick:i},r.a.createElement(U.a,null))),s)),r.a.createElement(k.a,{xsDown:!0,implementation:"css"},r.a.createElement(G.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},r.a.createElement("div",{className:n.toolbar}),s)))},_=a(554),B=a(564),z=a(6),F=a(21),W=a(51),V=a(553),J=a(558),H=a(605),q=a(561),K=a(555),Y=a(556),$=a(557),Q=a(562),Z=a(251),X=a.n(Z),ee=a(86);var te=a(252),ae={id:null,intervalId:null},ne=function(e){return function(e){return function(t){return"NEW_ORDER"===t.type&&(ae.intervalId&&clearInterval(ae.intervalId),Object(te.a)("alertInterval"),ae={intervalId:setInterval((function(){return document.getElementById("order-alert").play()}),1e3),id:t.payload.id}),"ORDER_OPENED"===t.type&&ae&&ae&&clearInterval(ae.intervalId),e(t)}}},re=Object(ee.d)(Object(ee.c)({store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{porcentajeIVA:12},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TIENDA":return Object(z.a)({},t.payload);case"SET_POSITION":return Object(z.a)(Object(z.a)({},e),{},{position:t.payload});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDERS":return Object(F.a)(t.payload);case"ADD_ORDER":return[].concat(Object(F.a)(e),[t.payload]);case"ORDERS_CHANGED":for(var a=function(a){var n=t.payload[a],r=e.find((function(e){return e.id===n.id}));if(r)return e[e.indexOf(r)]=Object(z.a)(Object(z.a)({},r),n),"continue";r||e.push(n)},n=0;n<t.payload.length;n++)a(n);default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order_status:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDER_STATUS":return Object(z.a)(Object(z.a)({},e),{},{order_status:t.payload});default:return e}}}),Object(ee.a)(ne));function oe(e){return{type:"ORDERS_CHANGED",payload:e}}function ie(e){if("granted"===Notification.permission){var t="LA ORDEN #"+e.numero;0===e.estado&&(t="NUEVO PEDIDO"),1===e.estado&&(t+=" EST\xc1 EN RUTA"),2===e.estado&&(t+=" FUE ENTREGADA"),3===e.estado&&(t+="FUE CANCELADA"),navigator.serviceWorker.ready.then((function(a){a.showNotification(t,{body:e.nombre+(0===e.estado?" Acaba de realizar un pedido":" - Click para ver el pedido"),icon:"./favicon.ico",data:e.id})}))}}var le,ce="development"===window.PROJECT_ENV?"http://localhost:10000":"https://www.orders.runfoodapp.com",se={lat:-.180653,lng:-78.467834},de=(new Date).toString()+":"+Math.floor(1e5+9e5*Math.random());function ue(e){e?window.localStorage.setItem("__",JSON.stringify(e)):window.localStorage.removeItem("__")}function he(){var e=window.localStorage.getItem("__");if(e)return(e=JSON.parse(e)).position||(e.position=se),e}function me(){var e=he();if(!e)throw window.location.reload(),{message:"Necesitas iniciar sesi\xf3n para entrar aqu\xed."};return e.token+"+"+de}function pe(e,t){var a={method:"GET",cache:"reload",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};if(t&&t.headers){for(var n in t.headers)a.headers[n]=t.headers[n];delete t.headers}return fetch(e,Object(z.a)(Object(z.a)({},a),t)).then((function(e){return e.ok?e.json():e.clone().json().catch((function(){return e.text().then((function(t){throw{message:t,status:e.status,statusText:e.statusText}}))})).then((function(t){throw Object(z.a)(Object(z.a)({},t),{},{status:e.status,statusText:e.statusText})}))})).catch((function(e){if("Failed to fetch"===e.message)throw{message:"Este servicio no se encuentra disponible por el momento. Intentelo m\xe1s tarde.",status:0};throw e.message||(e.message=e.statusText),e}))}var ge=new(function(){function e(){Object(l.a)(this,e),this.storeID=void 0}return Object(c.a)(e,[{key:"setStoreId",value:function(e){this.storeID=e}},{key:"LogIn",value:function(e){return pe("".concat(ce,"/login"),{body:JSON.stringify(e),method:"POST"}).catch((function(e){if(400===e.status)throw Object(z.a)(Object(z.a)({},e),{},{message:"Usuario o contrase\xf1a incorrectos."});if(401===e.status)throw Object(z.a)({},e);if(401===e.status)throw Object(z.a)({},e);throw e}))}},{key:"GetOrders",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/order?").concat(new URLSearchParams(e).toString()),{headers:{Authorization:"Basic "+btoa(me())}})}},{key:"GetOrder",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/order/").concat(e),{headers:{Authorization:"Basic "+btoa(me())}})}},{key:"OrdersOnRoute",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/order-actions/ON-ROUTE"),{method:"POST",body:JSON.stringify({orders:e}),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"OrdersDelivered",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/order-actions/DELIVERED"),{method:"POST",body:JSON.stringify({orders:e}),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"GetGroups",value:function(){return pe("".concat(ce,"/data/").concat(this.storeID,"/group?admin_info=true"),{headers:{Authorization:"Basic "+btoa(me())}})}},{key:"SaveGroup",value:function(e){var t=e.id;return pe("".concat(ce,"/data/").concat(this.storeID,"/group").concat(t?"/".concat(t):""),{method:t?"PUT":"POST",body:JSON.stringify(e),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"RequestActionGroup",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/group/").concat(e.id),{method:"PATCH",body:JSON.stringify(e),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"DeleteGroup",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/group/").concat(e.id),{method:"DELETE",body:JSON.stringify(e),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"GetProduct",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/product/").concat(e,"?admin_info=true"),{headers:{Authorization:"Basic "+btoa(me())}})}},{key:"SaveProduct",value:function(e){var t=e.id&&"NUEVO"!==e.id&&e.id;return pe("".concat(ce,"/data/").concat(this.storeID,"/product").concat(t?"/".concat(t):""),{method:t?"PUT":"POST",body:JSON.stringify(e),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"RequestActionProduct",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/product/").concat(e.id),{method:"PATCH",body:JSON.stringify(e),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"DeleteProduct",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/product/").concat(e.id),{method:"DELETE",body:JSON.stringify(e),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"GetParamContactos",value:function(){return pe("".concat(ce,"/data/").concat(this.storeID,"/config?items=contactos"),{headers:{Authorization:"Basic "+btoa(me())}})}},{key:"GetConfigInfo",value:function(){return pe("".concat(ce,"/data/").concat(this.storeID,"/config"),{headers:{Authorization:"Basic "+btoa(me())}})}},{key:"setConfigInfo",value:function(e){return pe("".concat(ce,"/data/").concat(this.storeID,"/config"),{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Basic "+btoa(me())}})}},{key:"START_LISTENING",value:function(){le=X()(ce,{query:{token:btoa(me())},reconnection:!0,transports:["polling"]}),console.info("SOCKET CONNECTED"),le.on("ORDERS_CHANGED",(function(e){var t=e.payload;if(e.origin!==btoa(me())){re.dispatch(oe(t));try{for(var a=0;a<t.length;a++){ie(t[a])}}catch(n){console.error("Notification error",n)}}}))}},{key:"STOP_LISTENING",value:function(){le&&le.disconnect(),console.info("SOCKET DISCONNECTED")}}]),e}());function fe(e){var t="ORDEN *#".concat(e.numero,"*\n")+"CLIENTE: *".concat((e.nombre||"").trim(),"*\n")+(e.identificacion?"CI/RUC: *".concat((e.identificacion||"").trim(),"*\n"):"")+"TELEFONO: *".concat((e.telefono||"").trim(),"*\n")+"\nPRODUCTOS:\n"+e.detalle.map((function(e){return"```"+function(e,t){var a=e.toString();if(a.length===t)return a;if(a.length>=t)return a.substr(0,t);for(var n=t-a.length,r=0;r<n;r++)a+=" ";return a}(e.cantidad)+" "+(e.descripcion||"").trim()+"```"})).join("\n")+"\n\n"+(e.nota&&"NOTAS: *"+e.nota.trim()+"*\n")+"METODO DE PAGO: *"+e.FormaPago+" $"+e.total.toFixed(2)+"*\nDIRECCION: "+"*".concat((e.direccion||"").trim(),"* \ud83c\udfe0 *").concat((e.referencia||"").trim(),"*\n")+"\ud83d\udccd http://www.google.com/maps/place/"+e.lat+","+e.lng;return"whatsapp://send?phone="+e.phone+"&text="+encodeURIComponent(t)}var ve=a(81),be=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"currentPosition",value:function(){return new Promise((function(e,t){if(console.info("obteniendo posicion actual con navigator.geolocation.getCurrentPosition"),!navigator.geolocation)return console.info("navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()"),Ee().then(e).catch(t);navigator.geolocation.getCurrentPosition((function(t){return e({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(){console.info("navigator.geolocation.getCurrentPosition fall\xf3, intentando con PositionByIP()"),Ee().then(e).catch(t)}))}))}},{key:"GoogleMapsRouteURL",value:function(e,t){for(var a=[e],n=0;n<t.length;n++)a.push(t[n]);return 1===a.length?"":"https://www.google.com/maps/dir/ "+a.map((function(e){return[e.lat,e.lng].join(",")})).join("/")}}]),e}();function Ee(){return fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(e){return{lat:e.latitude,lng:e.longitude}}))}be.QUITO_BOUNDS={west:-78.853,north:-.04875,east:-78.17184,south:-.39207},be.QUITO={lat:-.189515,lng:-78.488167};var ye=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:null,error:null,phone:"",status:"",contactos:null},n.handleClick=n.handleClick.bind(Object(s.a)(n)),n.handlePhone=n.handlePhone.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"handlePhone",value:function(e){this.setState({phone:e.currentTarget.value})}},{key:"handleClick",value:function(){var e=this;if(this.state.data&&!this.state.status){var t;if(this.setState({status:"LOADING"}),0===this.state.data.estado&&(t=ge.OrdersOnRoute([this.state.data.id])),1===this.state.data.estado&&(t=ge.OrdersDelivered([this.state.data.id])),!t)return this.setState({status:""});t.then(this.props.onEstadoChanged).catch((function(t){return e.setState({status:"",error:t})}))}}},{key:"componentWillMount",value:function(){var e=this;Promise.all([ge.GetOrder(this.props.id),ge.GetParamContactos()]).then((function(t){var a=Object(W.a)(t,2),n=a[0],r=a[1];return e.setState({data:n,contactos:r,error:null})})).catch((function(t){return e.setState({error:t})}))}},{key:"render",value:function(){var e=this.props.porcentajeIVA||12,t=this.state,a=t.data,n=t.error,o=t.phone,i=t.contactos,l=t.status;if(!a)return r.a.createElement(V.a,null,n?r.a.createElement("div",{style:{textAlign:"center",padding:20}},r.a.createElement(v.a,{variant:"h6"},"Ocurri\xf3 un error"),r.a.createElement(v.a,{variant:"body2"},n.message),r.a.createElement(v.a,{variant:"button"},n.status," ",n.statusText)):r.a.createElement("div",{style:{textAlign:"center",padding:100}},r.a.createElement(_.a,{size:100}),r.a.createElement(v.a,{variant:"h6"},"CARGANDO...")));var c=a.documento_factura&&a.identificacion_factura,s=Object(F.a)(a.detalle);a.valor_delivery&&s.push({id:"DOMICILIO",pvp:a.valor_delivery,cantidad:1,pagaIva:!1});var d=s.reduce((function(t,a){var n=a.pvp*a.cantidad;return t.cantidad+=a.cantidad,t.neto+=n,a.pagaIva&&(t.iva+=n*e/100),t}),{cantidad:0,neto:0,iva:0});d.total=(d.neto+d.iva).round(2);var u=[];a.mts_delivery&&u.push("".concat((a.mts_delivery/1e3).round(1)," km")),a.segs_delivery&&u.push("".concat((a.segs_delivery/60).round(1)," min")),u=u.length?u.join(" - "):"";var h,m=new Date(a.fechaEnvio||a.createdAt).asLocal();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,null,r.a.createElement("div",{style:{maxWidth:800,margin:"auto"}},r.a.createElement(v.a,{style:{textAlign:"center"},variant:"h5"},"ORDEN #",a.numero),r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"inline-block",width:90},variant:"body2"},"FECHA: "),r.a.createElement(v.a,{style:{display:"inline-block"},variant:"body1"},m)),r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"inline-block",width:90},variant:"body2"},"CLIENTE: "),r.a.createElement(v.a,{style:{display:"inline-block"},variant:"body1"},a.nombre)),(a.Documento||a.identificacion)&&r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"inline-block",width:90},variant:"body2"},a.Documento||"C.I. / RUC",": "),r.a.createElement(v.a,{style:{display:"inline-block"},variant:"body1"},a.identificacion)),r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"inline-block",width:90},variant:"body2"},"TLF: "),r.a.createElement(v.a,{style:{display:"inline-block"},variant:"body1"},a.telefono)),r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"inline-block",width:90},variant:"body2"},"DIRECCION: "),r.a.createElement(v.a,{target:"_blank",component:"a",href:be.GoogleMapsRouteURL(this.props.position,[this.state.data]),style:{display:"inline-block"},variant:"body1"},a.direccion)),r.a.createElement("div",null,r.a.createElement(v.a,{style:{display:"inline-block",width:90},variant:"body2"},"REFERENCIA: "),r.a.createElement(v.a,{style:{display:"inline-block"},variant:"body1"},a.referencia)),r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginTop:10}},r.a.createElement(v.a,{style:{flex:1,marginRight:10},variant:"h6"},"PRODUCTO"),r.a.createElement(v.a,{style:{width:60,marginRight:10},variant:"h6"},"CANT"),r.a.createElement(v.a,{style:{width:70,textAlign:"right"},variant:"h6"},"TOTAL")),a.detalle.map((function(t,a){return r.a.createElement(Ce,Object.assign({},t,{key:a,porcentajeIVA:e}))})),a.valor_delivery?r.a.createElement(Ce,{color:"primary",cantidad:1,pvp:a.valor_delivery,descripcion:"ENVIO A DOMICILIO "+u}):null,r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginTop:5}},r.a.createElement(v.a,{variant:"h6",style:{flex:1,marginRight:10}},"TOTAL"),r.a.createElement(v.a,{style:{marginRight:10,width:60},variant:"h6"},d.cantidad.round(4)),r.a.createElement(v.a,{style:{width:70,textAlign:"right",whiteSpace:"nowrap"},variant:"h6"},"$ ",d.total.toFixed(2))),r.a.createElement(D.a,{style:{marginTop:5,marginBottom:20}}),r.a.createElement(v.a,null,"PAGO : ",a.FormaPago),a.numeroTransaccion&&r.a.createElement(v.a,null,"# de Comprobante :",a.numeroTransaccion),r.a.createElement(v.a,null,"NOTAS: ",a.nota),c&&r.a.createElement("div",null,r.a.createElement(D.a,{style:{marginTop:5,marginBottom:20}}),r.a.createElement(v.a,{style:{textAlign:"center",width:"100%"},variant:"h6"},"DATOS DE FACTURACI\xd3N"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(v.a,{variant:"body2"},a.Documento_factura,":"),r.a.createElement(v.a,{variant:"body2",style:{flex:1,marginLeft:10}},a.identificacion_factura)),r.a.createElement(ke,{title:"Razon Social",icon:K.a,text:a.razonsocial_factura}),r.a.createElement(ke,{title:"Telefono",icon:Y.a,text:a.telefono_factura}),r.a.createElement(ke,{title:"Direcci\xf3n",icon:$.a,text:a.direccion_factura})))),r.a.createElement(J.a,{style:{maxWidth:800,width:"calc(100% - 20px)",margin:"auto"}},r.a.createElement(H.a,{style:{flex:1,margin:5},type:"phone",value:o,margin:"none",onChange:this.handlePhone,variant:"standard",select:!0,SelectProps:{native:!0}},r.a.createElement("option",{value:""},"ENVIAR POR WHATSAPP"),i.map((function(e){return r.a.createElement("option",{key:e.telefono,value:e.telefono},e.nombre)}))),r.a.createElement(q.a,{title:"Enviar por WhatsApp",component:"a",href:fe(Object(z.a)(Object(z.a)({},a),{},{total:d.total,phone:o})),target:"_blank",variant:"outlined",color:"primary"},r.a.createElement(Q.a,null))),[0,1].indexOf(a.estado)>=0?r.a.createElement(J.a,{style:{maxWidth:800,width:"calc(100% - 20px)",margin:"auto"}},n&&r.a.createElement(v.a,{color:"secondary"},n.message),r.a.createElement(q.a,{disabled:!!l,onClick:this.handleClick,type:"button",variant:"contained",fullWidth:!0,color:"primary"},0===(h=a.estado)?"ENVIAR A RUTA":1===h?"FINALIAR ENTREGA":h)):null)}}]),a}(r.a.Component),Oe=Object(ve.b)((function(e){return{porcentajeIVA:e.porcentajeIVA,position:e.store.position}}))(ye);function Ce(e){var t=e.pvp*e.cantidad,a=e.pagaIva?t*e.porcentajeIVA/100:0;return r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginTop:5,marginBottom:5}},r.a.createElement("div",{style:{flex:1,marginRight:10}},r.a.createElement(v.a,{color:e.color||"default",variant:"subtitle2"},e.descripcion),r.a.createElement(v.a,{style:{paddingLeft:10},color:e.color||"default",variant:"body1"},e.nota)),r.a.createElement(v.a,{color:e.color||"default",style:{marginRight:10,width:60},variant:"subtitle2"},e.cantidad.round(4)),r.a.createElement(v.a,{color:e.color||"default",style:{width:70,textAlign:"right",whiteSpace:"nowrap"},variant:"subtitle2"},"$ ",(t+a).round(2).toFixed(2)))}function ke(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"},title:e.title},r.a.createElement(e.icon,null),r.a.createElement(v.a,{style:{padding:3,flex:1}},e.text))}var Se=function(e){return r.a.createElement(q.a,{fullWidth:!0,onClick:e.onClick,component:"button",value:e.id,variant:"outlined",style:{margin:5,textAlign:"left"}},r.a.createElement("div",{style:{display:"table-cell",width:"100%"}},r.a.createElement("div",{style:{display:"table-row"}},r.a.createElement("div",{style:{display:"table-cell"}},r.a.createElement(v.a,{style:{display:"table-cell",width:"100%"},variant:"h6"},e.nombre)),r.a.createElement("div",{style:{display:"table-cell"}},r.a.createElement(v.a,{style:{display:"table-cell",whiteSpace:"nowrap"}},"# ",e.numero))),r.a.createElement("div",{style:{display:"table-row"}},r.a.createElement("div",{style:{display:"table-cell",width:"100%"}},r.a.createElement(v.a,{variant:"button"},new Date(e.createdAt).asLocal())),r.a.createElement("div",{style:{display:"table-cell",whiteSpace:"nowrap"}},r.a.createElement(v.a,null,"$ ",e.total)))))},je=a(563),Ie=function(e){var t=r.a.useState(!0===e.openedByDefault),a=Object(W.a)(t,2),n=a[0],o=a[1],i=e.data,l=e.onClick,c=e.label,s={animation:"rotation 2s linear"};return n||(s.transform="rotate(180deg)"),r.a.createElement("div",{style:{maxWidth:600,margin:"auto"}},r.a.createElement(q.a,{fullWidth:!0,variant:"text",type:"button",onClick:function(e){return o(!n)}},r.a.createElement(v.a,{variant:"h6"},c),r.a.createElement(je.a,{style:s})),r.a.createElement("div",{style:{display:n?"block":"none"}},i.map((function(e){return r.a.createElement(Se,Object.assign({key:e.id},e,{onClick:l}))}))))},Te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={now:(new Date).valueOf(),error:null},e.onMounted&&e.onMounted(e.stepID),n.handleClick=n.handleClick.bind(Object(s.a)(n)),n.handleClose=n.handleClose.bind(Object(s.a)(n)),n.handleChanged=n.handleChanged.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.props.SetOrderStatus("LOADING"),ge.GetOrders().then(this.props.SetOrders).then((function(){return e.props.SetOrderStatus("")})).catch((function(t){e.props.SetOrderStatus("ERROR"),e.setState({error:t})}))}},{key:"componentWillUnmount",value:function(){this.props.SetOrderStatus("")}},{key:"handleClick",value:function(e){var t=e.currentTarget.value;this.props.history.push(this.props.match.path+"/"+t)}},{key:"handleClose",value:function(){this.props.history.push(this.props.match.path)}},{key:"handleChanged",value:function(e){this.props.OrdersChanged(e),this.handleClose()}},{key:"render",value:function(){var e=this,t=this.state.error,a=this.props,n=a.status,o=a.data;if("LOADING"===n)return r.a.createElement("div",{style:{width:"100%",textAlign:"center",margin:"auto",paddingTop:100}},r.a.createElement(_.a,{size:70}),r.a.createElement(v.a,{variant:"h4"},"CARGANDO..."));if(t)return r.a.createElement("div",{style:{width:"100%",textAlign:"center",margin:"auto",paddingTop:100}},r.a.createElement(v.a,{variant:"h4"},"Ocurri\xf3 un error"),r.a.createElement(v.a,{variant:"subtitle1"},t.message),r.a.createElement(v.a,{variant:"body1"},t.status," | ",t.statusText," | ",t.code));var i=o.reduce((function(e,t){return 0===t.estado&&e.pendientes.push(t),1===t.estado&&e.enRuta.push(t),2===t.estado&&e.entregados.push(t),e}),{pendientes:[],enRuta:[],entregados:[]}),l=i.pendientes,c=i.enRuta,s=i.entregados;return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"100%"}},r.a.createElement("div",{style:{flex:1,overflow:"auto"}},r.a.createElement(Ie,{openedByDefault:!0,label:"PENDIENTES",data:l,onClick:this.handleClick}),r.a.createElement(Ie,{openedByDefault:!1,label:"EN RUTA",data:c,onClick:this.handleClick}),r.a.createElement(Ie,{openedByDefault:!1,label:"ENTREGADOS",data:s,onClick:this.handleClick})),r.a.createElement(p.a,{path:"".concat(this.props.match.path,"/:id"),children:function(t){var a=t.match,n=t.history;return r.a.createElement(B.a,{fullScreen:!0,onClose:e.handleClose,open:Boolean(a&&a.params.id)},r.a.createElement(S.a,{style:{position:"absolute",right:20},onClick:e.handleClose,type:"button"},r.a.createElement(U.a,null)),a&&a.params.id?r.a.createElement(Oe,{key:a&&a.params.id,onEstadoChanged:e.handleChanged,history:n,id:a&&a.params.id}):null)}}))}}]),a}(r.a.Component),we={SetOrders:function(e){return{type:"SET_ORDERS",payload:e}},SetOrderStatus:function(e){return{type:"SET_ORDER_STATUS",payload:e}},OrdersChanged:oe},Ae=Object(ve.b)((function(e){return{data:e.orders,status:e.order_status}}),we)(Te),Pe=a(565),xe=a(566),De=a(569),Ne=a(575),Re=a(576),Me=a(577),Ge=a(578),Ue=a(567),Le=a(570),_e=a(568),Be=a(571),ze=a(572),Fe=a(573),We=a(574),Ve=function(e){var t=e.paused?"secondary":"primary";return r.a.createElement(Pe.a,{style:{display:"inline-block",width:200,margin:10,height:285},id:"ITEM-CONTAINER-"+e.id,title:e.nombre+(e.habilitado?"":" - DESHABILITADO")},r.a.createElement(xe.a,{style:{height:220,overflow:"hidden"},value:e.id,onClick:e.onItemClick},e.habilitado?r.a.createElement(Ue.a,{style:{height:140},image:e.imgSrc||"https://diegopq95.github.io/img/default.png",title:e.nombre}):r.a.createElement("div",{style:{height:140,display:"table",textAlign:"center",width:"100%"}},r.a.createElement("div",{style:{display:"table-cell",margin:"auto",verticalAlign:"middle"}},r.a.createElement(_e.a,{fontSize:"large"}))),r.a.createElement(De.a,null,r.a.createElement(v.a,{variant:"subtitle2"},e.nombre),r.a.createElement(v.a,{variant:"body1",style:{whiteSpace:"pre-wrap"}},e.descripcion))),e.habilitado&&r.a.createElement(Le.a,{style:{display:"flex",flexDirection:"row"}},r.a.createElement(S.a,{onClick:e.onItemAction,disabled:"pause"===e.loading,name:"pause",value:e.id,color:t,title:e.paused?"No Disponible":"Disponible"},"pause"===e.loading?r.a.createElement(_.a,{size:20,color:t}):e.paused?r.a.createElement(Be.a,{fontSize:"small",color:"inherit"}):r.a.createElement(ze.a,{fontSize:"small",color:"inherit"})),r.a.createElement("div",{style:{flex:1,textAlign:"right"}},"left"===e.loading||"right"===e.loading?r.a.createElement(_.a,{size:20,style:{marginRight:40}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{onClick:e.onItemAction,value:e.id,name:"left"},r.a.createElement(Fe.a,null)),r.a.createElement(S.a,{onClick:e.onItemAction,value:e.id,name:"right"},r.a.createElement(We.a,null))))))},Je=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={menuEl:null},n.handleMenu=n.handleMenu.bind(Object(s.a)(n)),n.handleMenuClose=n.handleMenuClose.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"handleMenu",value:function(e){this.setState({menuEl:e.target})}},{key:"handleMenuClose",value:function(){this.setState({menuEl:null})}},{key:"render",value:function(){var e=this,t=this.props,a=t.nombre,n=t.items,o=t.id,i=t.loading,l=t.loading_action;console.info("Group "+o+" rendered");var c=this.state.menuEl;return r.a.createElement("div",{style:{width:"calc(100% - 40px)",padding:"10px 20px"},id:"GROUP-ROOT-"+o},r.a.createElement(O.a,{position:"relative",color:"default"},r.a.createElement(C.a,null,l?r.a.createElement("div",{style:{marginRight:10}},r.a.createElement(_.a,{size:20})):r.a.createElement("div",{style:{marginRight:10}},r.a.createElement(S.a,{onClick:this.props.onGroupAction,name:"up",value:o},r.a.createElement(Ne.a,{fontSize:"small"})),r.a.createElement(S.a,{onClick:this.props.onGroupAction,name:"down",value:o},r.a.createElement(Re.a,{fontSize:"small"}))),r.a.createElement(v.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},a," (",n&&n.length||0," items)"),r.a.createElement(S.a,{disabled:i,onClick:this.handleMenu},i?r.a.createElement(_.a,{size:20,color:"inherit"}):r.a.createElement(Me.a,null)))),r.a.createElement("div",{style:{width:"100%",overflow:"auto",whiteSpace:"nowrap",scrollBehavior:"smooth"},id:"GROUP-CONTAINER-"+o},r.a.createElement(Pe.a,{style:{display:"inline-block",width:200,margin:10}},r.a.createElement(xe.a,{style:{height:285,textAlign:"center"},component:"button",value:"NUEVO~"+o,onClick:this.props.onItemClick},r.a.createElement(De.a,null,r.a.createElement(Ge.a,{fontSize:"large"}),r.a.createElement(v.a,{variant:"h6"},"NUEVO")))),n&&n.sort((function(e,t){return e.orden-t.orden})).map((function(t){return r.a.createElement(Ve,Object.assign({},t,{onItemClick:e.props.onItemClick,onItemAction:e.props.onItemAction,key:t.id}))}))),r.a.createElement(j.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(c),onClose:this.handleMenuClose,onClick:this.handleMenuClose},r.a.createElement(I.a,{value:o,onClick:this.props.onGroupEdit},"Editar"),r.a.createElement(I.a,{value:o,onClick:this.props.onGroupDelete},"Eliminar")))}}]),a}(r.a.PureComponent),He=a(580),qe=a(581),Ke=a(606),Ye=a(582);function $e(e){return new Promise((function(t,a){if(e.type.indexOf("image")<0)return a({message:"El archivo no es una imagen"});var n=(9.5367431640625e-7*e.size).round(2);if(n>5)return a({message:"Solo se pueden subir imagenes de hasta 15mb. Imagen actual (".concat(n," MB)")});var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onerror=a,r.readAsDataURL(e)}))}function Qe(e){return new Promise((function(t,a){if(e.type.indexOf("image")<0)return a({message:"El archivo no es una imagen"});var n=(9.5367431640625e-7*e.size).round(2);if(n>5)return a({message:"Solo se pueden subir imagenes de hasta 15mb. Imagen actual (".concat(n," MB)")});var r=new FileReader;r.onload=function(a){t({base64:Ze(a.target.result),ext:e.type.split("/")[1]})},r.onerror=a,r.readAsArrayBuffer(e)}))}function Ze(e){for(var t,a="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),o=r.byteLength,i=o%3,l=o-i,c=0;c<l;c+=3)a+=n[(16515072&(t=r[c]<<16|r[c+1]<<8|r[c+2]))>>18]+n[(258048&t)>>12]+n[(4032&t)>>6]+n[63&t];return 1===i?a+=n[(252&(t=r[l]))>>2]+n[(3&t)<<4]+"==":2===i&&(a+=n[(64512&(t=r[l]<<8|r[l+1]))>>10]+n[(1008&t)>>4]+n[(15&t)<<2]+"="),a}var Xe,et=a(579),tt=function(e){function t(){document.getElementById("img-src-input-hidden").click()}var a={maxHeight:e.height,maxWidth:"100%",cursor:"pointer"};return e.border&&(a.border="1px dotted #949494"),r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",id:"img-src-input-hidden",onChange:e.onChange,hidden:!0,accept:"image/*"}),e.loading?r.a.createElement("div",{style:{height:e.height,maxWidth:"100%",margin:"auto",display:"table"}},r.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle",height:"100%"}},r.a.createElement(_.a,{color:"primary",size:100}))):e.src?r.a.createElement("img",{onClick:t,title:"Click para cambiar la foto. O arrastra tu imagen.",src:e.src,alt:e.name,style:a}):r.a.createElement("div",{style:{height:e.height,maxWidth:"100%",margin:"auto",display:"table"}},r.a.createElement(q.a,{variant:e.border?"outlined":"text",type:"button",onClick:t,style:{display:"table-cell",verticalAlign:"middle",height:"100%"}},r.a.createElement(et.a,{fontSize:"large"}),r.a.createElement(v.a,{variant:"h6"},"Agrega una foto"))))},at=Object(g.a)({paper:{maxHeight:"calc(100% - 20px)"}})(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={id:null,idGrupo:null,nombre:"",descripcion:"",pvp:"",imgSrc:"",pagaIva:!1,habilitado:!0,error:null,loading:"INITIAL"},n.handleInput=n.handleInput.bind(Object(s.a)(n)),n.handleCheck=n.handleCheck.bind(Object(s.a)(n)),n.handleClose=n.handleClose.bind(Object(s.a)(n)),n.handleClick=n.handleClick.bind(Object(s.a)(n)),n.handleDelete=n.handleDelete.bind(Object(s.a)(n)),n.handlePhotoChange=n.handlePhotoChange.bind(Object(s.a)(n)),n.handlePhotoDrop=n.handlePhotoDrop.bind(Object(s.a)(n)),n.handlePhotoOver=n.handlePhotoOver.bind(Object(s.a)(n));var r=n.props.match.params.info;if(r.indexOf("~")>=0){var o=r.split("~"),i=Object(W.a)(o,2),c=i[0],d=i[1];n.state.id=c,n.state.idGrupo=+d}else n.state.id=r;return"NUEVO"===n.state.id&&(n.state.loading=!1),n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;"NUEVO"!==this.state.id&&ge.GetProduct(this.state.id).then((function(t){e.setState(Object(z.a)(Object(z.a)({},t),{},{loading:!1}))})).catch((function(t){return e.setState({error:t,loading:"INITIAL-FAILED"})}))}},{key:"handleInput",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"handleCheck",value:function(e){var t=e.currentTarget,a=t.name,n=t.checked;this.setState(Object(h.a)({},a,n))}},{key:"handleClick",value:function(){var e=this;if(!this.state.loading){if(!this.state.pvp||isNaN(this.state.pvp))return alert("Digite un Precio valido");if(!this.state.nombre)return alert("Agregue el nombre");if(!this.state.idGrupo)return alert("Seleccione un grupo");if(!this.state.imgSrc)if(!window.confirm("Este item no tiene una imagen, est\xe1 seguro de continuar?"))return;this.setState({loading:!0,error:null}),this.state.imgFile?Qe(this.state.imgFile).then(this._save.bind(this)).catch((function(t){return e.setState({error:t,loading:!1})})):this._save()}}},{key:"_save",value:function(e){var t=this;ge.SaveProduct(Object(z.a)(Object(z.a)({},this.state),{},{imgFile:e})).then((function(e){try{t.setState({loading:!1,error:null}),t.props.onClose(Object(z.a)(Object(z.a)({},t.state),e))}catch(a){}})).catch((function(e){return t.setState({error:e,loading:!1})}))}},{key:"handleDelete",value:function(){var e=this;this.state.loading||window.confirm("Esta seguro de eliminar este registro?")&&(this.setState({loading:!0,error:null}),ge.DeleteProduct(this.state).then((function(t){e.props.onClose({id:e.state.id,delete:!0})})).catch((function(t){return e.setState({error:t,loading:!1})})))}},{key:"handleClose",value:function(e){if(this.state.loading&&e)return e.preventDefault();this.props.onClose()}},{key:"handlePhotoChange",value:function(e){var t=this,a=e.currentTarget.files;if(a&&a.length){var n=a[0];$e(n).then((function(e){return t.setState({imgSrc:e,imgFile:n})})).catch((function(e){return alert("Ocurrio un problema al cargar tu imagen: "+e.message)}))}}},{key:"handlePhotoDrop",value:function(e){var t=this;e.preventDefault();var a=e.dataTransfer.files;if(a&&a.length){var n=a[0];$e(n).then((function(e){return t.setState({imgSrc:e,imgFile:n})})).catch((function(e){return alert("Ocurrio un problema al cargar tu imagen: "+e.message)})),document.getElementById("product-dialog-container").classList.remove("with-drop-view")}}},{key:"handlePhotoEnter",value:function(e){document.getElementById("product-dialog-container").classList.add("with-drop-view"),e.preventDefault()}},{key:"handlePhotoLeave",value:function(e){e.preventDefault()}},{key:"handlePhotoOver",value:function(e){e.dataTransfer.dropEffect="copy",e.preventDefault(),void 0!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){document.getElementById("product-dialog-container").classList.remove("with-drop-view")}),200),console.info("dragenter")}},{key:"render",value:function(){var e=this,t=this.state;console.info("product dialog rendered");var a=isNaN(this.state.pvp)?0:+this.state.pvp,n=a?(a+(t.pagaIva?a*(this.props.porcentajeIVA||12)/100:0)).round(2):0;return"INITIAL"===t.loading?r.a.createElement(B.a,{open:!0},r.a.createElement(V.a,{style:{textAlign:"center",paddingTop:150,width:500,height:300}},r.a.createElement(_.a,{size:70}),r.a.createElement(v.a,{variant:"h6"},"CARGANDO..."))):"INITIAL-FAILED"===t.loading?r.a.createElement(B.a,{onClose:function(t){return e.handleClose()},open:!0},r.a.createElement(V.a,{style:{textAlign:"center",paddingTop:150,width:500,height:300}},r.a.createElement(v.a,{color:"secondary",variant:"h5"},"Hubo un error al cargar la informaci\xf3n"),r.a.createElement(v.a,{color:"secondary",variant:"h6"},t.error.message),r.a.createElement(v.a,{color:"secondary",variant:"body1"},t.error.code," ",t.error.status))):r.a.createElement(B.a,{id:"product-dialog-container",onDrop:this.handlePhotoDrop,onDragOver:this.handlePhotoOver,onDragEnter:this.handlePhotoEnter,onDragLeave:this.handlePhotoLeave,open:!0,onClose:this.handleClose,classes:{paper:this.props.classes.paper}},r.a.createElement(V.a,{style:{textAlign:"center",paddingTop:0,paddingBottom:0,overflowX:"hidden"}},r.a.createElement(H.a,{autoFocus:!0,value:t.nombre,name:"nombre",onChange:this.handleInput,label:"Nombre",variant:"standard",fullWidth:!0,style:nt.textField}),r.a.createElement(tt,{onChange:this.handlePhotoChange,src:t.imgSrc,name:t.nombre,height:"calc(100vh - 430px)"}),r.a.createElement(H.a,{value:void 0===t.descripcion||null===t.descripcion?"":t.descripcion,name:"descripcion",onChange:this.handleInput,inputProps:{rows:3},label:"Descripcion",variant:"outlined",multiline:!0,fullWidth:!0,style:nt.textField}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(H.a,{value:t.pvp,name:"pvp",type:"number",label:"Precio sin impuestos",inputProps:{step:"0.01"},onChange:this.handleInput,style:Object(z.a)(Object(z.a)({},nt.textField),{},{flex:1}),InputProps:{endAdornment:r.a.createElement(He.a,{position:"end"},r.a.createElement(qe.a,{control:r.a.createElement(Ke.a,{color:"primary",name:"pagaIva",checked:t.pagaIva,onChange:this.handleCheck}),label:"IVA"}))}}),r.a.createElement(v.a,{variant:"body2",style:{marginLeft:15,paddingTop:15,width:130,paddingLeft:5,paddingRight:5}},"PRECIO FINAL: $",n.toFixed(2))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(H.a,{style:Object(z.a)(Object(z.a)({},nt.textField),{},{flex:1}),value:t.idGrupo||1,onChange:this.handleInput,name:"idGrupo",label:"Grupo",select:!0,SelectProps:{native:!0}},this.props.grupos&&this.props.grupos.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.nombre)}))),r.a.createElement(qe.a,{style:{marginLeft:15,marginRight:0,width:130},label:t.habilitado?"Habilitado":"Deshabilitado",control:r.a.createElement(Ye.a,{checked:t.habilitado,onChange:this.handleCheck,name:"habilitado"})}))),t.error&&r.a.createElement(v.a,{style:{width:"100%",marginTop:10,textAlign:"center"},color:"secondary"},t.error.message),r.a.createElement(J.a,null,r.a.createElement(q.a,{fullWidth:!0,style:Object(z.a)(Object(z.a)({},nt.textField),{},{flex:1}),disabled:t.loading,variant:"outlined",type:"button",onClick:this.handleClick,color:"primary"},t.loading?r.a.createElement(_.a,{size:30,color:"primary"}):"GUARDAR"),"NUEVO"!==t.id?r.a.createElement(q.a,{disabled:t.loading,variant:"outlined",type:"button",onClick:this.handleDelete,color:"secondary"},t.loading?r.a.createElement(_.a,{size:30,color:"secondary"}):"ELIMINAR"):null))}}]),a}(r.a.PureComponent)),nt={textField:{marginTop:10,marginBottom:10}},rt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={input:"",inputLabel:""},n.handleInput=n.handleInput.bind(Object(s.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(s.a)(n)),n.handleClose=n.handleClose.bind(Object(s.a)(n)),n.state.input=e.value||"",n.state.inputLabel=e.label||"",n}return Object(c.a)(a,[{key:"handleInput",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.loading){if(!this.state.input)return this.setState({error:"El texto no puede estar vac\xedo."});if(this.setState({loading:!0}),!this.props.onSubmit)return alert("You Must especify TextPrompt.onSubmit event");this.props.onSubmit(this.state.input,(function(e){t.setState({error:e,loading:!1})}))}}},{key:"handleClose",value:function(e){var t=this;if(this.state.loading)return e.preventDefault();this.props.onSubmit(void 0,(function(e){t.setState({error:e,loading:!1})}))}},{key:"render",value:function(){console.info("TextPrompt rendering");var e=this.state;return r.a.createElement(B.a,{maxWidth:"lg",open:!0,onClose:this.handleClose},r.a.createElement(V.a,{style:{width:300}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(H.a,{value:e.input,name:"input",onChange:this.handleInput,label:e.inputLabel,variant:"outlined",fullWidth:!0,style:ot.textField,autoFocus:!0}),e.error&&r.a.createElement(v.a,{color:"secondary",variant:"body2"},e.error),r.a.createElement(q.a,{fullWidth:!0,variant:"outlined",disabled:e.loading,type:"submit",color:"primary"},e.loading?r.a.createElement(_.a,{size:30,color:"primary"}):"GUARDAR"))))}}]),a}(r.a.PureComponent),ot={textField:{marginTop:10,marginBottom:10}},it=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={grupos:[],loading:!0,currentGroup:null},e.onMounted&&e.onMounted(e.stepID),n.deleteGroup=n.deleteGroup.bind(Object(s.a)(n)),n.editGroup=n.editGroup.bind(Object(s.a)(n)),n.editGroupEnding=n.editGroupEnding.bind(Object(s.a)(n)),n.updateGrupo=n.updateGrupo.bind(Object(s.a)(n)),n.handleGroupAction=n.handleGroupAction.bind(Object(s.a)(n)),n.handleItemClick=n.handleItemClick.bind(Object(s.a)(n)),n.handleItemAction=n.handleItemAction.bind(Object(s.a)(n)),n.editItemEnd=n.editItemEnd.bind(Object(s.a)(n)),n.updateProduct=n.updateProduct.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;ge.GetGroups().then((function(t){var a=t.sort((function(e,t){return e.orden-t.orden})).map((function(e){return e.items||(e.items=[]),e.items=e.items.sort((function(e,t){return e.orden-t.orden})),e}));e.setState({grupos:a,loading:!1})})).catch((function(t){e.setState({loading:!1,error:t})}))}},{key:"handleItemAction",value:function(e){var t=this,a=+e.currentTarget.value,n=e.currentTarget.name;this.updateProduct("loading",{id:a,loading:n}),ge.RequestActionProduct({id:a,action:n}).then((function(e){for(var a=0;a<e.length;a++){var n=e[a];t.updateProduct(null,Object(z.a)(Object(z.a)({},n),{},{loading:null}))}})).catch((function(e){alert(e.message),t.updateProduct("loading",{id:a,loading:null})}))}},{key:"handleItemClick",value:function(e){var t=e.currentTarget.value;t.indexOf("NUEVO")>=0&&this.updateProduct("loading",{id:+t,loading:!0}),this.props.history.push(this.props.match.path+"/"+t)}},{key:"editItemEnd",value:function(e){e&&this.updateProduct(null,e),this.props.history.push(this.props.match.path)}},{key:"updateProduct",value:function(e,t){var a=this;this.setState((function(n){t.idGrupo=+t.idGrupo;var r=Object(z.a)({},n);r.grupos=n.grupos;var o,i=r.grupos.find((function(e){return e.items&&e.items.find((function(e){return e.id===t.id}))}));if(t.delete){if(i){var l=i.items.indexOf(i.items.find((function(e){return e.id===t.id})));i.items.splice(l,1),i.items=Object(F.a)(i.items).sort((function(e,t){return e.orden-t.orden}))}return r}if(i){var c=i.items.find((function(e){return e.id===t.id})),s=i.items.indexOf(c);if(t.idGrupo&&t.idGrupo!==i.id)i.items.splice(s,1),i.items=Object(F.a)(i.items).sort((function(e,t){return e.orden-t.orden})),(o=r.grupos.find((function(e){return e.id===t.idGrupo})))&&(o.items.push(t),a.scrollGroupToItem(o.id,t.id));else if(o=i,e)c[e]=t[e];else{var d=Object(z.a)({},c);for(var u in t)t.hasOwnProperty(u)&&(d[u]=t[u]);i.items[s]=d}}else(o=r.grupos.find((function(e){return e.id===t.idGrupo})))&&(o.items.push(t),a.scrollGroupToItem(o.id,t.id));return o&&(o.items=Object(F.a)(o.items).sort((function(e,t){return e.orden-t.orden}))),r}))}},{key:"deleteGroup",value:function(e){var t=this,a=+e.currentTarget.value;a&&(window.confirm("Esta seguro de borrar este registro?")&&(this.updateGrupo("loading",{id:a,loading:!0}),ge.DeleteGroup({id:a}).then((function(e){t.setState((function(e){var t=Object(z.a)({},e);t.grupos=e.grupos;var n=t.grupos.find((function(e){return e.id===a}));return n&&t.grupos.splice(t.grupos.indexOf(n),1),t.grupos}))})).catch((function(e){alert(e.message),t.updateGrupo("loading",{id:a,loading:!1})}))))}},{key:"editGroup",value:function(e){var t=e.currentTarget.value;if("NUEVO"===t)return this.setState({currentGroup:{}});var a=this.state.grupos.find((function(e){return e.id===+t}));this.setState({currentGroup:{id:a.id,value:a.nombre}})}},{key:"handleGroupAction",value:function(e){var t=this,a=+e.currentTarget.value,n=e.currentTarget.name;this.updateGrupo("loading_action",{id:a,loading_action:!0}),ge.RequestActionGroup({id:a,action:n}).then((function(e){e.forEach((function(e){t.updateGrupo(null,Object(z.a)(Object(z.a)({},e),{},{loading_action:null}))})),t.scrollToGroupId(a)})).catch((function(e){t.updateGrupo("loading_action",{id:a,loading_action:null}),alert(e.message)}))}},{key:"editGroupEnding",value:function(e,t){if(!e)return this.setState({currentGroup:null});var a=this.state.currentGroup;return a.value===e?this.setState({currentGroup:null}):this.state.grupos.find((function(t){return t.id!==a.id&&t.nombre.toUpperCase()===e.toUpperCase()}))?t("Este nombre ya existe"):void ge.SaveGroup({id:a.id,nombre:e}).then(this.updateGrupo.bind(this,"nombre")).catch((function(e){return t(e.message)}))}},{key:"scrollToGroupId",value:function(e,t){setTimeout((function(){window.requestAnimationFrame((function(){var a=document.getElementById("product-div"),n=document.getElementById("GROUP-ROOT-"+e);if(n){var r=n.offsetTop-70;a.scrollTop=r,t&&t()}}))}))}},{key:"scrollGroupToItem",value:function(e,t){this.scrollToGroupId(e,(function(){setTimeout((function(){window.requestAnimationFrame((function(){var a=document.getElementById("GROUP-CONTAINER-"+e),n=document.getElementById("ITEM-CONTAINER-"+t);n&&(a.scrollLeft=n.offsetLeft)}))}),300)}))}},{key:"updateGrupo",value:function(e,t){var a=this;this.setState((function(n){var r=Object(z.a)({},n);r.grupos=n.grupos;var o=r.grupos.find((function(e){return e.id===t.id}));o?e?e.split(",").forEach((function(e){o[e]=t[e]})):(t.items=o.items,r.grupos[r.grupos.indexOf(o)]=Object(z.a)(Object(z.a)({},o),t)):(r.grupos.push(t),a.scrollToGroupId(t.id));return r.currentGroup=null,r}))}},{key:"render",value:function(){var e=this;console.info("Product view rendered");var t=this.state,a=t.grupos,n=t.loading,o=t.error,i=t.currentGroup;return n?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},r.a.createElement(_.a,{size:100}),r.a.createElement(v.a,{variant:"h4"},"CARGANDO...")):o?r.a.createElement("div",{style:{textAlign:"center",paddingTop:200}},r.a.createElement(v.a,{variant:"subtitle1"}," Ocurrio un error"),r.a.createElement(v.a,{variant:"body1"},o.message),r.a.createElement(v.a,{variant:"caption"},o.code," ",o.status)):r.a.createElement("div",{style:{height:"100%",overflow:"auto",scrollBehavior:"smooth"},id:"product-div"},r.a.createElement("div",{style:{width:"calc(100% - 40px)",padding:20}},r.a.createElement(O.a,{position:"relative",color:"default"},r.a.createElement(xe.a,{onClick:this.editGroup,value:"NUEVO"},r.a.createElement(C.a,null,r.a.createElement(Ge.a,{style:{marginRight:10}}),r.a.createElement(v.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"NUEVO GRUPO"))))),a&&a.length?a.sort((function(e,t){return e.orden-t.orden})).map((function(t){return r.a.createElement(Je,Object.assign({onGroupAction:e.handleGroupAction,onGroupEdit:e.editGroup,onGroupDelete:e.deleteGroup,onItemAction:e.handleItemAction,onItemClick:e.handleItemClick,key:t.id},t))})):null,r.a.createElement(p.a,{path:this.props.match.path+"/:info",render:function(t){return r.a.createElement(at,Object.assign({porcentajeIVA:12,grupos:a.map((function(e){return{id:e.id,nombre:e.nombre}})),onClose:e.editItemEnd},t))}}),i&&r.a.createElement(rt,Object.assign({label:"Nombre del Grupo"},i,{onSubmit:this.editGroupEnding})))}}]),a}(r.a.Component),lt=a(602),ct=a(585),st=a(584),dt=a(583);function ut(e){var t=e.feedback[e.name],a=t&&"loading"!==t,n={InputProps:t&&("loading"===t?{endAdornment:r.a.createElement(He.a,null,r.a.createElement(_.a,{title:"Guardando...",color:"primary",size:20}))}:{endAdornment:r.a.createElement(He.a,null,r.a.createElement(dt.a,{color:"secondary"}))})};return a&&(n.helperText=r.a.createElement(v.a,{variant:"caption",color:"secondary"},t)),r.a.createElement(H.a,Object.assign({type:e.type,style:{marginTop:10,marginBottom:10},fullWidth:!0,onChange:function(t){var a=t.currentTarget,n=a.type,r=a.value;e.onChange(t);var o=!0;"number"===n&&(o=null!==r&&void 0!==r&&r.toString().length&&!isNaN(+r)),Xe&&clearTimeout(Xe),e.onUpdate&&o&&(Xe=setTimeout((function(){e.onUpdate(e.name,"number"===n?parseFloat(r):r)}),1500))},value:e.value,label:e.label,name:e.name,multiline:e.multiline,inputProps:e.inputProps},n,{color:a?"secondary":"primary"}))}var ht=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={feedback:{}},n.timeouts={},e.onMounted&&e.onMounted(e.stepID),n.handleInput=n.handleInput.bind(Object(s.a)(n)),n.handleUpdateProp=n.handleUpdateProp.bind(Object(s.a)(n)),n.handleLogo=n.handleLogo.bind(Object(s.a)(n));var r=e.configuracion;if(r)for(var o in r)r.hasOwnProperty(o)&&(n.state[o]=r[o]);return n}return Object(c.a)(a,[{key:"handleInput",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;"loading"!==this.state.feedback[a]&&this.setState(Object(h.a)({},a,n))}},{key:"handleUpdateProp",value:function(e,t,a){var n=this;if("loading"!==this.state.feedback[e]){this.setState((function(t){var a=Object(z.a)({},t);return a.feedback=Object(z.a)(Object(z.a)({},a.feedback),{},Object(h.a)({},e,"loading")),a}));var r=ge.setConfigInfo(Object(h.a)({},e,t||this.state[e])).then((function(t){return n.setState((function(t){var a=Object(z.a)({},t);return a.feedback=Object(z.a)(Object(z.a)({},a.feedback),{},Object(h.a)({},e,"loading")),delete a.feedback[e],a}))}));if(a)return r;r.catch((function(t){return n.setState((function(a){var n=Object(z.a)({},a);return n.feedback=Object(z.a)(Object(z.a)({},n.feedback),{},Object(h.a)({},e,t.message)),n}))}))}}},{key:"handleLogo",value:function(e){var t=this;if("loading"!==this.state.feedback.logoSrc){var a=e.currentTarget.files;if(a&&a.length){var n=a[0];Promise.all([Qe(n).then((function(e){return t.handleUpdateProp("logoFile",e,!0)})),$e(n)]).then((function(e){var a=Object(W.a)(e,2)[1];t.setState({logoSrc:a})})).catch((function(e){alert("Ocurrio un problema al cargar tu imagen: "+e.message),t.setState((function(e){var t=Object(z.a)({},e);return t.feedback=Object(z.a)({},t.feedback),delete t.feedback.logoSrc,t}))}))}}}},{key:"render",value:function(){var e=this.state,t=e.titulo,a=e.slogan,n=e.logoSrc,o=e.direccion,i=e.telefono,l=e.whatsAppMessage,c=e.whatsAppPhone,s=e.feedback;return r.a.createElement("div",null,r.a.createElement(st.a,{container:!0},r.a.createElement(st.a,{item:!0,xs:6,style:{padding:10}},r.a.createElement(ut,{label:"Nombre de la Tienda",onUpdate:this.handleUpdateProp,value:t||"",name:"titulo",onChange:this.handleInput,feedback:s,inputProps:{maxLength:100}}),r.a.createElement("div",{style:{textAlign:"center",padding:10}},r.a.createElement(tt,{loading:s.logoSrc,onChange:this.handleLogo,src:n,border:!0,name:"Logo de la Tienda",height:"calc(100vh - 400px)"})),r.a.createElement(ut,{label:"Slogan de la Tienda",onUpdate:this.handleUpdateProp,value:a||"",name:"slogan",onChange:this.handleInput,feedback:s,inputProps:{maxLength:100}})),r.a.createElement(st.a,{item:!0,xs:6,style:{padding:10}},r.a.createElement(ut,{label:"Direccion de la Tienda",onUpdate:this.handleUpdateProp,value:o||"",name:"direccion",onChange:this.handleInput,feedback:s,multiline:!0,inputProps:{rows:2,maxLength:300}}),r.a.createElement(ut,{label:"Telefono",onUpdate:this.handleUpdateProp,value:i||"",name:"telefono",onChange:this.handleInput,feedback:s,type:"phone",inputProps:{maxLength:50}}),r.a.createElement(ut,{label:"Numero en Whatsapp",onUpdate:this.handleUpdateProp,value:c||"",name:"whatsAppPhone",onChange:this.handleInput,feedback:s,type:"phone",inputProps:{maxLength:20}}),r.a.createElement(ut,{label:"Escribe el mensaje de Whatsapp que quieres recibir cuando seas contactado",onUpdate:this.handleUpdateProp,value:l||"",name:"whatsAppMessage",onChange:this.handleInput,feedback:s,multiline:!0,inputProps:{rows:3,maxLength:300}}))))}}]),a}(r.a.PureComponent),mt=a(99),pt=a(100),gt=a(255),ft=a(256),vt=a.n(ft),bt=function(e){var t=e.API_KEY,a=Object(mt.a)(e,["API_KEY"]);return r.a.createElement(Et,Object.assign({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(t||"","&v=3.exp&libraries=geometry,drawing,places"),containerElement:r.a.createElement("div",{style:{height:"100%"}}),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),defaultZoom:15},a))},Et=Object(pt.withScriptjs)(Object(pt.withGoogleMap)((function(e){var t=window.google,a=e.marker,n=e.polygons,o=e.enableDrawingManager,i=e.onPolygonComplete,l=e.onMapMounted,c=e.onPolygonClick,s=e.onPolygonMouseUp,d=Object(mt.a)(e,["marker","polygons","enableDrawingManager","onPolygonComplete","onMapMounted","onPolygonClick","onPolygonMouseUp"]);return r.a.createElement(pt.GoogleMap,Object.assign({},d,{options:{disableDefaultUI:!0,zoomControl:!0,clickableIcons:!1},ref:l}),a&&r.a.createElement(gt.MarkerWithLabel,{labelAnchor:new t.maps.Point(0,0),position:a.position},r.a.createElement(Pe.a,{elevation:3,color:"secondary",style:{margin:5}},r.a.createElement(De.a,{style:{maxWidth:200,padding:5}},r.a.createElement(v.a,{variant:"button"},a.label)))),o&&r.a.createElement(vt.a,{onPolygonComplete:i,defaultDrawingMode:t.maps.drawing.OverlayType.POLYGON,defaultOptions:{drawingControl:!0,drawingControlOptions:{position:t.maps.ControlPosition.TOP_CENTER,drawingModes:["polygon"]}},polygonOptions:{strokeColor:"#007bff",strokeOpacity:.8,strokeWeight:2,fillColor:"#007bff",fillOpacity:.35}}),n&&n.map((function(e,t){return r.a.createElement(pt.Polygon,{key:t,path:e.path,editable:e.editable,onClick:c,onMouseUp:function(e){s&&s(this,e,t)},options:{strokeColor:"#007bff",strokeOpacity:.8,strokeWeight:2,fillColor:"#007bff",fillOpacity:.35}})})))}))),yt=a(586),Ot=a(587),Ct=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={position:null,baseTransporte:0,kmBaseTransporte:0,recargoPorKm:0,google_maps_key:"",cobrarTransporte:!1,coberturas:[],editMode:0,loading:!0,defaultCenter:null,feedback:{}},n.handleTabContext=function(e){e.preventDefault(),n.setState({tabContextEl:e.currentTarget})},n.handleTabContextClose=function(){n.setState({tabContextEl:null})},n.handleDeleteAllCoberturas=function(){n.handleUpdateProp("coberturas",[],!0).then((function(){n.setState({coberturas:[]})})).catch((function(e){return n.updateFeedback("coberturas",e.message)})),n.setState({tabContextEl:null})},e.onMounted&&e.onMounted(e.stepID),n.handleInput=n.handleInput.bind(Object(s.a)(n)),n.handleUpdateProp=n.handleUpdateProp.bind(Object(s.a)(n)),n.handleCheck=n.handleCheck.bind(Object(s.a)(n)),n.handleMapMounted=n.handleMapMounted.bind(Object(s.a)(n)),n.handleNewPolygon=n.handleNewPolygon.bind(Object(s.a)(n)),n.handlePolygonMouseUp=n.handlePolygonMouseUp.bind(Object(s.a)(n)),n.handleEditMode=n.handleEditMode.bind(Object(s.a)(n)),n.handleMapClick=n.handleMapClick.bind(Object(s.a)(n));var r=e.configuracion;if(r)for(var o in n.state)r.hasOwnProperty(o)&&(n.state[o]=r[o]);return n.state.position&&(n.state.defaultCenter=n.state.position),n.state.defaultCenter&&(n.state.loading=null,n.state.editMode=1),n}return Object(c.a)(a,[{key:"handleUpdateProp",value:function(e,t,a){var n=this;if("loading"!==this.state.feedback[e]){this.updateFeedback(e,"loading");var r=ge.setConfigInfo(Object(h.a)({},e,void 0===t?this.state[e]:t)).then((function(){return n.updateFeedback(e,null)}));return a?r:r.catch((function(t){return n.updateFeedback(e,t.message)}))}}},{key:"updateFeedback",value:function(e,t){this.setState((function(a){var n=Object(z.a)({},a);return n.feedback=Object(z.a)(Object(z.a)({},n.feedback),{},Object(h.a)({},e,t)),n}))}},{key:"componentDidMount",value:function(){var e=this;this.state.defaultCenter||be.currentPosition().then((function(t){return e.setState({defaultCenter:t,loading:null})})).catch((function(t){return e.setState({error:t,loading:"ERROR"})}))}},{key:"handleInput",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"handleCheck",value:function(e){var t=this;e.preventDefault();var a=e.currentTarget,n=a.name,r=a.checked,o=this.handleUpdateProp(n,r,!0);o&&o.then((function(e){t.setState(Object(h.a)({},n,r))})).catch((function(e){alert(e.message),t.updateFeedback(n,null)}))}},{key:"handleNewPolygon",value:function(e){for(var t=this,a=[],n=e.getPath(),r=0;r<n.getLength();r++)a.push(n.getAt(r).toJSON());var o=[].concat(Object(F.a)(this.state.coberturas),[{path:a}]),i=this.handleUpdateProp("coberturas",o,!0);i&&i.then((function(){t.setState({coberturas:o}),e.setMap(null)})).catch((function(a){t.updateFeedback("coberturas",a.message),e.setMap(null)}))}},{key:"handleMapClick",value:function(e){var t=this,a=e.latLng.toJSON();if(0===this.state.editMode){var n=this.handleUpdateProp("position",a,!0);n&&(n.then((function(){return t.setState({position:a})})).catch((function(e){return t.updateFeedback("position",e.message)})),this.setState({position:a}))}}},{key:"handlePolygonMouseUp",value:function(e,t,a){var n=this;if(1===this.state.editMode){for(var r=[],o=e.getPath(),i=0;i<o.getLength();i++)r.push(o.getAt(i).toJSON());var l=JSON.parse(JSON.stringify(this.state.coberturas)),c=!1,s=l[a];if(s)for(var d=0;d<r.length;d++){var u=r[d],h=s.path[d];if(!h){c=!0;break}if(h.lat!==u.lat||h.lng!==u.lng){c=!0;break}}else c=!0;if(c){l[a]={path:r};var m=this.handleUpdateProp("coberturas",l,!0);m&&(this.LAST_COBERTURAS||(this.LAST_COBERTURAS=JSON.parse(JSON.stringify(this.state.coberturas))),m.then((function(){n.LAST_COBERTURAS=l})).catch((function(e){n.updateFeedback("coberturas",e.message),n.setState({coberturas:[]},(function(){return n.setState({coberturas:n.LAST_COBERTURAS})}))})))}}}},{key:"handleMapMounted",value:function(e){this.mapRef=e,this._fitBoundsToPolygon()}},{key:"handleEditMode",value:function(e,t){this.setState({editMode:t})}},{key:"_fitBoundsToPolygon",value:function(){if(this.mapRef&&this.state.coberturas.length){for(var e=new window.google.maps.LatLngBounds,t=0;t<this.state.coberturas.length;t++){this.state.coberturas[t].path.forEach((function(t){return e.extend(t)}))}var a=this.mapRef.getBounds();a&&e.union(a),this.mapRef.fitBounds(e)}}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.error,n=e.editMode,o=e.baseTransporte,i=e.kmBaseTransporte,l=e.recargoPorKm,c=e.feedback,s=e.cobrarTransporte,d=e.defaultCenter,u=e.position,h=e.google_maps_key,m=e.coberturas,p=e.tabContextEl,g=m&&m.length,f={defaultCenter:d,API_KEY:h,enableDrawingManager:!g&&1===n};return u&&(f.marker={position:u,label:"Tu Tienda"}),m&&m.length&&(f.polygons=m.map((function(e){return Object(z.a)(Object(z.a)({},e),{},{editable:1===n})}))),"ERROR"===t?r.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},r.a.createElement(_.a,{size:100}),r.a.createElement(v.a,{variant:"h4"},"Ocurri\xf3 un error"),r.a.createElement(v.a,{variant:"subtitle1"},a.message),r.a.createElement(v.a,{variant:"body1"},a.code," ",a.status)):t?r.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},r.a.createElement(_.a,{size:100}),r.a.createElement(v.a,{variant:"h4"},"CARGANDO EL MAPA...")):r.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"calc(100% - 100px)"}},r.a.createElement(j.a,{anchorEl:p,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(p),onClose:this.handleTabContextClose},r.a.createElement(I.a,{onClick:this.handleDeleteAllCoberturas},"Borrar areas")),r.a.createElement("div",{style:{flex:1,padding:10}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(v.a,{style:{marginLeft:10,flex:1,paddingTop:5},variant:"h6"},"Ubicaci\xf3n de la Tienda"),r.a.createElement(lt.a,{onChange:this.handleEditMode,value:n},r.a.createElement(ct.a,{title:c.position,label:(u?"Cambiar":"Agregar")+" Ubicaci\xf3n",icon:c.position&&("loading"===c.position?r.a.createElement(_.a,{size:20,color:"primary"}):r.a.createElement(dt.a,{color:"secondary"}))||r.a.createElement(yt.a,null)}),r.a.createElement(ct.a,{title:c.coberturas,label:(g?"Cambiar":"Agregar")+" Cobertura",icon:c.coberturas&&("loading"===c.coberturas?r.a.createElement(_.a,{size:20,color:"primary"}):r.a.createElement(dt.a,{color:"secondary"}))||r.a.createElement(Ot.a,null),disabled:!u,onContextMenu:this.handleTabContext}))),d&&r.a.createElement(bt,Object.assign({onMapMounted:this.handleMapMounted,onClick:this.handleMapClick,defaultZoom:12,onPolygonComplete:this.handleNewPolygon,onPolygonClick:this.handleMapClick,onPolygonMouseUp:this.handlePolygonMouseUp},f))),r.a.createElement("div",{style:{width:300,padding:10,textAlign:"center"}},r.a.createElement(v.a,{style:{margin:10},variant:"h6"},"Tarifa de Transporte"),r.a.createElement(qe.a,{label:"Cobrar Servicio de Transporte",control:c.cobrarTransporte?r.a.createElement(_.a,{size:20,color:"primary",style:{margin:12}}):r.a.createElement(Ke.a,{checked:s,onChange:this.handleCheck,name:"cobrarTransporte"})}),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ut,{value:o,onChange:this.handleInput,onUpdate:this.handleUpdateProp,label:"Tarifa base",name:"baseTransporte",type:"number",feedback:c,inputProps:{step:"0.01"}}),r.a.createElement(ut,{value:i,onChange:this.handleInput,onUpdate:this.handleUpdateProp,label:"Kms que cubre la tarifa base",name:"kmBaseTransporte",type:"number",feedback:c,inputProps:{step:"0.01"}}),r.a.createElement(ut,{value:l,onChange:this.handleInput,onUpdate:this.handleUpdateProp,label:"Recargo por km adicional",name:"recargoPorKm",type:"number",feedback:c,inputProps:{step:"0.01"}}))))}}]),a}(r.a.PureComponent),kt=a(589),St=a(590),jt=a(591),It=a(592),Tt=a(594),wt=a(593),At=a(595),Pt=a(596),xt=a(588),Dt=a(604),Nt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={dias:[],desde:[0,0],hasta:[0,0]},n.handleChange=n.handleChange.bind(Object(s.a)(n)),n.handleDays=n.handleDays.bind(Object(s.a)(n)),n.handleClick=n.handleClick.bind(Object(s.a)(n)),n.handleClose=n.handleClose.bind(Object(s.a)(n)),e.data&&"NUEVO"!==e.data&&(n.state=Object(z.a)({},e.data)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.value,n=t.name;if(n.indexOf(".")>=0){var r=n.split(".");this.setState((function(e){var t=JSON.parse(JSON.stringify(e));return t[r[0]][r[1]]=a,t}))}else this.setState(Object(h.a)({},n,a))}},{key:"handleDays",value:function(e){var t=e.currentTarget.value;this.setState((function(e){var a=JSON.parse(JSON.stringify(e));a.dias=Object(F.a)(a.dias);var n=a.dias.indexOf(+t);return n>=0?a.dias.splice(n,1):a.dias.push(+t),a}))}},{key:"handleClick",value:function(){var e=this,t=this.state,a=t.loading,n=t.dias,r=t.desde,o=t.hasta;if(!a){if(!n.length)return alert("Selecciona al menos un dia");if(r[0]===o[0]&&r[1]===o[1])return alert("Las horas de inicio y fin no pueden ser iguales");this.setState({loading:!0}),this.props.guardar(this.state).catch((function(t){alert(t.message),e.setState({loading:!1})}))}}},{key:"handleClose",value:function(){this.state.loading||this.props.onClose&&this.props.onClose()}},{key:"render",value:function(){var e=this.state,t=e.desde,a=e.hasta,n=e.dias,o=e.loading;return r.a.createElement(B.a,{open:!0,onClose:this.handleClose,maxWidth:"lg"},r.a.createElement(xt.a,null,"HORARIO"),r.a.createElement(V.a,null,r.a.createElement("div",{style:{display:"table"}},r.a.createElement("div",{style:{display:"table-cell",width:150}},r.a.createElement(v.a,{variant:"subtitle1"},"INICIO"),r.a.createElement("div",null,r.a.createElement(Rt,{label:"Horas",length:23,name:"desde.0",value:t[0],onChange:this.handleChange}),r.a.createElement(v.a,{style:{display:"inline",width:"auto",marginLeft:5,marginRight:5},variant:"subtitle1"},":"),r.a.createElement(Rt,{label:"Minutos",items:[0,15,30,45],name:"desde.1",value:t[1],onChange:this.handleChange}))),r.a.createElement("div",{style:{display:"table-cell",width:150}},r.a.createElement(v.a,{variant:"subtitle1"},"FIN"),r.a.createElement("div",null,r.a.createElement(Rt,{label:"Horas",length:23,name:"hasta.0",value:a[0],onChange:this.handleChange}),r.a.createElement(v.a,{style:{display:"inline",width:"auto",marginLeft:5,marginRight:5},variant:"subtitle1"},":"),r.a.createElement(Rt,{label:"Minutos",items:[0,15,30,45],name:"hasta.1",value:a[1],onChange:this.handleChange}))),r.a.createElement("div",{style:{display:"table-cell"}},r.a.createElement(v.a,{variant:"subtitle1"},"SELECCIONA LOS DIAS"),r.a.createElement(Mt,{value:n,onChange:this.handleDays}))),r.a.createElement(J.a,null,r.a.createElement(q.a,{disabled:o,style:{flex:1},color:"primary",variant:"outlined",onClick:this.handleClick},"GUARDAR"))))}}]),a}(r.a.PureComponent);function Rt(e){var t=e.length,a=e.items,n=Object(mt.a)(e,["length","items"]),o=[];if(a)o=a.map((function(e){return{value:e,label:1===e.toString().length?"0".concat(e):e}}));else for(var i=0;i<=t;i++)o.push({value:i,label:1===i.toString().length?"0".concat(i):i});return r.a.createElement(Dt.a,Object.assign({native:!0},n),o.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))}function Mt(e){var t=e.value||[];return r.a.createElement("div",{style:e.style},r.a.createElement(qe.a,{label:"Lun",control:r.a.createElement(Ke.a,{value:"1",checked:t.indexOf(1)>=0,onChange:e.onChange})}),r.a.createElement(qe.a,{label:"Mar",control:r.a.createElement(Ke.a,{value:"2",checked:t.indexOf(2)>=0,onChange:e.onChange})}),r.a.createElement(qe.a,{label:"Mie",control:r.a.createElement(Ke.a,{value:"3",checked:t.indexOf(3)>=0,onChange:e.onChange})}),r.a.createElement(qe.a,{label:"Jue",control:r.a.createElement(Ke.a,{value:"4",checked:t.indexOf(4)>=0,onChange:e.onChange})}),r.a.createElement(qe.a,{label:"Vie",control:r.a.createElement(Ke.a,{value:"5",checked:t.indexOf(5)>=0,onChange:e.onChange})}),r.a.createElement(qe.a,{label:"Sab",control:r.a.createElement(Ke.a,{value:"6",checked:t.indexOf(6)>=0,onChange:e.onChange})}),r.a.createElement(qe.a,{label:"Dom",control:r.a.createElement(Ke.a,{value:"0",checked:t.indexOf(0)>=0,onChange:e.onChange})}))}var Gt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={horarios:[],selected:null},e.configuracion&&e.configuracion.horarios&&(n.state.horarios=Object(F.a)(e.configuracion.horarios)),n.handleDelete=n.handleDelete.bind(Object(s.a)(n)),n.handleClose=n.handleClose.bind(Object(s.a)(n)),n.handleEdit=n.handleEdit.bind(Object(s.a)(n)),n.guardar=n.guardar.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"handleDelete",value:function(e){var t=this,a=e.currentTarget.value;if(this.state.horarios.length<=1)return alert("No se puede borrar: Debe existir al menos un horario");var n=this.state.horarios[+a];if(n&&!n.loading){this.setState((function(e){var t=Object(z.a)({},e);return t.horarios=Object(F.a)(t.horarios),t.horarios[a].loading=!0,t}));var r=Object(F.a)(this.state.horarios);r.splice(a,1),ge.setConfigInfo({horarios:r}).then((function(){t.setState({horarios:r})})).catch((function(e){alert("Ocurrio un error: "+e.message),t.setState((function(e){var t=Object(z.a)({},e);return t.horarios=Object(F.a)(t.horarios),t.horarios[a].loading=!1,t}))}))}}},{key:"guardar",value:function(e){var t,a=this,n=JSON.parse(JSON.stringify(this.state.horarios));return e.id&&(t=n.find((function(t){return t.id===e.id}))),t?n[n.indexOf(t)]=e:n.push(e),ge.setConfigInfo({horarios:n}).then((function(e){a.setState({horarios:n,selected:null})}))}},{key:"handleEdit",value:function(e){var t=e.currentTarget.value;if("NUEVO"===t)return this.setState({selected:"NUEVO"});this.setState((function(e){var a=Object(z.a)({},e);a.horarios=Object(F.a)(a.horarios);var n=a.horarios[+t];return n?(a.selected=n,a):a}))}},{key:"handleClose",value:function(){this.setState({selected:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.horarios,n=t.selected;return r.a.createElement("div",null,n&&r.a.createElement(Nt,{data:n,onClose:this.handleClose,guardar:this.guardar}),r.a.createElement(kt.a,null,r.a.createElement(St.a,null,r.a.createElement(jt.a,null,r.a.createElement(It.a,{style:{width:40}}),r.a.createElement(It.a,{component:"th"},"HORA"),r.a.createElement(It.a,{component:"th"},"DIAS"),r.a.createElement(It.a,{component:"th",style:{width:40}},r.a.createElement(S.a,{onClick:this.handleEdit,value:"NUEVO"},r.a.createElement(wt.a,{color:"primary"}))))),r.a.createElement(Tt.a,null,a&&a.map((function(t,a){return r.a.createElement(jt.a,{key:a},r.a.createElement(It.a,{scope:"row",component:"th"},r.a.createElement(S.a,{disabled:t.loading,value:a,onClick:e.handleDelete},t.loading?r.a.createElement(_.a,{size:20,color:"secondary"}):r.a.createElement(At.a,null))),r.a.createElement(It.a,null,Lt(t.desde,t.tz)+" - "+Lt(t.hasta,t.tz)),r.a.createElement(It.a,null,t.dias.map(Ut).join(", ")),r.a.createElement(It.a,null,r.a.createElement(S.a,{disabled:t.loading,value:a,onClick:e.handleEdit},r.a.createElement(Pt.a,null))))})))))}}]),a}(r.a.PureComponent);function Ut(e){return 1===e?"Lun":2===e?"Mar":3===e?"Mie":4===e?"Jue":5===e?"Vie":6===e?"Sab":0===e?"Dom":"UNDEFINED"}function Lt(e,t){var a=Object(W.a)(e,2),n=a[0],r=a[1];return(1===n.toString().length?"0":" ")+n+":"+(1===r.toString().length?"0":" ")+r}var _t=a(559),Bt=a(597),zt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).state={contactos:[],telefono_contacto:"",nombre_contacto:""},n.timeouts={},n.handleInput=function(e){var t=e.currentTarget,a=t.name,r=t.value;n.setState(Object(h.a)({},a,r))},n.handleNew=function(e){var t=n.state,a=t.telefono_contacto,r=t.nombre_contacto,o=(a||"").trim(),i=(r||"").trim();if(!i||!i.trim())return alert("Digita el Nombre de la persona"),document.getElementById("nombre_contacto").focus();if(!o)return alert("Digita el n\xfamero de tel\xe9fono"),document.getElementById("telefono_contacto").focus();if(12!==o.length)return alert("El n\xfamero de tel\xe9fono debe tener 12 digitos"),document.getElementById("telefono_contacto").focus();for(var l=["0","1","2","3","4","5","6","7","8","9"],c=0;c<o.length;c++){var s=o[c];if(l.indexOf(s)<0)return alert("El n\xfamero de tel\xe9fono solo puede contener digitos."),document.getElementById("telefono_contacto").focus()}n.setState((function(e){var t=Object(z.a)({},e);return t.contactos=Object(F.a)(t.contactos),t.contactos.push({telefono:o,nombre:i}),t.telefono_contacto="",t.nombre_contacto="",t}))},n.handleRemove=function(e){var t=+e.currentTarget.value;n.setState((function(e){var a=Object(z.a)({},e);return a.contactos=Object(F.a)(a.contactos),a.contactos[t]?(a.contactos.splice(t,1),a):a}))},n.handleSave=function(e){n.state.loading||(n.setState({loading:"contactos"}),ge.setConfigInfo({contactos:n.state.contactos}).then((function(e){n.setState({loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1}),console.dir(e)})))},e.onMounted&&e.onMounted(e.stepID);var r=e.configuracion;if(r)for(var o in r)r.hasOwnProperty(o)&&(n.state[o]=r[o]);return n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.contactos,n=t.nombre_contacto,o=t.telefono_contacto,i=t.loading;return r.a.createElement("div",null,r.a.createElement(v.a,{variant:"h6",style:{textAlign:"center",margin:10}},"PUEDES ENVIAR TUS PEDIDOS POR WHATSAPP A ESTAS PERSONAS:"),r.a.createElement(kt.a,null,r.a.createElement(St.a,null,r.a.createElement(jt.a,null,r.a.createElement(It.a,null,"Nombre"),r.a.createElement(It.a,null,"Telefono"),r.a.createElement(It.a,null)),r.a.createElement(jt.a,null,r.a.createElement(It.a,null,r.a.createElement(_t.a,{inputProps:{id:"nombre_contacto",maxLength:50},fullWidth:!0,margin:"none",disabled:i,value:n,name:"nombre_contacto",onChange:this.handleInput,placeholder:"Nombre..."})),r.a.createElement(It.a,null,r.a.createElement(_t.a,{inputProps:{id:"telefono_contacto",maxLength:20},fullWidth:!0,disabled:i,value:o,margin:"none",name:"telefono_contacto",onChange:this.handleInput,placeholder:"Telefono (Ej:5939939579)",title:"N\xfamero de tel\xe9fono incluyendo el c\xf3digo internacional, sin signos"})),r.a.createElement(It.a,null,r.a.createElement(S.a,{disabled:i,title:"Agregar",onClick:this.handleNew},r.a.createElement(Re.a,null))))),r.a.createElement(Tt.a,null,a.map((function(t,a){return r.a.createElement(jt.a,{key:a},r.a.createElement(It.a,{scope:"row",component:"th"},t.nombre),r.a.createElement(It.a,null,t.telefono),r.a.createElement(It.a,null,r.a.createElement(S.a,{disabled:i,onClick:e.handleRemove,value:a},r.a.createElement(At.a,null))))}))),r.a.createElement(Bt.a,null,r.a.createElement(jt.a,null,r.a.createElement(It.a,{colSpan:3},r.a.createElement(q.a,{onClick:this.handleSave,fullWidth:!0,variant:"outlined",diabled:i},"contactos"===i?"GUARDANDO...":"GUARDAR"))))))}}]),a}(r.a.PureComponent),Ft=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={currentTab:0,defaultConfiguracion:null,loading:!0,error:null,openedTabs:{}},e.onMounted&&e.onMounted(e.stepID),n.handleTabChange=n.handleTabChange.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;ge.GetConfigInfo().then((function(t){e.setState((function(e){var a=Object(z.a)({},e);return a.configuracion=t,a.loading=null,a.openedTabs[a.currentTab]=!0,a}))})).catch((function(t){return e.setState({error:t,loading:null})}))}},{key:"handleTabChange",value:function(e,t){this.setState((function(e){var a=Object(z.a)({},e);return a.openedTabs[t]=!0,a.currentTab=t,a}))}},{key:"render",value:function(){var e=this.state,t=e.currentTab,a=e.openedTabs,n=e.error,o=e.loading,i=e.configuracion;return o?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},r.a.createElement(_.a,{size:100}),r.a.createElement(v.a,{variant:"h4"},"CARGANDO...")):n?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:200}},r.a.createElement(v.a,{variant:"h6"},"Ocurri\xf3 un error al cargar tu configuraci\xf3n"),r.a.createElement(v.a,{variant:"subtitle1"},n.message),r.a.createElement(v.a,{variant:"body1"},n.code," ",n.status)):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},r.a.createElement(lt.a,{variant:"fullWidth",onChange:this.handleTabChange,value:t,indicatorColor:"primary",textColor:"primary"},r.a.createElement(ct.a,{label:"Informaci\xf3n"}),r.a.createElement(ct.a,{label:"Parametros"}),r.a.createElement(ct.a,{label:"Cobertura y Tarifas"}),r.a.createElement(ct.a,{label:"Horarios de Atenci\xf3n"})),r.a.createElement("div",{style:{display:0===t?"block":"none",flex:1}},a[0]&&r.a.createElement(ht,{configuracion:i})),r.a.createElement("div",{style:{display:1===t?"block":"none",flex:1}},a[1]&&r.a.createElement(zt,{configuracion:i})),r.a.createElement("div",{style:{display:2===t?"block":"none",flex:1}},a[2]&&r.a.createElement(Ct,{configuracion:i})),r.a.createElement("div",{style:{display:3===t?"block":"none",flex:1}},a[3]&&r.a.createElement(Gt,{configuracion:i})))}}]),a}(r.a.PureComponent),Wt=[{id:"orders",title:"Pedidos",Icon:b.a},{id:"products",title:"Productos",Icon:E.a},{id:"config",title:"Configuraci\xf3n",Icon:y.a,addDividerBefore:!0}],Vt=Object(g.a)((function(e){return{drawer:Object(h.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),toolbar:e.mixins.toolbar,drawerPaper:{width:200},content:Object(h.a)({flexGrow:1},e.breakpoints.up("sm"),{marginLeft:200}),appBar:{display:"block"}}}))(function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={current_step:"",isMenuOpen:!1},n.REMOVE_LISTENER=void 0,n.handleMounted=n.handleMounted.bind(Object(s.a)(n)),n.onToggleMenu=n.onToggleMenu.bind(Object(s.a)(n)),ge.START_LISTENING(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.Notification&&Notification.requestPermission().then((function(e){return console.info("Notification status",e)})).catch(console.error)}},{key:"componentWillUnmount",value:function(){this.REMOVE_LISTENER&&this.REMOVE_LISTENER()}},{key:"handleMounted",value:function(e){this.setState({current_step:e,isMenuOpen:!1})}},{key:"onToggleMenu",value:function(){this.setState({isMenuOpen:!this.state.isMenuOpen})}},{key:"render",value:function(){var e=this,t=this.state,a=t.current_step,n=t.isMenuOpen,o=(a&&Wt.find((function(e){return e.id===a}))).title,i=this.props.store.getState(),l=this.props,c=l.classes,s=l.window;return r.a.createElement(m.a,null,r.a.createElement(ve.a,{store:this.props.store},r.a.createElement(f.a,{style:{height:"100vh",width:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(P,{user:this.props.user,store:i.store,title:o,onLogOut:this.props.onLogOut,onMenuClick:this.onToggleMenu}),r.a.createElement(L,{STEPS:Wt,current_step:a,classes:c,window:s,isMenuOpen:n,onCloseMenu:this.onToggleMenu}),r.a.createElement("main",{className:c.content},r.a.createElement("div",{className:c.toolbar}),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/orders",render:function(t){return r.a.createElement(Ae,Object.assign({},t,{onMounted:e.handleMounted,stepID:"orders"}))}}),r.a.createElement(p.a,{path:"/products",render:function(t){return r.a.createElement(it,Object.assign({},t,{onMounted:e.handleMounted,stepID:"products"}))}}),r.a.createElement(p.a,{path:"/config",render:function(t){return r.a.createElement(Ft,Object.assign({},t,{onMounted:e.handleMounted,stepID:"config"}))}}),r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement("div",{style:{paddingTop:100,width:"100%",textAlign:"center"}},r.a.createElement(v.a,{variant:"h4"},"BIENVENIDO!"),r.a.createElement(v.a,{variant:"subtitle2"},"RunFood Orders - Administrador"))))))))}}]),a}(r.a.Component)),Jt=a(601),Ht={marginTop:10,marginBottom:10},qt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:"",pwd:"",showPassword:!1,loading:!1,store:null,error:null},n.handleChange=n.handleChange.bind(Object(s.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(s.a)(n)),n.handleTogglePassword=n.handleTogglePassword.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.loading,r=a.user,o=a.pwd;if(!n){if(!r)return this.setState({error:{message:"Digite el usuario"}});if(!o)return this.setState({error:{message:"Digite la contrase\xf1a"}});this.setState({loading:!0}),ge.LogIn({user:r,pwd:o,withStoresInfo:!0}).then((function(e){return t.props.onLogged({user:r,token:e.token,store:e.store})})).catch((function(e){return t.setState({error:e,loading:!1})}))}}},{key:"handleTogglePassword",value:function(){this.setState((function(e){var t=Object(z.a)({},e);return t.showPassword=!t.showPassword,t}))}},{key:"render",value:function(){var e=this.state,t=e.showPassword,a=e.loading,n=e.error,o=e.user,i=e.pwd;return r.a.createElement("div",{style:{paddingTop:40,paddingBottom:40,overflow:"auto"}},r.a.createElement(Pe.a,{style:{maxWidth:400,width:"calc(100% - 20px)",margin:"auto"},elevation:8},r.a.createElement(De.a,{style:{padding:0}},r.a.createElement("form",{onSubmit:this.handleSubmit,style:{padding:20}},r.a.createElement(v.a,{style:{textAlign:"center"},variant:"h5"},"INICIO DE SESION"),r.a.createElement(H.a,{autoFocus:!0,disabled:a,required:!0,style:Object(z.a)({},Ht),fullWidth:!0,label:"USUARIO",value:o||"",name:"user",onChange:this.handleChange,type:"email",InputProps:{startAdornment:r.a.createElement(He.a,{position:"start"},r.a.createElement(T.a,null))}}),r.a.createElement(H.a,{required:!0,fullWidth:!0,style:Object(z.a)({},Ht),value:i||"",label:"CONTRASE\xd1A",name:"pwd",onChange:this.handleChange,type:t?"text":"password",InputProps:{endAdornment:r.a.createElement(He.a,{position:"end"},r.a.createElement(S.a,{onClick:this.handleTogglePassword},t?r.a.createElement(Jt.a,null):r.a.createElement(_e.a,null)))}}),n&&r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(v.a,{color:"secondary",variant:"body2"},n.message," ",n.code&&n.code),r.a.createElement(v.a,{color:"secondary",variant:"body1"},n.status," | ",n.statusText)),r.a.createElement(q.a,{type:"submit",fullWidth:!0,style:Object(z.a)({},Ht),variant:"outlined",disabled:a,color:"primary"},a?r.a.createElement(_.a,{size:20,color:"inherit"}):"ENTRAR")))))}}]),a}(r.a.Component);function Kt(e){e||(e=he()),re.dispatch({type:"SET_TIENDA",payload:e.store}),re.dispatch({type:"SET_POSITION",payload:e.position}),ge.setStoreId(e.store.nombre),i.a.render(r.a.createElement(Vt,{user:e.user,store:re,onLogOut:Qt}),document.getElementById("app"))}function Yt(){i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qt,{onLogged:$t})),document.getElementById("app"))}function $t(e){ue(e),Kt()}function Qt(){ge.STOP_LISTENING(),ue(),Yt()}he()?Kt():Yt();try{navigator.serviceWorker&&navigator.serviceWorker.register("./service-worker.js")}catch(Zt){console.error("Service Worker wont update",Zt)}}},[[267,1,2]]]);
//# sourceMappingURL=main.69e5a778.chunk.js.map